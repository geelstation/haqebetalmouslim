var CE=Object.defineProperty;var NE=(t,e,n)=>e in t?CE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ku=(t,e,n)=>NE(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function PE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F1={exports:{}},vc={},U1={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=Symbol.for("react.element"),kE=Symbol.for("react.portal"),RE=Symbol.for("react.fragment"),jE=Symbol.for("react.strict_mode"),DE=Symbol.for("react.profiler"),bE=Symbol.for("react.provider"),VE=Symbol.for("react.context"),OE=Symbol.for("react.forward_ref"),ME=Symbol.for("react.suspense"),LE=Symbol.for("react.memo"),FE=Symbol.for("react.lazy"),Mm=Symbol.iterator;function UE(t){return t===null||typeof t!="object"?null:(t=Mm&&t[Mm]||t["@@iterator"],typeof t=="function"?t:null)}var z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B1=Object.assign,$1={};function vi(t,e,n){this.props=t,this.context=e,this.refs=$1,this.updater=n||z1}vi.prototype.isReactComponent={};vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function H1(){}H1.prototype=vi.prototype;function $d(t,e,n){this.props=t,this.context=e,this.refs=$1,this.updater=n||z1}var Hd=$d.prototype=new H1;Hd.constructor=$d;B1(Hd,vi.prototype);Hd.isPureReactComponent=!0;var Lm=Array.isArray,q1=Object.prototype.hasOwnProperty,qd={current:null},W1={key:!0,ref:!0,__self:!0,__source:!0};function G1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)q1.call(e,r)&&!W1.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:na,type:t,key:i,ref:o,props:s,_owner:qd.current}}function zE(t,e){return{$$typeof:na,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wd(t){return typeof t=="object"&&t!==null&&t.$$typeof===na}function BE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fm=/\/+/g;function Ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BE(""+t.key):e.toString(36)}function nl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case na:case kE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ru(o,0):r,Lm(s)?(n="",t!=null&&(n=t.replace(Fm,"$&/")+"/"),nl(s,e,n,"",function(h){return h})):s!=null&&(Wd(s)&&(s=zE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Lm(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Ru(i,l);o+=nl(i,e,n,u,s)}else if(u=UE(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Ru(i,l++),o+=nl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Da(t,e,n){if(t==null)return t;var r=[],s=0;return nl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function $E(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},rl={transition:null},HE={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:rl,ReactCurrentOwner:qd};function K1(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Da,forEach:function(t,e,n){Da(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Da(t,function(){e++}),e},toArray:function(t){return Da(t,function(e){return e})||[]},only:function(t){if(!Wd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=vi;ce.Fragment=RE;ce.Profiler=DE;ce.PureComponent=$d;ce.StrictMode=jE;ce.Suspense=ME;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HE;ce.act=K1;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=B1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)q1.call(e,u)&&!W1.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:na,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:VE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bE,_context:t},t.Consumer=t};ce.createElement=G1;ce.createFactory=function(t){var e=G1.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:OE,render:t}};ce.isValidElement=Wd;ce.lazy=function(t){return{$$typeof:FE,_payload:{_status:-1,_result:t},_init:$E}};ce.memo=function(t,e){return{$$typeof:LE,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=rl.transition;rl.transition={};try{t()}finally{rl.transition=e}};ce.unstable_act=K1;ce.useCallback=function(t,e){return Tt.current.useCallback(t,e)};ce.useContext=function(t){return Tt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Tt.current.useEffect(t,e)};ce.useId=function(){return Tt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Tt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};ce.useRef=function(t){return Tt.current.useRef(t)};ce.useState=function(t){return Tt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Tt.current.useTransition()};ce.version="18.3.1";U1.exports=ce;var V=U1.exports;const _t=PE(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE=V,WE=Symbol.for("react.element"),GE=Symbol.for("react.fragment"),KE=Object.prototype.hasOwnProperty,QE=qE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JE={key:!0,ref:!0,__self:!0,__source:!0};function Q1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KE.call(e,r)&&!JE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:WE,type:t,key:i,ref:o,props:s,_owner:QE.current}}vc.Fragment=GE;vc.jsx=Q1;vc.jsxs=Q1;F1.exports=vc;var c=F1.exports,_h={},J1={exports:{}},Ft={},Y1={exports:{}},X1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var te=B.length;B.push(K);e:for(;0<te;){var ge=te-1>>>1,_e=B[ge];if(0<s(_e,K))B[ge]=K,B[te]=_e,te=ge;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],te=B.pop();if(te!==K){B[0]=te;e:for(var ge=0,_e=B.length,Z=_e>>>1;ge<Z;){var oe=2*(ge+1)-1,we=B[oe],O=oe+1,Y=B[O];if(0>s(we,te))O<_e&&0>s(Y,we)?(B[ge]=Y,B[O]=te,ge=O):(B[ge]=we,B[oe]=te,ge=oe);else if(O<_e&&0>s(Y,te))B[ge]=Y,B[O]=te,ge=O;else break e}}return K}function s(B,K){var te=B.sortIndex-K.sortIndex;return te!==0?te:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,m=null,g=3,S=!1,P=!1,T=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=B)r(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(h)}}function D(B){if(T=!1,C(B),!P)if(n(u)!==null)P=!0,H(F);else{var K=n(h);K!==null&&Me(D,K.startTime-B)}}function F(B,K){P=!1,T&&(T=!1,v(y),y=-1),S=!0;var te=g;try{for(C(K),m=n(u);m!==null&&(!(m.expirationTime>K)||B&&!A());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,g=m.priorityLevel;var _e=ge(m.expirationTime<=K);K=t.unstable_now(),typeof _e=="function"?m.callback=_e:m===n(u)&&r(u),C(K)}else r(u);m=n(u)}if(m!==null)var Z=!0;else{var oe=n(h);oe!==null&&Me(D,oe.startTime-K),Z=!1}return Z}finally{m=null,g=te,S=!1}}var U=!1,x=null,y=-1,N=5,w=-1;function A(){return!(t.unstable_now()-w<N)}function R(){if(x!==null){var B=t.unstable_now();w=B;var K=!0;try{K=x(!0,B)}finally{K?I():(U=!1,x=null)}}else U=!1}var I;if(typeof E=="function")I=function(){E(R)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,le=J.port2;J.port1.onmessage=R,I=function(){le.postMessage(null)}}else I=function(){k(R,0)};function H(B){x=B,U||(U=!0,I())}function Me(B,K){y=k(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,H(F))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var te=g;g=K;try{return B()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var te=g;g=B;try{return K()}finally{g=te}},t.unstable_scheduleCallback=function(B,K,te){var ge=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ge+te:ge):te=ge,B){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=te+_e,B={id:f++,callback:K,priorityLevel:B,startTime:te,expirationTime:_e,sortIndex:-1},te>ge?(B.sortIndex=te,e(h,B),n(u)===null&&B===n(h)&&(T?(v(y),y=-1):T=!0,Me(D,te-ge))):(B.sortIndex=_e,e(u,B),P||S||(P=!0,H(F))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var K=g;return function(){var te=g;g=K;try{return B.apply(this,arguments)}finally{g=te}}}})(X1);Y1.exports=X1;var YE=Y1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE=V,Lt=YE;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z1=new Set,Ao={};function vs(t,e){ni(t,e),ni(t+"Capture",e)}function ni(t,e){for(Ao[t]=e,t=0;t<e.length;t++)Z1.add(e[t])}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=Object.prototype.hasOwnProperty,ZE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Um={},zm={};function e4(t){return wh.call(zm,t)?!0:wh.call(Um,t)?!1:ZE.test(t)?zm[t]=!0:(Um[t]=!0,!1)}function t4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function n4(t,e,n,r){if(e===null||typeof e>"u"||t4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gd=/[\-:]([a-z])/g;function Kd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gd,Kd);rt[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gd,Kd);rt[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gd,Kd);rt[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qd(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n4(e,n,s,r)&&(n=null),r||s===null?e4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hn=XE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ba=Symbol.for("react.element"),Ds=Symbol.for("react.portal"),bs=Symbol.for("react.fragment"),Jd=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),ev=Symbol.for("react.provider"),tv=Symbol.for("react.context"),Yd=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),Xd=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),nv=Symbol.for("react.offscreen"),Bm=Symbol.iterator;function Wi(t){return t===null||typeof t!="object"?null:(t=Bm&&t[Bm]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,ju;function to(t){if(ju===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ju=e&&e[1]||""}return`
`+ju+t}var Du=!1;function bu(t,e){if(!t||Du)return"";Du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Du=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?to(t):""}function r4(t){switch(t.tag){case 5:return to(t.type);case 16:return to("Lazy");case 13:return to("Suspense");case 19:return to("SuspenseList");case 0:case 2:case 15:return t=bu(t.type,!1),t;case 11:return t=bu(t.type.render,!1),t;case 1:return t=bu(t.type,!0),t;default:return""}}function Sh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bs:return"Fragment";case Ds:return"Portal";case Eh:return"Profiler";case Jd:return"StrictMode";case Th:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tv:return(t.displayName||"Context")+".Consumer";case ev:return(t._context.displayName||"Context")+".Provider";case Yd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xd:return e=t.displayName||null,e!==null?e:Sh(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return Sh(t(e))}catch{}}return null}function s4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sh(e);case 8:return e===Jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i4(t){var e=rv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=i4(t))}function sv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xh(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $m(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iv(t,e){e=e.checked,e!=null&&Qd(t,"checked",e,!1)}function Ah(t,e){iv(t,e);var n=Cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ch(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ch(t,e,n){(e!=="number"||Sl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var no=Array.isArray;function qs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Nh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(no(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function ov(t,e){var n=Cr(e.value),r=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function av(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ph(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?av(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,lv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o4=["Webkit","ms","Moz","O"];Object.keys(co).forEach(function(t){o4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),co[e]=co[t]})});function cv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||co.hasOwnProperty(t)&&co[t]?(""+e).trim():e+"px"}function uv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=cv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var a4=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kh(t,e){if(e){if(a4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Rh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=null;function Zd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dh=null,Ws=null,Gs=null;function Gm(t){if(t=ia(t)){if(typeof Dh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ic(e),Dh(t.stateNode,t.type,e))}}function hv(t){Ws?Gs?Gs.push(t):Gs=[t]:Ws=t}function dv(){if(Ws){var t=Ws,e=Gs;if(Gs=Ws=null,Gm(t),e)for(t=0;t<e.length;t++)Gm(e[t])}}function fv(t,e){return t(e)}function pv(){}var Vu=!1;function mv(t,e,n){if(Vu)return t(e,n);Vu=!0;try{return fv(t,e,n)}finally{Vu=!1,(Ws!==null||Gs!==null)&&(pv(),dv())}}function No(t,e){var n=t.stateNode;if(n===null)return null;var r=Ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var bh=!1;if(Vn)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){bh=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{bh=!1}function l4(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var uo=!1,xl=null,Al=!1,Vh=null,c4={onError:function(t){uo=!0,xl=t}};function u4(t,e,n,r,s,i,o,l,u){uo=!1,xl=null,l4.apply(c4,arguments)}function h4(t,e,n,r,s,i,o,l,u){if(u4.apply(this,arguments),uo){if(uo){var h=xl;uo=!1,xl=null}else throw Error(z(198));Al||(Al=!0,Vh=h)}}function _s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Km(t){if(_s(t)!==t)throw Error(z(188))}function d4(t){var e=t.alternate;if(!e){if(e=_s(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Km(s),t;if(i===r)return Km(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function yv(t){return t=d4(t),t!==null?vv(t):null}function vv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vv(t);if(e!==null)return e;t=t.sibling}return null}var _v=Lt.unstable_scheduleCallback,Qm=Lt.unstable_cancelCallback,f4=Lt.unstable_shouldYield,p4=Lt.unstable_requestPaint,Fe=Lt.unstable_now,m4=Lt.unstable_getCurrentPriorityLevel,ef=Lt.unstable_ImmediatePriority,wv=Lt.unstable_UserBlockingPriority,Cl=Lt.unstable_NormalPriority,g4=Lt.unstable_LowPriority,Ev=Lt.unstable_IdlePriority,_c=null,vn=null;function y4(t){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(_c,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:w4,v4=Math.log,_4=Math.LN2;function w4(t){return t>>>=0,t===0?32:31-(v4(t)/_4|0)|0}var Ma=64,La=4194304;function ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ro(l):(i&=o,i!==0&&(r=ro(i)))}else o=n&~s,o!==0?r=ro(o):i!==0&&(r=ro(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function E4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=E4(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Oh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tv(){var t=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),t}function Ou(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ra(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function I4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function Iv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sv,nf,xv,Av,Cv,Mh=!1,Fa=[],dr=null,fr=null,pr=null,Po=new Map,ko=new Map,rr=[],S4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jm(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Po.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(e.pointerId)}}function Ki(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ia(e),e!==null&&nf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function x4(t,e,n,r,s){switch(e){case"focusin":return dr=Ki(dr,t,e,n,r,s),!0;case"dragenter":return fr=Ki(fr,t,e,n,r,s),!0;case"mouseover":return pr=Ki(pr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Po.set(i,Ki(Po.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ko.set(i,Ki(ko.get(i)||null,t,e,n,r,s)),!0}return!1}function Nv(t){var e=Xr(t.target);if(e!==null){var n=_s(e);if(n!==null){if(e=n.tag,e===13){if(e=gv(n),e!==null){t.blockedOn=e,Cv(t.priority,function(){xv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jh=r,n.target.dispatchEvent(r),jh=null}else return e=ia(n),e!==null&&nf(e),t.blockedOn=n,!1;e.shift()}return!0}function Ym(t,e,n){sl(t)&&n.delete(e)}function A4(){Mh=!1,dr!==null&&sl(dr)&&(dr=null),fr!==null&&sl(fr)&&(fr=null),pr!==null&&sl(pr)&&(pr=null),Po.forEach(Ym),ko.forEach(Ym)}function Qi(t,e){t.blockedOn===e&&(t.blockedOn=null,Mh||(Mh=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,A4)))}function Ro(t){function e(s){return Qi(s,t)}if(0<Fa.length){Qi(Fa[0],t);for(var n=1;n<Fa.length;n++){var r=Fa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dr!==null&&Qi(dr,t),fr!==null&&Qi(fr,t),pr!==null&&Qi(pr,t),Po.forEach(e),ko.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)Nv(n),n.blockedOn===null&&rr.shift()}var Ks=Hn.ReactCurrentBatchConfig,Pl=!0;function C4(t,e,n,r){var s=ve,i=Ks.transition;Ks.transition=null;try{ve=1,rf(t,e,n,r)}finally{ve=s,Ks.transition=i}}function N4(t,e,n,r){var s=ve,i=Ks.transition;Ks.transition=null;try{ve=4,rf(t,e,n,r)}finally{ve=s,Ks.transition=i}}function rf(t,e,n,r){if(Pl){var s=Lh(t,e,n,r);if(s===null)Wu(t,e,r,kl,n),Jm(t,r);else if(x4(s,t,e,n,r))r.stopPropagation();else if(Jm(t,r),e&4&&-1<S4.indexOf(t)){for(;s!==null;){var i=ia(s);if(i!==null&&Sv(i),i=Lh(t,e,n,r),i===null&&Wu(t,e,r,kl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wu(t,e,r,null,n)}}var kl=null;function Lh(t,e,n,r){if(kl=null,t=Zd(r),t=Xr(t),t!==null)if(e=_s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kl=t,null}function Pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m4()){case ef:return 1;case wv:return 4;case Cl:case g4:return 16;case Ev:return 536870912;default:return 16}default:return 16}}var cr=null,sf=null,il=null;function kv(){if(il)return il;var t,e=sf,n=e.length,r,s="value"in cr?cr.value:cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return il=s.slice(t,1<r?1-r:void 0)}function ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function Xm(){return!1}function Ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ua:Xm,this.isPropagationStopped=Xm,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},of=Ut(_i),sa=je({},_i,{view:0,detail:0}),P4=Ut(sa),Mu,Lu,Ji,wc=je({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:af,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ji&&(Ji&&t.type==="mousemove"?(Mu=t.screenX-Ji.screenX,Lu=t.screenY-Ji.screenY):Lu=Mu=0,Ji=t),Mu)},movementY:function(t){return"movementY"in t?t.movementY:Lu}}),Zm=Ut(wc),k4=je({},wc,{dataTransfer:0}),R4=Ut(k4),j4=je({},sa,{relatedTarget:0}),Fu=Ut(j4),D4=je({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),b4=Ut(D4),V4=je({},_i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),O4=Ut(V4),M4=je({},_i,{data:0}),eg=Ut(M4),L4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=U4[t])?!!e[t]:!1}function af(){return z4}var B4=je({},sa,{key:function(t){if(t.key){var e=L4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?F4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:af,charCode:function(t){return t.type==="keypress"?ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$4=Ut(B4),H4=je({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tg=Ut(H4),q4=je({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:af}),W4=Ut(q4),G4=je({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),K4=Ut(G4),Q4=je({},wc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J4=Ut(Q4),Y4=[9,13,27,32],lf=Vn&&"CompositionEvent"in window,ho=null;Vn&&"documentMode"in document&&(ho=document.documentMode);var X4=Vn&&"TextEvent"in window&&!ho,Rv=Vn&&(!lf||ho&&8<ho&&11>=ho),ng=" ",rg=!1;function jv(t,e){switch(t){case"keyup":return Y4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function Z4(t,e){switch(t){case"compositionend":return Dv(e);case"keypress":return e.which!==32?null:(rg=!0,ng);case"textInput":return t=e.data,t===ng&&rg?null:t;default:return null}}function eT(t,e){if(Vs)return t==="compositionend"||!lf&&jv(t,e)?(t=kv(),il=sf=cr=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Rv&&e.locale!=="ko"?null:e.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tT[t.type]:e==="textarea"}function bv(t,e,n,r){hv(r),e=Rl(e,"onChange"),0<e.length&&(n=new of("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fo=null,jo=null;function nT(t){qv(t,0)}function Ec(t){var e=Ls(t);if(sv(e))return t}function rT(t,e){if(t==="change")return e}var Vv=!1;if(Vn){var Uu;if(Vn){var zu="oninput"in document;if(!zu){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),zu=typeof ig.oninput=="function"}Uu=zu}else Uu=!1;Vv=Uu&&(!document.documentMode||9<document.documentMode)}function og(){fo&&(fo.detachEvent("onpropertychange",Ov),jo=fo=null)}function Ov(t){if(t.propertyName==="value"&&Ec(jo)){var e=[];bv(e,jo,t,Zd(t)),mv(nT,e)}}function sT(t,e,n){t==="focusin"?(og(),fo=e,jo=n,fo.attachEvent("onpropertychange",Ov)):t==="focusout"&&og()}function iT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ec(jo)}function oT(t,e){if(t==="click")return Ec(e)}function aT(t,e){if(t==="input"||t==="change")return Ec(e)}function lT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:lT;function Do(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wh.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lg(t,e){var n=ag(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ag(n)}}function Mv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lv(){for(var t=window,e=Sl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sl(t.document)}return e}function cf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cT(t){var e=Lv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Mv(n.ownerDocument.documentElement,n)){if(r!==null&&cf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lg(n,i);var o=lg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uT=Vn&&"documentMode"in document&&11>=document.documentMode,Os=null,Fh=null,po=null,Uh=!1;function cg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uh||Os==null||Os!==Sl(r)||(r=Os,"selectionStart"in r&&cf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),po&&Do(po,r)||(po=r,r=Rl(Fh,"onSelect"),0<r.length&&(e=new of("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Os)))}function za(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ms={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},Bu={},Fv={};Vn&&(Fv=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function Tc(t){if(Bu[t])return Bu[t];if(!Ms[t])return t;var e=Ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fv)return Bu[t]=e[n];return t}var Uv=Tc("animationend"),zv=Tc("animationiteration"),Bv=Tc("animationstart"),$v=Tc("transitionend"),Hv=new Map,ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){Hv.set(t,e),vs(e,[t])}for(var $u=0;$u<ug.length;$u++){var Hu=ug[$u],hT=Hu.toLowerCase(),dT=Hu[0].toUpperCase()+Hu.slice(1);Lr(hT,"on"+dT)}Lr(Uv,"onAnimationEnd");Lr(zv,"onAnimationIteration");Lr(Bv,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr($v,"onTransitionEnd");ni("onMouseEnter",["mouseout","mouseover"]);ni("onMouseLeave",["mouseout","mouseover"]);ni("onPointerEnter",["pointerout","pointerover"]);ni("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var so="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fT=new Set("cancel close invalid load scroll toggle".split(" ").concat(so));function hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,h4(r,e,void 0,t),t.currentTarget=null}function qv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;hg(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;hg(s,l,h),i=u}}}if(Al)throw t=Vh,Al=!1,Vh=null,t}function Ae(t,e){var n=e[qh];n===void 0&&(n=e[qh]=new Set);var r=t+"__bubble";n.has(r)||(Wv(e,t,2,!1),n.add(r))}function qu(t,e,n){var r=0;e&&(r|=4),Wv(n,t,r,e)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function bo(t){if(!t[Ba]){t[Ba]=!0,Z1.forEach(function(n){n!=="selectionchange"&&(fT.has(n)||qu(n,!1,t),qu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ba]||(e[Ba]=!0,qu("selectionchange",!1,e))}}function Wv(t,e,n,r){switch(Pv(e)){case 1:var s=C4;break;case 4:s=N4;break;default:s=rf}n=s.bind(null,e,n,t),s=void 0,!bh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Xr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}mv(function(){var h=i,f=Zd(n),m=[];e:{var g=Hv.get(t);if(g!==void 0){var S=of,P=t;switch(t){case"keypress":if(ol(n)===0)break e;case"keydown":case"keyup":S=$4;break;case"focusin":P="focus",S=Fu;break;case"focusout":P="blur",S=Fu;break;case"beforeblur":case"afterblur":S=Fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Zm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=R4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=W4;break;case Uv:case zv:case Bv:S=b4;break;case $v:S=K4;break;case"scroll":S=P4;break;case"wheel":S=J4;break;case"copy":case"cut":case"paste":S=O4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=tg}var T=(e&4)!==0,k=!T&&t==="scroll",v=T?g!==null?g+"Capture":null:g;T=[];for(var E=h,C;E!==null;){C=E;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,v!==null&&(D=No(E,v),D!=null&&T.push(Vo(E,D,C)))),k)break;E=E.return}0<T.length&&(g=new S(g,P,null,n,f),m.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==jh&&(P=n.relatedTarget||n.fromElement)&&(Xr(P)||P[On]))break e;if((S||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,S?(P=n.relatedTarget||n.toElement,S=h,P=P?Xr(P):null,P!==null&&(k=_s(P),P!==k||P.tag!==5&&P.tag!==6)&&(P=null)):(S=null,P=h),S!==P)){if(T=Zm,D="onMouseLeave",v="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(T=tg,D="onPointerLeave",v="onPointerEnter",E="pointer"),k=S==null?g:Ls(S),C=P==null?g:Ls(P),g=new T(D,E+"leave",S,n,f),g.target=k,g.relatedTarget=C,D=null,Xr(f)===h&&(T=new T(v,E+"enter",P,n,f),T.target=C,T.relatedTarget=k,D=T),k=D,S&&P)t:{for(T=S,v=P,E=0,C=T;C;C=Ns(C))E++;for(C=0,D=v;D;D=Ns(D))C++;for(;0<E-C;)T=Ns(T),E--;for(;0<C-E;)v=Ns(v),C--;for(;E--;){if(T===v||v!==null&&T===v.alternate)break t;T=Ns(T),v=Ns(v)}T=null}else T=null;S!==null&&dg(m,g,S,T,!1),P!==null&&k!==null&&dg(m,k,P,T,!0)}}e:{if(g=h?Ls(h):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var F=rT;else if(sg(g))if(Vv)F=aT;else{F=iT;var U=sT}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=oT);if(F&&(F=F(t,h))){bv(m,F,n,f);break e}U&&U(t,g,h),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Ch(g,"number",g.value)}switch(U=h?Ls(h):window,t){case"focusin":(sg(U)||U.contentEditable==="true")&&(Os=U,Fh=h,po=null);break;case"focusout":po=Fh=Os=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,cg(m,n,f);break;case"selectionchange":if(uT)break;case"keydown":case"keyup":cg(m,n,f)}var x;if(lf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vs?jv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Rv&&n.locale!=="ko"&&(Vs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Vs&&(x=kv()):(cr=f,sf="value"in cr?cr.value:cr.textContent,Vs=!0)),U=Rl(h,y),0<U.length&&(y=new eg(y,t,null,n,f),m.push({event:y,listeners:U}),x?y.data=x:(x=Dv(n),x!==null&&(y.data=x)))),(x=X4?Z4(t,n):eT(t,n))&&(h=Rl(h,"onBeforeInput"),0<h.length&&(f=new eg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=x))}qv(m,e)})}function Vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=No(t,n),i!=null&&r.unshift(Vo(t,i,s)),i=No(t,e),i!=null&&r.push(Vo(t,i,s))),t=t.return}return r}function Ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=No(n,i),u!=null&&o.unshift(Vo(n,u,l))):s||(u=No(n,i),u!=null&&o.push(Vo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pT=/\r\n?/g,mT=/\u0000|\uFFFD/g;function fg(t){return(typeof t=="string"?t:""+t).replace(pT,`
`).replace(mT,"")}function $a(t,e,n){if(e=fg(e),fg(t)!==e&&n)throw Error(z(425))}function jl(){}var zh=null,Bh=null;function $h(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hh=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,pg=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof pg<"u"?function(t){return pg.resolve(null).then(t).catch(vT)}:Hh;function vT(t){setTimeout(function(){throw t})}function Gu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ro(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ro(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wi=Math.random().toString(36).slice(2),yn="__reactFiber$"+wi,Oo="__reactProps$"+wi,On="__reactContainer$"+wi,qh="__reactEvents$"+wi,_T="__reactListeners$"+wi,wT="__reactHandles$"+wi;function Xr(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mg(t);t!==null;){if(n=t[yn])return n;t=mg(t)}return e}t=n,n=t.parentNode}return null}function ia(t){return t=t[yn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ls(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ic(t){return t[Oo]||null}var Wh=[],Fs=-1;function Fr(t){return{current:t}}function Ce(t){0>Fs||(t.current=Wh[Fs],Wh[Fs]=null,Fs--)}function Se(t,e){Fs++,Wh[Fs]=t.current,t.current=e}var Nr={},dt=Fr(Nr),Nt=Fr(!1),as=Nr;function ri(t,e){var n=t.type.contextTypes;if(!n)return Nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function Dl(){Ce(Nt),Ce(dt)}function gg(t,e,n){if(dt.current!==Nr)throw Error(z(168));Se(dt,e),Se(Nt,n)}function Gv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,s4(t)||"Unknown",s));return je({},n,r)}function bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,as=dt.current,Se(dt,t),Se(Nt,Nt.current),!0}function yg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Gv(t,e,as),r.__reactInternalMemoizedMergedChildContext=t,Ce(Nt),Ce(dt),Se(dt,t)):Ce(Nt),Se(Nt,n)}var Cn=null,Sc=!1,Ku=!1;function Kv(t){Cn===null?Cn=[t]:Cn.push(t)}function ET(t){Sc=!0,Kv(t)}function Ur(){if(!Ku&&Cn!==null){Ku=!0;var t=0,e=ve;try{var n=Cn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,Sc=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(t+1)),_v(ef,Ur),s}finally{ve=e,Ku=!1}}return null}var Us=[],zs=0,Vl=null,Ol=0,zt=[],Bt=0,ls=null,Pn=1,kn="";function Qr(t,e){Us[zs++]=Ol,Us[zs++]=Vl,Vl=t,Ol=e}function Qv(t,e,n){zt[Bt++]=Pn,zt[Bt++]=kn,zt[Bt++]=ls,ls=t;var r=Pn;t=kn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-rn(e)+s|n<<s|r,kn=i+t}else Pn=1<<i|n<<s|r,kn=t}function uf(t){t.return!==null&&(Qr(t,1),Qv(t,1,0))}function hf(t){for(;t===Vl;)Vl=Us[--zs],Us[zs]=null,Ol=Us[--zs],Us[zs]=null;for(;t===ls;)ls=zt[--Bt],zt[Bt]=null,kn=zt[--Bt],zt[Bt]=null,Pn=zt[--Bt],zt[Bt]=null}var Mt=null,Vt=null,Pe=!1,en=null;function Jv(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Vt=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ls!==null?{id:Pn,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Vt=null,!0):!1;default:return!1}}function Gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kh(t){if(Pe){var e=Vt;if(e){var n=e;if(!vg(t,e)){if(Gh(t))throw Error(z(418));e=mr(n.nextSibling);var r=Mt;e&&vg(t,e)?Jv(r,n):(t.flags=t.flags&-4097|2,Pe=!1,Mt=t)}}else{if(Gh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Pe=!1,Mt=t}}}function _g(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Ha(t){if(t!==Mt)return!1;if(!Pe)return _g(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$h(t.type,t.memoizedProps)),e&&(e=Vt)){if(Gh(t))throw Yv(),Error(z(418));for(;e;)Jv(t,e),e=mr(e.nextSibling)}if(_g(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Mt?mr(t.stateNode.nextSibling):null;return!0}function Yv(){for(var t=Vt;t;)t=mr(t.nextSibling)}function si(){Vt=Mt=null,Pe=!1}function df(t){en===null?en=[t]:en.push(t)}var TT=Hn.ReactCurrentBatchConfig;function Yi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function qa(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wg(t){var e=t._init;return e(t._payload)}function Xv(t){function e(v,E){if(t){var C=v.deletions;C===null?(v.deletions=[E],v.flags|=16):C.push(E)}}function n(v,E){if(!t)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function r(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function s(v,E){return v=_r(v,E),v.index=0,v.sibling=null,v}function i(v,E,C){return v.index=C,t?(C=v.alternate,C!==null?(C=C.index,C<E?(v.flags|=2,E):C):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,E,C,D){return E===null||E.tag!==6?(E=th(C,v.mode,D),E.return=v,E):(E=s(E,C),E.return=v,E)}function u(v,E,C,D){var F=C.type;return F===bs?f(v,E,C.props.children,D,C.key):E!==null&&(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===tr&&wg(F)===E.type)?(D=s(E,C.props),D.ref=Yi(v,E,C),D.return=v,D):(D=fl(C.type,C.key,C.props,null,v.mode,D),D.ref=Yi(v,E,C),D.return=v,D)}function h(v,E,C,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==C.containerInfo||E.stateNode.implementation!==C.implementation?(E=nh(C,v.mode,D),E.return=v,E):(E=s(E,C.children||[]),E.return=v,E)}function f(v,E,C,D,F){return E===null||E.tag!==7?(E=ss(C,v.mode,D,F),E.return=v,E):(E=s(E,C),E.return=v,E)}function m(v,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return E=th(""+E,v.mode,C),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ba:return C=fl(E.type,E.key,E.props,null,v.mode,C),C.ref=Yi(v,null,E),C.return=v,C;case Ds:return E=nh(E,v.mode,C),E.return=v,E;case tr:var D=E._init;return m(v,D(E._payload),C)}if(no(E)||Wi(E))return E=ss(E,v.mode,C,null),E.return=v,E;qa(v,E)}return null}function g(v,E,C,D){var F=E!==null?E.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:l(v,E,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ba:return C.key===F?u(v,E,C,D):null;case Ds:return C.key===F?h(v,E,C,D):null;case tr:return F=C._init,g(v,E,F(C._payload),D)}if(no(C)||Wi(C))return F!==null?null:f(v,E,C,D,null);qa(v,C)}return null}function S(v,E,C,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return v=v.get(C)||null,l(E,v,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ba:return v=v.get(D.key===null?C:D.key)||null,u(E,v,D,F);case Ds:return v=v.get(D.key===null?C:D.key)||null,h(E,v,D,F);case tr:var U=D._init;return S(v,E,C,U(D._payload),F)}if(no(D)||Wi(D))return v=v.get(C)||null,f(E,v,D,F,null);qa(E,D)}return null}function P(v,E,C,D){for(var F=null,U=null,x=E,y=E=0,N=null;x!==null&&y<C.length;y++){x.index>y?(N=x,x=null):N=x.sibling;var w=g(v,x,C[y],D);if(w===null){x===null&&(x=N);break}t&&x&&w.alternate===null&&e(v,x),E=i(w,E,y),U===null?F=w:U.sibling=w,U=w,x=N}if(y===C.length)return n(v,x),Pe&&Qr(v,y),F;if(x===null){for(;y<C.length;y++)x=m(v,C[y],D),x!==null&&(E=i(x,E,y),U===null?F=x:U.sibling=x,U=x);return Pe&&Qr(v,y),F}for(x=r(v,x);y<C.length;y++)N=S(x,v,y,C[y],D),N!==null&&(t&&N.alternate!==null&&x.delete(N.key===null?y:N.key),E=i(N,E,y),U===null?F=N:U.sibling=N,U=N);return t&&x.forEach(function(A){return e(v,A)}),Pe&&Qr(v,y),F}function T(v,E,C,D){var F=Wi(C);if(typeof F!="function")throw Error(z(150));if(C=F.call(C),C==null)throw Error(z(151));for(var U=F=null,x=E,y=E=0,N=null,w=C.next();x!==null&&!w.done;y++,w=C.next()){x.index>y?(N=x,x=null):N=x.sibling;var A=g(v,x,w.value,D);if(A===null){x===null&&(x=N);break}t&&x&&A.alternate===null&&e(v,x),E=i(A,E,y),U===null?F=A:U.sibling=A,U=A,x=N}if(w.done)return n(v,x),Pe&&Qr(v,y),F;if(x===null){for(;!w.done;y++,w=C.next())w=m(v,w.value,D),w!==null&&(E=i(w,E,y),U===null?F=w:U.sibling=w,U=w);return Pe&&Qr(v,y),F}for(x=r(v,x);!w.done;y++,w=C.next())w=S(x,v,y,w.value,D),w!==null&&(t&&w.alternate!==null&&x.delete(w.key===null?y:w.key),E=i(w,E,y),U===null?F=w:U.sibling=w,U=w);return t&&x.forEach(function(R){return e(v,R)}),Pe&&Qr(v,y),F}function k(v,E,C,D){if(typeof C=="object"&&C!==null&&C.type===bs&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ba:e:{for(var F=C.key,U=E;U!==null;){if(U.key===F){if(F=C.type,F===bs){if(U.tag===7){n(v,U.sibling),E=s(U,C.props.children),E.return=v,v=E;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===tr&&wg(F)===U.type){n(v,U.sibling),E=s(U,C.props),E.ref=Yi(v,U,C),E.return=v,v=E;break e}n(v,U);break}else e(v,U);U=U.sibling}C.type===bs?(E=ss(C.props.children,v.mode,D,C.key),E.return=v,v=E):(D=fl(C.type,C.key,C.props,null,v.mode,D),D.ref=Yi(v,E,C),D.return=v,v=D)}return o(v);case Ds:e:{for(U=C.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===C.containerInfo&&E.stateNode.implementation===C.implementation){n(v,E.sibling),E=s(E,C.children||[]),E.return=v,v=E;break e}else{n(v,E);break}else e(v,E);E=E.sibling}E=nh(C,v.mode,D),E.return=v,v=E}return o(v);case tr:return U=C._init,k(v,E,U(C._payload),D)}if(no(C))return P(v,E,C,D);if(Wi(C))return T(v,E,C,D);qa(v,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,E!==null&&E.tag===6?(n(v,E.sibling),E=s(E,C),E.return=v,v=E):(n(v,E),E=th(C,v.mode,D),E.return=v,v=E),o(v)):n(v,E)}return k}var ii=Xv(!0),Zv=Xv(!1),Ml=Fr(null),Ll=null,Bs=null,ff=null;function pf(){ff=Bs=Ll=null}function mf(t){var e=Ml.current;Ce(Ml),t._currentValue=e}function Qh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){Ll=t,ff=Bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(ff!==t)if(t={context:t,memoizedValue:e,next:null},Bs===null){if(Ll===null)throw Error(z(308));Bs=t,Ll.dependencies={lanes:0,firstContext:t}}else Bs=Bs.next=t;return e}var Zr=null;function gf(t){Zr===null?Zr=[t]:Zr.push(t)}function e0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mn(t,r)}function Mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function yf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mn(t,n)}return s=r.interleaved,s===null?(e.next=e,gf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mn(t,n)}function al(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tf(t,n)}}function Eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fl(t,e,n,r){var s=t.updateQueue;nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=h=u=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,T=l;switch(g=e,S=n,T.tag){case 1:if(P=T.payload,typeof P=="function"){m=P.call(S,m,g);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=T.payload,g=typeof P=="function"?P.call(S,m,g):P,g==null)break e;m=je({},m,g);break e;case 2:nr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=S,u=m):f=f.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);us|=o,t.lanes=o,t.memoizedState=m}}function Tg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var oa={},_n=Fr(oa),Mo=Fr(oa),Lo=Fr(oa);function es(t){if(t===oa)throw Error(z(174));return t}function vf(t,e){switch(Se(Lo,e),Se(Mo,t),Se(_n,oa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ph(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ph(e,t)}Ce(_n),Se(_n,e)}function oi(){Ce(_n),Ce(Mo),Ce(Lo)}function n0(t){es(Lo.current);var e=es(_n.current),n=Ph(e,t.type);e!==n&&(Se(Mo,t),Se(_n,n))}function _f(t){Mo.current===t&&(Ce(_n),Ce(Mo))}var ke=Fr(0);function Ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qu=[];function wf(){for(var t=0;t<Qu.length;t++)Qu[t]._workInProgressVersionPrimary=null;Qu.length=0}var ll=Hn.ReactCurrentDispatcher,Ju=Hn.ReactCurrentBatchConfig,cs=0,Re=null,qe=null,Ye=null,zl=!1,mo=!1,Fo=0,IT=0;function ot(){throw Error(z(321))}function Ef(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function Tf(t,e,n,r,s,i){if(cs=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ll.current=t===null||t.memoizedState===null?CT:NT,t=n(r,s),mo){i=0;do{if(mo=!1,Fo=0,25<=i)throw Error(z(301));i+=1,Ye=qe=null,e.updateQueue=null,ll.current=PT,t=n(r,s)}while(mo)}if(ll.current=Bl,e=qe!==null&&qe.next!==null,cs=0,Ye=qe=Re=null,zl=!1,e)throw Error(z(300));return t}function If(){var t=Fo!==0;return Fo=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Re.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function Jt(){if(qe===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ye===null?Re.memoizedState:Ye.next;if(e!==null)Ye=e,qe=t;else{if(t===null)throw Error(z(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ye===null?Re.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Uo(t,e){return typeof e=="function"?e(t):e}function Yu(t){var e=Jt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var f=h.lane;if((cs&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Re.lanes|=f,us|=f}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,ln(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xu(t){var e=Jt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ln(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function r0(){}function s0(t,e){var n=Re,r=Jt(),s=e(),i=!ln(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,Sf(a0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,zo(9,o0.bind(null,n,r,s,e),void 0,null),Xe===null)throw Error(z(349));cs&30||i0(n,e,s)}return s}function i0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o0(t,e,n,r){e.value=n,e.getSnapshot=r,l0(e)&&c0(t)}function a0(t,e,n){return n(function(){l0(e)&&c0(t)})}function l0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function c0(t){var e=Mn(t,1);e!==null&&sn(e,t,1,-1)}function Ig(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:t},e.queue=t,t=t.dispatch=AT.bind(null,Re,t),[e.memoizedState,t]}function zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function u0(){return Jt().memoizedState}function cl(t,e,n,r){var s=mn();Re.flags|=t,s.memoizedState=zo(1|e,n,void 0,r===void 0?null:r)}function xc(t,e,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Ef(r,o.deps)){s.memoizedState=zo(e,n,i,r);return}}Re.flags|=t,s.memoizedState=zo(1|e,n,i,r)}function Sg(t,e){return cl(8390656,8,t,e)}function Sf(t,e){return xc(2048,8,t,e)}function h0(t,e){return xc(4,2,t,e)}function d0(t,e){return xc(4,4,t,e)}function f0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p0(t,e,n){return n=n!=null?n.concat([t]):null,xc(4,4,f0.bind(null,e,t),n)}function xf(){}function m0(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ef(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function g0(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ef(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function y0(t,e,n){return cs&21?(ln(n,e)||(n=Tv(),Re.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function ST(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Ju.transition;Ju.transition={};try{t(!1),e()}finally{ve=n,Ju.transition=r}}function v0(){return Jt().memoizedState}function xT(t,e,n){var r=vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_0(t))w0(e,n);else if(n=e0(t,e,n,r),n!==null){var s=wt();sn(n,t,r,s),E0(n,e,r)}}function AT(t,e,n){var r=vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_0(t))w0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,ln(l,o)){var u=e.interleaved;u===null?(s.next=s,gf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=e0(t,e,s,r),n!==null&&(s=wt(),sn(n,t,r,s),E0(n,e,r))}}function _0(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function w0(t,e){mo=zl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function E0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tf(t,n)}}var Bl={readContext:Qt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},CT={readContext:Qt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:Sg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cl(4194308,4,f0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return cl(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xT.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Ig,useDebugValue:xf,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Ig(!1),e=t[0];return t=ST.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=mn();if(Pe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Xe===null)throw Error(z(349));cs&30||i0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Sg(a0.bind(null,r,i,t),[t]),r.flags|=2048,zo(9,o0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=Xe.identifierPrefix;if(Pe){var n=kn,r=Pn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NT={readContext:Qt,useCallback:m0,useContext:Qt,useEffect:Sf,useImperativeHandle:p0,useInsertionEffect:h0,useLayoutEffect:d0,useMemo:g0,useReducer:Yu,useRef:u0,useState:function(){return Yu(Uo)},useDebugValue:xf,useDeferredValue:function(t){var e=Jt();return y0(e,qe.memoizedState,t)},useTransition:function(){var t=Yu(Uo)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:r0,useSyncExternalStore:s0,useId:v0,unstable_isNewReconciler:!1},PT={readContext:Qt,useCallback:m0,useContext:Qt,useEffect:Sf,useImperativeHandle:p0,useInsertionEffect:h0,useLayoutEffect:d0,useMemo:g0,useReducer:Xu,useRef:u0,useState:function(){return Xu(Uo)},useDebugValue:xf,useDeferredValue:function(t){var e=Jt();return qe===null?e.memoizedState=t:y0(e,qe.memoizedState,t)},useTransition:function(){var t=Xu(Uo)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:r0,useSyncExternalStore:s0,useId:v0,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ac={isMounted:function(t){return(t=t._reactInternals)?_s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=vr(t),i=Dn(r,s);i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,s),e!==null&&(sn(e,t,s,r),al(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=vr(t),i=Dn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,s),e!==null&&(sn(e,t,s,r),al(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=vr(t),s=Dn(n,r);s.tag=2,e!=null&&(s.callback=e),e=gr(t,s,r),e!==null&&(sn(e,t,r,n),al(e,t,r))}};function xg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Do(n,r)||!Do(s,i):!0}function T0(t,e,n){var r=!1,s=Nr,i=e.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=Pt(e)?as:dt.current,r=e.contextTypes,i=(r=r!=null)?ri(t,s):Nr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ac,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ag(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ac.enqueueReplaceState(e,e.state,null)}function Yh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},yf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=Pt(e)?as:dt.current,s.context=ri(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Jh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ac.enqueueReplaceState(s,s.state,null),Fl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ai(t,e){try{var n="",r=e;do n+=r4(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kT=typeof WeakMap=="function"?WeakMap:Map;function I0(t,e,n){n=Dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,ld=r),Xh(t,e)},n}function S0(t,e,n){n=Dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xh(t,e),typeof r!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Cg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=HT.bind(null,t,e,n),e.then(t,t))}function Ng(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dn(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var RT=Hn.ReactCurrentOwner,Ct=!1;function vt(t,e,n,r){e.child=t===null?Zv(e,null,n,r):ii(e,t.child,n,r)}function kg(t,e,n,r,s){n=n.render;var i=e.ref;return Qs(e,s),r=Tf(t,e,n,r,i,s),n=If(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ln(t,e,s)):(Pe&&n&&uf(e),e.flags|=1,vt(t,e,r,s),e.child)}function Rg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Df(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,x0(t,e,i,r,s)):(t=fl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Do,n(o,r)&&t.ref===e.ref)return Ln(t,e,s)}return e.flags|=1,t=_r(i,r),t.ref=e.ref,t.return=e,e.child=t}function x0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Do(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Ln(t,e,s)}return Zh(t,e,n,r,s)}function A0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Hs,Dt),Dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Hs,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(Hs,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Se(Hs,Dt),Dt|=r;return vt(t,e,s,n),e.child}function C0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zh(t,e,n,r,s){var i=Pt(n)?as:dt.current;return i=ri(e,i),Qs(e,s),n=Tf(t,e,n,r,i,s),r=If(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ln(t,e,s)):(Pe&&r&&uf(e),e.flags|=1,vt(t,e,n,s),e.child)}function jg(t,e,n,r,s){if(Pt(n)){var i=!0;bl(e)}else i=!1;if(Qs(e,s),e.stateNode===null)ul(t,e),T0(e,n,r),Yh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Qt(h):(h=Pt(n)?as:dt.current,h=ri(e,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Ag(e,o,r,h),nr=!1;var g=e.memoizedState;o.state=g,Fl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Nt.current||nr?(typeof f=="function"&&(Jh(e,n,f,r),u=e.memoizedState),(l=nr||xg(e,n,l,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,t0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Xt(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qt(u):(u=Pt(n)?as:dt.current,u=ri(e,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Ag(e,o,r,u),nr=!1,g=e.memoizedState,o.state=g,Fl(e,r,o,s);var P=e.memoizedState;l!==m||g!==P||Nt.current||nr?(typeof S=="function"&&(Jh(e,n,S,r),P=e.memoizedState),(h=nr||xg(e,n,h,r,g,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ed(t,e,n,r,i,s)}function ed(t,e,n,r,s,i){C0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&yg(e,n,!1),Ln(t,e,i);r=e.stateNode,RT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ii(e,t.child,null,i),e.child=ii(e,null,l,i)):vt(t,e,l,i),e.memoizedState=r.state,s&&yg(e,n,!0),e.child}function N0(t){var e=t.stateNode;e.pendingContext?gg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gg(t,e.context,!1),vf(t,e.containerInfo)}function Dg(t,e,n,r,s){return si(),df(s),e.flags|=256,vt(t,e,n,r),e.child}var td={dehydrated:null,treeContext:null,retryLane:0};function nd(t){return{baseLanes:t,cachePool:null,transitions:null}}function P0(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Se(ke,s&1),t===null)return Kh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Pc(o,r,0,null),t=ss(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=nd(n),e.memoizedState=td,t):Af(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return jT(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=_r(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=_r(l,i):(i=ss(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?nd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=td,r}return i=t.child,t=i.sibling,r=_r(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Af(t,e){return e=Pc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wa(t,e,n,r){return r!==null&&df(r),ii(e,t.child,null,n),t=Af(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zu(Error(z(422))),Wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Pc({mode:"visible",children:r.children},s,0,null),i=ss(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ii(e,t.child,null,o),e.child.memoizedState=nd(o),e.memoizedState=td,i);if(!(e.mode&1))return Wa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Zu(i,r,void 0),Wa(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ct||l){if(r=Xe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mn(t,s),sn(r,t,s,-1))}return jf(),r=Zu(Error(z(421))),Wa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=qT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=mr(s.nextSibling),Mt=e,Pe=!0,en=null,t!==null&&(zt[Bt++]=Pn,zt[Bt++]=kn,zt[Bt++]=ls,Pn=t.id,kn=t.overflow,ls=e),e=Af(e,r.children),e.flags|=4096,e)}function bg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qh(t.return,e,n)}function eh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function k0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bg(t,n,e);else if(t.tag===19)bg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ul(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),eh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ul(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}eh(e,!0,n,null,i);break;case"together":eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ul(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=_r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DT(t,e,n){switch(e.tag){case 3:N0(e),si();break;case 5:n0(e);break;case 1:Pt(e.type)&&bl(e);break;case 4:vf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Se(Ml,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?P0(t,e,n):(Se(ke,ke.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);Se(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return k0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,A0(t,e,n)}return Ln(t,e,n)}var R0,rd,j0,D0;R0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rd=function(){};j0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,es(_n.current);var i=null;switch(n){case"input":s=xh(t,s),r=xh(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=Nh(t,s),r=Nh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jl)}kh(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ao.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ao.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ae("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};D0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xi(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bT(t,e,n){var r=e.pendingProps;switch(hf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return Pt(e.type)&&Dl(),at(e),null;case 3:return r=e.stateNode,oi(),Ce(Nt),Ce(dt),wf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(hd(en),en=null))),rd(t,e),at(e),null;case 5:_f(e);var s=es(Lo.current);if(n=e.type,t!==null&&e.stateNode!=null)j0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return at(e),null}if(t=es(_n.current),Ha(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yn]=e,r[Oo]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<so.length;s++)Ae(so[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":$m(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":qm(r,i),Ae("invalid",r)}kh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&$a(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&$a(r.textContent,l,t),s=["children",""+l]):Ao.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Va(r),Hm(r,i,!0);break;case"textarea":Va(r),Wm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=av(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yn]=e,t[Oo]=r,R0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rh(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<so.length;s++)Ae(so[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":$m(t,r),s=xh(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":qm(t,r),s=Nh(t,r),Ae("invalid",t);break;default:s=r}kh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?uv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&lv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Co(t,u):typeof u=="number"&&Co(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ao.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ae("scroll",t):u!=null&&Qd(t,i,u,o))}switch(n){case"input":Va(t),Hm(t,r,!1);break;case"textarea":Va(t),Wm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?qs(t,!!r.multiple,i,!1):r.defaultValue!=null&&qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)D0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=es(Lo.current),es(_n.current),Ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[yn]=e,(i=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:$a(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$a(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=e,e.stateNode=r}return at(e),null;case 13:if(Ce(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Vt!==null&&e.mode&1&&!(e.flags&128))Yv(),si(),e.flags|=98560,i=!1;else if(i=Ha(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[yn]=e}else si(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else en!==null&&(hd(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?We===0&&(We=3):jf())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return oi(),rd(t,e),t===null&&bo(e.stateNode.containerInfo),at(e),null;case 10:return mf(e.type._context),at(e),null;case 17:return Pt(e.type)&&Dl(),at(e),null;case 19:if(Ce(ke),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xi(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ul(t),o!==null){for(e.flags|=128,Xi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>li&&(e.flags|=128,r=!0,Xi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ul(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return at(e),null}else 2*Fe()-i.renderingStartTime>li&&n!==1073741824&&(e.flags|=128,r=!0,Xi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=ke.current,Se(ke,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return Rf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function VT(t,e){switch(hf(e),e.tag){case 1:return Pt(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oi(),Ce(Nt),Ce(dt),wf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _f(e),null;case 13:if(Ce(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));si()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(ke),null;case 4:return oi(),null;case 10:return mf(e.type._context),null;case 22:case 23:return Rf(),null;case 24:return null;default:return null}}var Ga=!1,ut=!1,OT=typeof WeakSet=="function"?WeakSet:Set,G=null;function $s(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function sd(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Vg=!1;function MT(t,e){if(zh=Pl,t=Lv(),cf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,m=t,g=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)g=m,m=S;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++f===r&&(u=o),(S=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bh={focusedElem:t,selectionRange:n},Pl=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var T=P.memoizedProps,k=P.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?T:Xt(e.type,T),k);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){Ve(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return P=Vg,Vg=!1,P}function go(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&sd(e,n,i)}s=s.next}while(s!==r)}}function Cc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function id(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b0(t){var e=t.alternate;e!==null&&(t.alternate=null,b0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[Oo],delete e[qh],delete e[_T],delete e[wT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function V0(t){return t.tag===5||t.tag===3||t.tag===4}function Og(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function od(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jl));else if(r!==4&&(t=t.child,t!==null))for(od(t,e,n),t=t.sibling;t!==null;)od(t,e,n),t=t.sibling}function ad(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ad(t,e,n),t=t.sibling;t!==null;)ad(t,e,n),t=t.sibling}var Ze=null,Zt=!1;function Zn(t,e,n){for(n=n.child;n!==null;)O0(t,e,n),n=n.sibling}function O0(t,e,n){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(_c,n)}catch{}switch(n.tag){case 5:ut||$s(n,e);case 6:var r=Ze,s=Zt;Ze=null,Zn(t,e,n),Ze=r,Zt=s,Ze!==null&&(Zt?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(Zt?(t=Ze,n=n.stateNode,t.nodeType===8?Gu(t.parentNode,n):t.nodeType===1&&Gu(t,n),Ro(t)):Gu(Ze,n.stateNode));break;case 4:r=Ze,s=Zt,Ze=n.stateNode.containerInfo,Zt=!0,Zn(t,e,n),Ze=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sd(n,e,o),s=s.next}while(s!==r)}Zn(t,e,n);break;case 1:if(!ut&&($s(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ve(n,e,l)}Zn(t,e,n);break;case 21:Zn(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,Zn(t,e,n),ut=r):Zn(t,e,n);break;default:Zn(t,e,n)}}function Mg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OT),e.forEach(function(r){var s=WT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,Zt=!1;break e;case 3:Ze=l.stateNode.containerInfo,Zt=!0;break e;case 4:Ze=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(Ze===null)throw Error(z(160));O0(i,o,s),Ze=null,Zt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ve(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)M0(e,t),e=e.sibling}function M0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),fn(t),r&4){try{go(3,t,t.return),Cc(3,t)}catch(T){Ve(t,t.return,T)}try{go(5,t,t.return)}catch(T){Ve(t,t.return,T)}}break;case 1:Yt(e,t),fn(t),r&512&&n!==null&&$s(n,n.return);break;case 5:if(Yt(e,t),fn(t),r&512&&n!==null&&$s(n,n.return),t.flags&32){var s=t.stateNode;try{Co(s,"")}catch(T){Ve(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&iv(s,i),Rh(l,o);var h=Rh(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?uv(s,m):f==="dangerouslySetInnerHTML"?lv(s,m):f==="children"?Co(s,m):Qd(s,f,m,h)}switch(l){case"input":Ah(s,i);break;case"textarea":ov(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?qs(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?qs(s,!!i.multiple,i.defaultValue,!0):qs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oo]=i}catch(T){Ve(t,t.return,T)}}break;case 6:if(Yt(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Ve(t,t.return,T)}}break;case 3:if(Yt(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ro(e.containerInfo)}catch(T){Ve(t,t.return,T)}break;case 4:Yt(e,t),fn(t);break;case 13:Yt(e,t),fn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pf=Fe())),r&4&&Mg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(h=ut)||f,Yt(e,t),ut=h):Yt(e,t),fn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(m=G=f;G!==null;){switch(g=G,S=g.child,g.tag){case 0:case 11:case 14:case 15:go(4,g,g.return);break;case 1:$s(g,g.return);var P=g.stateNode;if(typeof P.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(T){Ve(r,n,T)}}break;case 5:$s(g,g.return);break;case 22:if(g.memoizedState!==null){Fg(m);continue}}S!==null?(S.return=g,G=S):Fg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=cv("display",o))}catch(T){Ve(t,t.return,T)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(T){Ve(t,t.return,T)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Yt(e,t),fn(t),r&4&&Mg(t);break;case 21:break;default:Yt(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(V0(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Co(s,""),r.flags&=-33);var i=Og(t);ad(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Og(t);od(t,l,o);break;default:throw Error(z(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LT(t,e,n){G=t,L0(t)}function L0(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ga;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ut;l=Ga;var h=ut;if(Ga=o,(ut=u)&&!h)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?Ug(s):u!==null?(u.return=o,G=u):Ug(s);for(;i!==null;)G=i,L0(i),i=i.sibling;G=s,Ga=l,ut=h}Lg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Lg(t)}}function Lg(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Cc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Tg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Tg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ro(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||e.flags&512&&id(e)}catch(g){Ve(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Fg(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Ug(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cc(4,e)}catch(u){Ve(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ve(e,s,u)}}var i=e.return;try{id(e)}catch(u){Ve(e,i,u)}break;case 5:var o=e.return;try{id(e)}catch(u){Ve(e,o,u)}}}catch(u){Ve(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var FT=Math.ceil,$l=Hn.ReactCurrentDispatcher,Cf=Hn.ReactCurrentOwner,Wt=Hn.ReactCurrentBatchConfig,pe=0,Xe=null,ze=null,nt=0,Dt=0,Hs=Fr(0),We=0,Bo=null,us=0,Nc=0,Nf=0,yo=null,xt=null,Pf=0,li=1/0,An=null,Hl=!1,ld=null,yr=null,Ka=!1,ur=null,ql=0,vo=0,cd=null,hl=-1,dl=0;function wt(){return pe&6?Fe():hl!==-1?hl:hl=Fe()}function vr(t){return t.mode&1?pe&2&&nt!==0?nt&-nt:TT.transition!==null?(dl===0&&(dl=Tv()),dl):(t=ve,t!==0||(t=window.event,t=t===void 0?16:Pv(t.type)),t):1}function sn(t,e,n,r){if(50<vo)throw vo=0,cd=null,Error(z(185));ra(t,n,r),(!(pe&2)||t!==Xe)&&(t===Xe&&(!(pe&2)&&(Nc|=n),We===4&&sr(t,nt)),kt(t,r),n===1&&pe===0&&!(e.mode&1)&&(li=Fe()+500,Sc&&Ur()))}function kt(t,e){var n=t.callbackNode;T4(t,e);var r=Nl(t,t===Xe?nt:0);if(r===0)n!==null&&Qm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qm(n),e===1)t.tag===0?ET(zg.bind(null,t)):Kv(zg.bind(null,t)),yT(function(){!(pe&6)&&Ur()}),n=null;else{switch(Iv(r)){case 1:n=ef;break;case 4:n=wv;break;case 16:n=Cl;break;case 536870912:n=Ev;break;default:n=Cl}n=W0(n,F0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F0(t,e){if(hl=-1,dl=0,pe&6)throw Error(z(327));var n=t.callbackNode;if(Js()&&t.callbackNode!==n)return null;var r=Nl(t,t===Xe?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wl(t,r);else{e=r;var s=pe;pe|=2;var i=z0();(Xe!==t||nt!==e)&&(An=null,li=Fe()+500,rs(t,e));do try{BT();break}catch(l){U0(t,l)}while(!0);pf(),$l.current=i,pe=s,ze!==null?e=0:(Xe=null,nt=0,e=We)}if(e!==0){if(e===2&&(s=Oh(t),s!==0&&(r=s,e=ud(t,s))),e===1)throw n=Bo,rs(t,0),sr(t,r),kt(t,Fe()),n;if(e===6)sr(t,r);else{if(s=t.current.alternate,!(r&30)&&!UT(s)&&(e=Wl(t,r),e===2&&(i=Oh(t),i!==0&&(r=i,e=ud(t,i))),e===1))throw n=Bo,rs(t,0),sr(t,r),kt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Jr(t,xt,An);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=Pf+500-Fe(),10<e)){if(Nl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Hh(Jr.bind(null,t,xt,An),e);break}Jr(t,xt,An);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FT(r/1960))-r,10<r){t.timeoutHandle=Hh(Jr.bind(null,t,xt,An),r);break}Jr(t,xt,An);break;case 5:Jr(t,xt,An);break;default:throw Error(z(329))}}}return kt(t,Fe()),t.callbackNode===n?F0.bind(null,t):null}function ud(t,e){var n=yo;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=Wl(t,e),t!==2&&(e=xt,xt=n,e!==null&&hd(e)),t}function hd(t){xt===null?xt=t:xt.push.apply(xt,t)}function UT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~Nf,e&=~Nc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function zg(t){if(pe&6)throw Error(z(327));Js();var e=Nl(t,0);if(!(e&1))return kt(t,Fe()),null;var n=Wl(t,e);if(t.tag!==0&&n===2){var r=Oh(t);r!==0&&(e=r,n=ud(t,r))}if(n===1)throw n=Bo,rs(t,0),sr(t,e),kt(t,Fe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,xt,An),kt(t,Fe()),null}function kf(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(li=Fe()+500,Sc&&Ur())}}function hs(t){ur!==null&&ur.tag===0&&!(pe&6)&&Js();var e=pe;pe|=1;var n=Wt.transition,r=ve;try{if(Wt.transition=null,ve=1,t)return t()}finally{ve=r,Wt.transition=n,pe=e,!(pe&6)&&Ur()}}function Rf(){Dt=Hs.current,Ce(Hs)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gT(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(hf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:oi(),Ce(Nt),Ce(dt),wf();break;case 5:_f(r);break;case 4:oi();break;case 13:Ce(ke);break;case 19:Ce(ke);break;case 10:mf(r.type._context);break;case 22:case 23:Rf()}n=n.return}if(Xe=t,ze=t=_r(t.current,null),nt=Dt=e,We=0,Bo=null,Nf=Nc=us=0,xt=yo=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zr=null}return t}function U0(t,e){do{var n=ze;try{if(pf(),ll.current=Bl,zl){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zl=!1}if(cs=0,Ye=qe=Re=null,mo=!1,Fo=0,Cf.current=null,n===null||n.return===null){We=1,Bo=e,ze=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Ng(o);if(S!==null){S.flags&=-257,Pg(S,o,l,i,e),S.mode&1&&Cg(i,h,e),e=S,u=h;var P=e.updateQueue;if(P===null){var T=new Set;T.add(u),e.updateQueue=T}else P.add(u);break e}else{if(!(e&1)){Cg(i,h,e),jf();break e}u=Error(z(426))}}else if(Pe&&l.mode&1){var k=Ng(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Pg(k,o,l,i,e),df(ai(u,l));break e}}i=u=ai(u,l),We!==4&&(We=2),yo===null?yo=[i]:yo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=I0(i,u,e);Eg(i,v);break e;case 1:l=u;var E=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(yr===null||!yr.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=S0(i,l,e);Eg(i,D);break e}}i=i.return}while(i!==null)}$0(n)}catch(F){e=F,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function z0(){var t=$l.current;return $l.current=Bl,t===null?Bl:t}function jf(){(We===0||We===3||We===2)&&(We=4),Xe===null||!(us&268435455)&&!(Nc&268435455)||sr(Xe,nt)}function Wl(t,e){var n=pe;pe|=2;var r=z0();(Xe!==t||nt!==e)&&(An=null,rs(t,e));do try{zT();break}catch(s){U0(t,s)}while(!0);if(pf(),pe=n,$l.current=r,ze!==null)throw Error(z(261));return Xe=null,nt=0,We}function zT(){for(;ze!==null;)B0(ze)}function BT(){for(;ze!==null&&!f4();)B0(ze)}function B0(t){var e=q0(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?$0(t):ze=e,Cf.current=null}function $0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VT(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,ze=null;return}}else if(n=bT(n,e,Dt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);We===0&&(We=5)}function Jr(t,e,n){var r=ve,s=Wt.transition;try{Wt.transition=null,ve=1,$T(t,e,n,r)}finally{Wt.transition=s,ve=r}return null}function $T(t,e,n,r){do Js();while(ur!==null);if(pe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(I4(t,i),t===Xe&&(ze=Xe=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ka||(Ka=!0,W0(Cl,function(){return Js(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=ve;ve=1;var l=pe;pe|=4,Cf.current=null,MT(t,n),M0(n,t),cT(Bh),Pl=!!zh,Bh=zh=null,t.current=n,LT(n),p4(),pe=l,ve=o,Wt.transition=i}else t.current=n;if(Ka&&(Ka=!1,ur=t,ql=s),i=t.pendingLanes,i===0&&(yr=null),y4(n.stateNode),kt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,t=ld,ld=null,t;return ql&1&&t.tag!==0&&Js(),i=t.pendingLanes,i&1?t===cd?vo++:(vo=0,cd=t):vo=0,Ur(),null}function Js(){if(ur!==null){var t=Iv(ql),e=Wt.transition,n=ve;try{if(Wt.transition=null,ve=16>t?16:t,ur===null)var r=!1;else{if(t=ur,ur=null,ql=0,pe&6)throw Error(z(331));var s=pe;for(pe|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(G=h;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:go(8,f,i)}var m=f.child;if(m!==null)m.return=f,G=m;else for(;G!==null;){f=G;var g=f.sibling,S=f.return;if(b0(f),f===h){G=null;break}if(g!==null){g.return=S,G=g;break}G=S}}}var P=i.alternate;if(P!==null){var T=P.child;if(T!==null){P.child=null;do{var k=T.sibling;T.sibling=null,T=k}while(T!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:go(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,G=v;break e}G=i.return}}var E=t.current;for(G=E;G!==null;){o=G;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,G=C;else e:for(o=E;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cc(9,l)}}catch(F){Ve(l,l.return,F)}if(l===o){G=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,G=D;break e}G=l.return}}if(pe=s,Ur(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(_c,t)}catch{}r=!0}return r}finally{ve=n,Wt.transition=e}}return!1}function Bg(t,e,n){e=ai(n,e),e=I0(t,e,1),t=gr(t,e,1),e=wt(),t!==null&&(ra(t,1,e),kt(t,e))}function Ve(t,e,n){if(t.tag===3)Bg(t,t,n);else for(;e!==null;){if(e.tag===3){Bg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yr===null||!yr.has(r))){t=ai(n,t),t=S0(e,t,1),e=gr(e,t,1),t=wt(),e!==null&&(ra(e,1,t),kt(e,t));break}}e=e.return}}function HT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(nt&n)===n&&(We===4||We===3&&(nt&130023424)===nt&&500>Fe()-Pf?rs(t,0):Nf|=n),kt(t,e)}function H0(t,e){e===0&&(t.mode&1?(e=La,La<<=1,!(La&130023424)&&(La=4194304)):e=1);var n=wt();t=Mn(t,e),t!==null&&(ra(t,e,n),kt(t,n))}function qT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),H0(t,n)}function WT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),H0(t,n)}var q0;q0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,DT(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Pe&&e.flags&1048576&&Qv(e,Ol,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ul(t,e),t=e.pendingProps;var s=ri(e,dt.current);Qs(e,n),s=Tf(null,e,r,t,s,n);var i=If();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(i=!0,bl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yf(e),s.updater=Ac,e.stateNode=s,s._reactInternals=e,Yh(e,r,t,n),e=ed(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&uf(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ul(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=KT(r),t=Xt(r,t),s){case 0:e=Zh(null,e,r,t,n);break e;case 1:e=jg(null,e,r,t,n);break e;case 11:e=kg(null,e,r,t,n);break e;case 14:e=Rg(null,e,r,Xt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Zh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),jg(t,e,r,s,n);case 3:e:{if(N0(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,t0(t,e),Fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ai(Error(z(423)),e),e=Dg(t,e,r,n,s);break e}else if(r!==s){s=ai(Error(z(424)),e),e=Dg(t,e,r,n,s);break e}else for(Vt=mr(e.stateNode.containerInfo.firstChild),Mt=e,Pe=!0,en=null,n=Zv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(si(),r===s){e=Ln(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return n0(e),t===null&&Kh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,$h(r,s)?o=null:i!==null&&$h(r,i)&&(e.flags|=32),C0(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&Kh(e),null;case 13:return P0(t,e,n);case 4:return vf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ii(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),kg(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Se(Ml,r._currentValue),r._currentValue=o,i!==null)if(ln(i.value,o)){if(i.children===s.children&&!Nt.current){e=Ln(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Dn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Qh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Qh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qs(e,n),s=Qt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=Xt(r,e.pendingProps),s=Xt(r.type,s),Rg(t,e,r,s,n);case 15:return x0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),ul(t,e),e.tag=1,Pt(r)?(t=!0,bl(e)):t=!1,Qs(e,n),T0(e,r,s),Yh(e,r,s,n),ed(null,e,r,!0,t,n);case 19:return k0(t,e,n);case 22:return A0(t,e,n)}throw Error(z(156,e.tag))};function W0(t,e){return _v(t,e)}function GT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new GT(t,e,n,r)}function Df(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KT(t){if(typeof t=="function")return Df(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yd)return 11;if(t===Xd)return 14}return 2}function _r(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Df(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bs:return ss(n.children,s,i,e);case Jd:o=8,s|=8;break;case Eh:return t=qt(12,n,e,s|2),t.elementType=Eh,t.lanes=i,t;case Th:return t=qt(13,n,e,s),t.elementType=Th,t.lanes=i,t;case Ih:return t=qt(19,n,e,s),t.elementType=Ih,t.lanes=i,t;case nv:return Pc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ev:o=10;break e;case tv:o=9;break e;case Yd:o=11;break e;case Xd:o=14;break e;case tr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ss(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Pc(t,e,n,r){return t=qt(22,t,r,e),t.elementType=nv,t.lanes=n,t.stateNode={isHidden:!1},t}function th(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function nh(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ou(0),this.expirationTimes=Ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ou(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bf(t,e,n,r,s,i,o,l,u){return t=new QT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yf(i),t}function JT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ds,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function G0(t){if(!t)return Nr;t=t._reactInternals;e:{if(_s(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Pt(n))return Gv(t,n,e)}return e}function K0(t,e,n,r,s,i,o,l,u){return t=bf(n,r,!0,t,s,i,o,l,u),t.context=G0(null),n=t.current,r=wt(),s=vr(n),i=Dn(r,s),i.callback=e??null,gr(n,i,s),t.current.lanes=s,ra(t,s,r),kt(t,r),t}function kc(t,e,n,r){var s=e.current,i=wt(),o=vr(s);return n=G0(n),e.context===null?e.context=n:e.pendingContext=n,e=Dn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gr(s,e,o),t!==null&&(sn(t,s,o,i),al(t,s,o)),o}function Gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $g(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vf(t,e){$g(t,e),(t=t.alternate)&&$g(t,e)}function YT(){return null}var Q0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Of(t){this._internalRoot=t}Rc.prototype.render=Of.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));kc(t,e,null,null)};Rc.prototype.unmount=Of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){kc(null,t,null,null)}),e[On]=null}};function Rc(t){this._internalRoot=t}Rc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Av();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&Nv(t)}};function Mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hg(){}function XT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Gl(o);i.call(h)}}var o=K0(e,r,t,0,null,!1,!1,"",Hg);return t._reactRootContainer=o,t[On]=o.current,bo(t.nodeType===8?t.parentNode:t),hs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Gl(u);l.call(h)}}var u=bf(t,0,!1,null,null,!1,!1,"",Hg);return t._reactRootContainer=u,t[On]=u.current,bo(t.nodeType===8?t.parentNode:t),hs(function(){kc(e,u,n,r)}),u}function Dc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Gl(o);l.call(u)}}kc(e,o,t,s)}else o=XT(n,e,t,s,r);return Gl(o)}Sv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ro(e.pendingLanes);n!==0&&(tf(e,n|1),kt(e,Fe()),!(pe&6)&&(li=Fe()+500,Ur()))}break;case 13:hs(function(){var r=Mn(t,1);if(r!==null){var s=wt();sn(r,t,1,s)}}),Vf(t,1)}};nf=function(t){if(t.tag===13){var e=Mn(t,134217728);if(e!==null){var n=wt();sn(e,t,134217728,n)}Vf(t,134217728)}};xv=function(t){if(t.tag===13){var e=vr(t),n=Mn(t,e);if(n!==null){var r=wt();sn(n,t,e,r)}Vf(t,e)}};Av=function(){return ve};Cv=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Dh=function(t,e,n){switch(e){case"input":if(Ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ic(r);if(!s)throw Error(z(90));sv(r),Ah(r,s)}}}break;case"textarea":ov(t,n);break;case"select":e=n.value,e!=null&&qs(t,!!n.multiple,e,!1)}};fv=kf;pv=hs;var ZT={usingClientEntryPoint:!1,Events:[ia,Ls,Ic,hv,dv,kf]},Zi={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eI={bundleType:Zi.bundleType,version:Zi.version,rendererPackageName:Zi.rendererPackageName,rendererConfig:Zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yv(t),t===null?null:t.stateNode},findFiberByHostInstance:Zi.findFiberByHostInstance||YT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{_c=Qa.inject(eI),vn=Qa}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZT;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mf(e))throw Error(z(200));return JT(t,e,null,n)};Ft.createRoot=function(t,e){if(!Mf(t))throw Error(z(299));var n=!1,r="",s=Q0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bf(t,1,!1,null,null,n,!1,r,s),t[On]=e.current,bo(t.nodeType===8?t.parentNode:t),new Of(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=yv(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return hs(t)};Ft.hydrate=function(t,e,n){if(!jc(e))throw Error(z(200));return Dc(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!Mf(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Q0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=K0(e,null,t,1,n??null,s,!1,i,o),t[On]=e.current,bo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Rc(e)};Ft.render=function(t,e,n){if(!jc(e))throw Error(z(200));return Dc(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!jc(t))throw Error(z(40));return t._reactRootContainer?(hs(function(){Dc(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};Ft.unstable_batchedUpdates=kf;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Dc(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function J0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J0)}catch(t){console.error(t)}}J0(),J1.exports=Ft;var tI=J1.exports,qg=tI;_h.createRoot=qg.createRoot,_h.hydrateRoot=qg.hydrateRoot;const nI=()=>{};var Wg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},X0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(g=64)),r.push(n[f],n[m],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new sI;const g=i<<2|l>>4;if(r.push(g),h!==64){const S=l<<4&240|h>>2;if(r.push(S),m!==64){const P=h<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iI=function(t){const e=Y0(t);return X0.encodeByteArray(e,!0)},Kl=function(t){return iI(t).replace(/\./g,"")},Z0=function(t){try{return X0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=()=>oI().__FIREBASE_DEFAULTS__,lI=()=>{if(typeof process>"u"||typeof Wg>"u")return;const t=Wg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Z0(t[1]);return e&&JSON.parse(e)},bc=()=>{try{return nI()||aI()||lI()||cI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},e_=t=>{var e,n;return(n=(e=bc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},uI=t=>{const e=e_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},t_=()=>{var t;return(t=bc())==null?void 0:t.config},n_=t=>{var e;return(e=bc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function r_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Kl(JSON.stringify(n)),Kl(JSON.stringify(o)),""].join(".")}const _o={};function fI(){const t={prod:[],emulator:[]};for(const e of Object.keys(_o))_o[e]?t.emulator.push(e):t.prod.push(e);return t}function pI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gg=!1;function s_(t,e){if(typeof window>"u"||typeof document>"u"||!Ei(window.location.host)||_o[t]===e||_o[t]||Gg)return;_o[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=fI().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,S){g.setAttribute("width","24"),g.setAttribute("id",S),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Gg=!0,o()},g}function f(g,S){g.setAttribute("id",S),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=pI(r),S=n("text"),P=document.getElementById(S)||document.createElement("span"),T=n("learnmore"),k=document.getElementById(T)||document.createElement("a"),v=n("preprendIcon"),E=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;l(C),f(k,T);const D=h();u(E,v),C.append(E,P,k,D),document.body.appendChild(C)}i?(P.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function gI(){var e;const t=(e=bc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _I(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wI(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EI(){return!gI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TI(){try{return typeof indexedDB=="object"}catch{return!1}}function II(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="FirebaseError";class qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SI,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aa.prototype.create)}}class aa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xI(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new qn(s,l,r)}}function xI(t,e){return t.replace(AI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const AI=/\{\$([^}]+)}/g;function CI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ds(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Kg(i)&&Kg(o)){if(!ds(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Kg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function NI(t,e){const n=new PI(t,e);return n.subscribe.bind(n)}class PI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=rh),s.error===void 0&&(s.error=rh),s.complete===void 0&&(s.complete=rh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DI(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jI(t){return t===Yr?void 0:t}function DI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const VI={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},OI=ue.INFO,MI={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},LI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=MI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lf{constructor(e){this.name=e,this._logLevel=OI,this._logHandler=LI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const FI=(t,e)=>e.some(n=>t instanceof n);let Qg,Jg;function UI(){return Qg||(Qg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zI(){return Jg||(Jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i_=new WeakMap,dd=new WeakMap,o_=new WeakMap,sh=new WeakMap,Ff=new WeakMap;function BI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&i_.set(n,t)}).catch(()=>{}),Ff.set(e,t),e}function $I(t){if(dd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});dd.set(t,e)}let fd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||o_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HI(t){fd=t(fd)}function qI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ih(this),e,...n);return o_.set(r,e.sort?e.sort():[e]),wr(r)}:zI().includes(t)?function(...e){return t.apply(ih(this),e),wr(i_.get(this))}:function(...e){return wr(t.apply(ih(this),e))}}function WI(t){return typeof t=="function"?qI(t):(t instanceof IDBTransaction&&$I(t),FI(t,UI())?new Proxy(t,fd):t)}function wr(t){if(t instanceof IDBRequest)return BI(t);if(sh.has(t))return sh.get(t);const e=WI(t);return e!==t&&(sh.set(t,e),Ff.set(e,t)),e}const ih=t=>Ff.get(t);function GI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=wr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wr(o.result),u.oldVersion,u.newVersion,wr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const KI=["get","getKey","getAll","getAllKeys","count"],QI=["put","add","delete","clear"],oh=new Map;function Yg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oh.get(e))return oh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KI.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return oh.set(e,i),i}HI(t=>({...t,get:(e,n,r)=>Yg(e,n)||t.get(e,n,r),has:(e,n)=>!!Yg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pd="@firebase/app",Xg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new Lf("@firebase/app"),XI="@firebase/app-compat",ZI="@firebase/analytics-compat",eS="@firebase/analytics",tS="@firebase/app-check-compat",nS="@firebase/app-check",rS="@firebase/auth",sS="@firebase/auth-compat",iS="@firebase/database",oS="@firebase/data-connect",aS="@firebase/database-compat",lS="@firebase/functions",cS="@firebase/functions-compat",uS="@firebase/installations",hS="@firebase/installations-compat",dS="@firebase/messaging",fS="@firebase/messaging-compat",pS="@firebase/performance",mS="@firebase/performance-compat",gS="@firebase/remote-config",yS="@firebase/remote-config-compat",vS="@firebase/storage",_S="@firebase/storage-compat",wS="@firebase/firestore",ES="@firebase/ai",TS="@firebase/firestore-compat",IS="firebase",SS="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="[DEFAULT]",xS={[pd]:"fire-core",[XI]:"fire-core-compat",[eS]:"fire-analytics",[ZI]:"fire-analytics-compat",[nS]:"fire-app-check",[tS]:"fire-app-check-compat",[rS]:"fire-auth",[sS]:"fire-auth-compat",[iS]:"fire-rtdb",[oS]:"fire-data-connect",[aS]:"fire-rtdb-compat",[lS]:"fire-fn",[cS]:"fire-fn-compat",[uS]:"fire-iid",[hS]:"fire-iid-compat",[dS]:"fire-fcm",[fS]:"fire-fcm-compat",[pS]:"fire-perf",[mS]:"fire-perf-compat",[gS]:"fire-rc",[yS]:"fire-rc-compat",[vS]:"fire-gcs",[_S]:"fire-gcs-compat",[wS]:"fire-fst",[TS]:"fire-fst-compat",[ES]:"fire-vertex","fire-js":"fire-js",[IS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Map,AS=new Map,gd=new Map;function Zg(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ci(t){const e=t.name;if(gd.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;gd.set(e,t);for(const n of Ql.values())Zg(n,t);for(const n of AS.values())Zg(n,t);return!0}function Uf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new aa("app","Firebase",CS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=SS;function a_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:md,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=t_()),!n)throw Er.create("no-options");const i=Ql.get(s);if(i){if(ds(n,i.options)&&ds(r,i.config))return i;throw Er.create("duplicate-app",{appName:s})}const o=new bI(s);for(const u of gd.values())o.addComponent(u);const l=new NS(n,r,o);return Ql.set(s,l),l}function l_(t=md){const e=Ql.get(t);if(!e&&t===md&&t_())return a_();if(!e)throw Er.create("no-app",{appName:t});return e}function Tr(t,e,n){let r=xS[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(o.join(" "));return}ci(new fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="firebase-heartbeat-database",kS=1,$o="firebase-heartbeat-store";let ah=null;function c_(){return ah||(ah=GI(PS,kS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($o)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),ah}async function RS(t){try{const n=(await c_()).transaction($o),r=await n.objectStore($o).get(u_(t));return await n.done,r}catch(e){if(e instanceof qn)Fn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fn.warn(n.message)}}}async function ey(t,e){try{const r=(await c_()).transaction($o,"readwrite");await r.objectStore($o).put(e,u_(t)),await r.done}catch(n){if(n instanceof qn)Fn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fn.warn(r.message)}}}function u_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=1024,DS=30;class bS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ty();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>DS){const o=MS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ty(),{heartbeatsToSend:r,unsentEntries:s}=VS(this._heartbeatsCache.heartbeats),i=Kl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Fn.warn(n),""}}}function ty(){return new Date().toISOString().substring(0,10)}function VS(t,e=jS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ny(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ny(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TI()?II().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ey(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ey(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ny(t){return Kl(JSON.stringify({version:2,heartbeats:t})).length}function MS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){ci(new fs("platform-logger",e=>new JI(e),"PRIVATE")),ci(new fs("heartbeat",e=>new bS(e),"PRIVATE")),Tr(pd,Xg,t),Tr(pd,Xg,"esm2020"),Tr("fire-js","")}LS("");var FS="firebase",US="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(FS,US,"app");function h_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zS=h_,d_=new aa("auth","Firebase",h_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Lf("@firebase/auth");function BS(t,...e){Jl.logLevel<=ue.WARN&&Jl.warn(`Auth (${Ti}): ${t}`,...e)}function pl(t,...e){Jl.logLevel<=ue.ERROR&&Jl.error(`Auth (${Ti}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw Bf(t,...e)}function on(t,...e){return Bf(t,...e)}function zf(t,e,n){const r={...zS(),[e]:n};return new aa("auth","Firebase",r).create(e,{appName:t.name})}function Ir(t){return zf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function f_(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sn(t,"argument-error"),zf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return d_.create(t,...e)}function ee(t,e,...n){if(!t)throw Bf(e,...n)}function Rn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pl(e),new Error(e)}function Un(t,e){t||Rn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $S(){return ry()==="http:"||ry()==="https:"}function ry(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($S()||vI()||"connection"in navigator)?navigator.onLine:!0}function qS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=mI()||_I()}get(){return HS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e){Un(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KS=new ca(3e4,6e4);function Hf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ii(t,e,n,r,s={}){return m_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=la({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...i};return yI()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Ei(t.emulatorConfig.host)&&(h.credentials="include"),p_.fetch()(await g_(t,t.config.apiHost,n,l),h)})}async function m_(t,e,n){t._canInitEmulator=!1;const r={...WS,...e};try{const s=new JS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ja(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ja(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ja(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ja(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw zf(t,f,h);Sn(t,f)}}catch(s){if(s instanceof qn)throw s;Sn(t,"network-request-failed",{message:String(s)})}}async function QS(t,e,n,r,s={}){const i=await Ii(t,e,n,r,s);return"mfaPendingCredential"in i&&Sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function g_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?$f(t.config,s):`${t.config.apiScheme}://${s}`;return GS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class JS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),KS.get())})}}function Ja(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=on(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(t,e){return Ii(t,"POST","/v1/accounts:delete",e)}async function Yl(t,e){return Ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XS(t,e=!1){const n=Ke(t),r=await n.getIdToken(e),s=qf(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wo(lh(s.auth_time)),issuedAtTime:wo(lh(s.iat)),expirationTime:wo(lh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function lh(t){return Number(t)*1e3}function qf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Z0(n);return s?JSON.parse(s):(pl("Failed to decode base64 JWT payload"),null)}catch(s){return pl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function sy(t){const e=qf(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qn&&ZS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ZS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wo(this.lastLoginAt),this.creationTime=wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Ho(t,Yl(e,{idToken:n}));ee(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?y_(s.providerUserInfo):[],o=nx(t.providerData,i),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new vd(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function tx(t){const e=Ke(t);await Xl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nx(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function y_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(t,e){const n=await m_(t,{},async()=>{const r=la({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await g_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ei(t.emulatorConfig.host)&&(u.credentials="include"),p_.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sx(t,e){return Ii(t,"POST","/v2/accounts:revokeToken",Hf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=sy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rx(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ys;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ys,this.toJSON())}_performRefresh(){return Rn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new ex(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ho(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XS(this,e)}reload(){return tx(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await Ho(this,YS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:S,providerData:P,stsTokenManager:T}=n;ee(m&&T,e,"internal-error");const k=Ys.fromJSON(this.name,T);ee(typeof m=="string",e,"internal-error"),er(r,e.name),er(s,e.name),ee(typeof g=="boolean",e,"internal-error"),ee(typeof S=="boolean",e,"internal-error"),er(i,e.name),er(o,e.name),er(l,e.name),er(u,e.name),er(h,e.name),er(f,e.name);const v=new tn({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:k,createdAt:h,lastLoginAt:f});return P&&Array.isArray(P)&&(v.providerData=P.map(E=>({...E}))),u&&(v._redirectEventId=u),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ys;s.updateFromServerResponse(n);const i=new tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?y_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ys;l.updateFromIdToken(r);const u=new tn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new Map;function jn(t){Un(t instanceof Function,"Expected a class definition");let e=iy.get(t);return e?(Un(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}v_.type="NONE";const oy=v_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t,e,n){return`firebase:${t}:${e}:${n}`}class Xs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ml(this.userKey,s.apiKey,i),this.fullPersistenceKey=ml("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Yl(this.auth,{idToken:e}).catch(()=>{});return n?tn._fromGetAccountInfoResponse(this.auth,n,e):null}return tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xs(jn(oy),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||jn(oy);const o=ml(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){let m;if(typeof f=="string"){const g=await Yl(e,{idToken:f}).catch(()=>{});if(!g)break;m=await tn._fromGetAccountInfoResponse(e,g,f)}else m=tn._fromJSON(e,f);h!==i&&(l=m),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Xs(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Xs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(__(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S_(e))return"Blackberry";if(x_(e))return"Webos";if(w_(e))return"Safari";if((e.includes("chrome/")||E_(e))&&!e.includes("edge/"))return"Chrome";if(I_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function __(t=ft()){return/firefox\//i.test(t)}function w_(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E_(t=ft()){return/crios\//i.test(t)}function T_(t=ft()){return/iemobile/i.test(t)}function I_(t=ft()){return/android/i.test(t)}function S_(t=ft()){return/blackberry/i.test(t)}function x_(t=ft()){return/webos/i.test(t)}function Wf(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ix(t=ft()){var e;return Wf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ox(){return wI()&&document.documentMode===10}function A_(t=ft()){return Wf(t)||I_(t)||x_(t)||S_(t)||/windows phone/i.test(t)||T_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e=[]){let n;switch(t){case"Browser":n=ay(ft());break;case"Worker":n=`${ay(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ti}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",Hf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=6;class ux{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ly(this),this.idTokenSubscription=new ly(this),this.beforeStateQueue=new ax(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Xs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yl(this,{idToken:e}),r=await tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if($t(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(Ir(this));const n=e?Ke(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lx(this),n=new ux(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new aa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Xs.create(this,[jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=C_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&BS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Si(t){return Ke(t)}class ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=NI(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dx(t){Gf=t}function fx(t){return Gf.loadJS(t)}function px(){return Gf.gapiScript}function mx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t,e){const n=Uf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ds(i,e??{}))return s;Sn(s,"already-initialized")}return n.initialize({options:e})}function yx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vx(t,e,n){const r=Si(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=N_(e),{host:o,port:l}=_x(e),u=l===null?"":`:${l}`,h={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(ds(h,r.config.emulator)&&ds(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Ei(o)?(r_(`${i}//${o}${u}`),s_("Auth",!0)):wx()}function N_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _x(t){const e=N_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:cy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:cy(o)}}}function cy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rn("not implemented")}_getIdTokenResponse(e){return Rn("not implemented")}_linkToIdToken(e,n){return Rn("not implemented")}_getReauthenticationResolver(e){return Rn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,e){return QS(t,"POST","/v1/accounts:signInWithIdp",Hf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="http://localhost";class ps extends P_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ps(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zs(e,n)}buildRequest(){const e={requestUri:Ex,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=la(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Vc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends ua{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends ua{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nn.credential(n,r)}catch{return null}}}Nn.GOOGLE_SIGN_IN_METHOD="google.com";Nn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends ua{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ua{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await tn._fromIdTokenResponse(e,r,s),o=uy(r);return new ui({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=uy(r);return new ui({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function uy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends qn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Zl(e,n,r,s)}}function k_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Zl._fromErrorAndOperation(t,i,e,r):i})}async function Tx(t,e,n=!1){const r=await Ho(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ui._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(t,e,n=!1){const{auth:r}=t;if($t(r.app))return Promise.reject(Ir(r));const s="reauthenticate";try{const i=await Ho(t,k_(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=qf(i.idToken);ee(o,r,"internal-error");const{sub:l}=o;return ee(t.uid===l,r,"user-mismatch"),ui._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Sn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t,e,n=!1){if($t(t.app))return Promise.reject(Ir(t));const r="signIn",s=await k_(t,r,e),i=await ui._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e){return Ke(t).setPersistence(e)}function xx(t,e,n,r){return Ke(t).onIdTokenChanged(e,n,r)}function Ax(t,e,n){return Ke(t).beforeAuthStateChanged(e,n)}function Cx(t,e,n,r){return Ke(t).onAuthStateChanged(e,n,r)}function Nx(t){return Ke(t).signOut()}const ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=1e3,kx=10;class D_ extends j_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);ox()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,kx):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Px)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D_.type="LOCAL";const Kf=D_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_ extends j_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}b_.type="SESSION";const V_=b_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Oc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await Rx(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=Qf("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function Dx(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function bx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Ox(){return O_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="firebaseLocalStorageDb",Mx=1,tc="firebaseLocalStorage",L_="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mc(t,e){return t.transaction([tc],e?"readwrite":"readonly").objectStore(tc)}function Lx(){const t=indexedDB.deleteDatabase(M_);return new ha(t).toPromise()}function _d(){const t=indexedDB.open(M_,Mx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tc,{keyPath:L_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tc)?e(r):(r.close(),await Lx(),e(await _d()))})})}async function hy(t,e,n){const r=Mc(t,!0).put({[L_]:e,value:n});return new ha(r).toPromise()}async function Fx(t,e){const n=Mc(t,!1).get(e),r=await new ha(n).toPromise();return r===void 0?null:r.value}function dy(t,e){const n=Mc(t,!0).delete(e);return new ha(n).toPromise()}const Ux=800,zx=3;class F_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _d(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(Ox()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await bx(),!this.activeServiceWorker)return;this.sender=new jx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Vx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _d();return await hy(e,ec,"1"),await dy(e,ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Fx(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mc(s,!1).getAll();return new ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ux)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F_.type="LOCAL";const Bx=F_;new ca(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t,e){return e?jn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf extends P_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $x(t){return Sx(t.auth,new Yf(t),t.bypassAuthState)}function Hx(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),Ix(n,new Yf(t),t.bypassAuthState)}async function qx(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),Tx(n,new Yf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $x;case"linkViaPopup":case"linkViaRedirect":return qx;case"reauthViaPopup":case"reauthViaRedirect":return Hx;default:Sn(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new ca(2e3,1e4);async function Gx(t,e,n){if($t(t.app))return Promise.reject(on(t,"operation-not-supported-in-this-environment"));const r=Si(t);f_(t,e,Vc);const s=Jf(r,n);return new ts(r,"signInViaPopup",e,s).executeNotNull()}class ts extends U_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Un(this.filter.length===1,"Popup operations only handle one event");const e=Qf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wx.get())};e()}}ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="pendingRedirect",gl=new Map;class Qx extends U_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gl.get(this.auth._key());if(!e){try{const r=await Jx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gl.set(this.auth._key(),e)}return this.bypassAuthState||gl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jx(t,e){const n=B_(e),r=z_(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Yx(t,e){return z_(t)._set(B_(e),"true")}function Xx(t,e){gl.set(t._key(),e)}function z_(t){return jn(t._redirectPersistence)}function B_(t){return ml(Kx,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t,e,n){return e3(t,e,n)}async function e3(t,e,n){if($t(t.app))return Promise.reject(Ir(t));const r=Si(t);f_(t,e,Vc),await r._initializationPromise;const s=Jf(r,n);return await Yx(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function t3(t,e){return await Si(t)._initializationPromise,$_(t,e,!1)}async function $_(t,e,n=!1){if($t(t.app))return Promise.reject(Ir(t));const r=Si(t),s=Jf(r,e),o=await new Qx(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=10*60*1e3;class r3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!H_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(on(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n3&&this.cachedEventUids.clear(),this.cachedEventUids.has(fy(e))}saveEventToCache(e){this.cachedEventUids.add(fy(e)),this.lastProcessedEventTime=Date.now()}}function fy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function H_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function s3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(t,e={}){return Ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a3=/^https?/;async function l3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i3(t);for(const n of e)try{if(c3(n))return}catch{}Sn(t,"unauthorized-domain")}function c3(t){const e=yd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!a3.test(n))return!1;if(o3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=new ca(3e4,6e4);function py(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h3(t){return new Promise((e,n)=>{var s,i,o;function r(){py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{py(),n(on(t,"network-request-failed"))},timeout:u3.get()})}if((i=(s=wn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=wn().gapi)!=null&&o.load)r();else{const l=mx("iframefcb");return wn()[l]=()=>{gapi.load?r():n(on(t,"network-request-failed"))},fx(`${px()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw yl=null,e})}let yl=null;function d3(t){return yl=yl||h3(t),yl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=new ca(5e3,15e3),p3="__/auth/iframe",m3="emulator/auth/iframe",g3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v3(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$f(e,m3):`https://${t.config.authDomain}/${p3}`,r={apiKey:e.apiKey,appName:t.name,v:Ti},s=y3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${la(r).slice(1)}`}async function _3(t){const e=await d3(t),n=wn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:v3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=on(t,"network-request-failed"),l=wn().setTimeout(()=>{i(o)},f3.get());function u(){wn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E3=500,T3=600,I3="_blank",S3="http://localhost";class my{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x3(t,e,n,r=E3,s=T3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...w3,width:r.toString(),height:s.toString(),top:i,left:o},h=ft().toLowerCase();n&&(l=E_(h)?I3:n),__(h)&&(e=e||S3,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[S,P])=>`${g}${S}=${P},`,"");if(ix(h)&&l!=="_self")return A3(e||"",l),new my(null);const m=window.open(e||"",l,f);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new my(m)}function A3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="__/auth/handler",N3="emulator/auth/handler",P3=encodeURIComponent("fac");async function gy(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ti,eventId:s};if(e instanceof Vc){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",CI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof ua){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),h=u?`#${P3}=${encodeURIComponent(u)}`:"";return`${k3(t)}?${la(l).slice(1)}${h}`}function k3({config:t}){return t.emulator?$f(t,N3):`https://${t.authDomain}/${C3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="webStorageSupport";class R3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V_,this._completeRedirectFn=$_,this._overrideRedirectResult=Xx}async _openPopup(e,n,r,s){var o;Un((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await gy(e,n,r,yd(),s);return x3(e,i,Qf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await gy(e,n,r,yd(),s);return Dx(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Un(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _3(e),r=new r3(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ch,{type:ch},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[ch];i!==void 0&&n(!!i),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return A_()||w_()||Wf()}}const j3=R3;var yy="@firebase/auth",vy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V3(t){ci(new fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C_(t)},h=new hx(r,s,i,u);return yx(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ci(new fs("auth-internal",e=>{const n=Si(e.getProvider("auth").getImmediate());return(r=>new D3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(yy,vy,b3(t)),Tr(yy,vy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=5*60,M3=n_("authIdTokenMaxAge")||O3;let _y=null;const L3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>M3)return;const s=n==null?void 0:n.token;_y!==s&&(_y=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function F3(t=l_()){const e=Uf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gx(t,{popupRedirectResolver:j3,persistence:[Bx,Kf,V_]}),r=n_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=L3(i.toString());Ax(n,o,()=>o(n.currentUser)),xx(n,l=>o(l))}}const s=e_("auth");return s&&vx(n,`http://${s}`),n}function U3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}dx({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=on("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",U3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V3("Browser");var wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,q_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function N(){}N.prototype=y.prototype,x.F=y.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(w,A,R){for(var I=Array(arguments.length-2),J=2;J<arguments.length;J++)I[J-2]=arguments[J];return y.prototype[A].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,N){N||(N=0);const w=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)w[A]=y.charCodeAt(N++)|y.charCodeAt(N++)<<8|y.charCodeAt(N++)<<16|y.charCodeAt(N++)<<24;else for(A=0;A<16;++A)w[A]=y[N++]|y[N++]<<8|y[N++]<<16|y[N++]<<24;y=x.g[0],N=x.g[1],A=x.g[2];let R=x.g[3],I;I=y+(R^N&(A^R))+w[0]+3614090360&4294967295,y=N+(I<<7&4294967295|I>>>25),I=R+(A^y&(N^A))+w[1]+3905402710&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(N^R&(y^N))+w[2]+606105819&4294967295,A=R+(I<<17&4294967295|I>>>15),I=N+(y^A&(R^y))+w[3]+3250441966&4294967295,N=A+(I<<22&4294967295|I>>>10),I=y+(R^N&(A^R))+w[4]+4118548399&4294967295,y=N+(I<<7&4294967295|I>>>25),I=R+(A^y&(N^A))+w[5]+1200080426&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(N^R&(y^N))+w[6]+2821735955&4294967295,A=R+(I<<17&4294967295|I>>>15),I=N+(y^A&(R^y))+w[7]+4249261313&4294967295,N=A+(I<<22&4294967295|I>>>10),I=y+(R^N&(A^R))+w[8]+1770035416&4294967295,y=N+(I<<7&4294967295|I>>>25),I=R+(A^y&(N^A))+w[9]+2336552879&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(N^R&(y^N))+w[10]+4294925233&4294967295,A=R+(I<<17&4294967295|I>>>15),I=N+(y^A&(R^y))+w[11]+2304563134&4294967295,N=A+(I<<22&4294967295|I>>>10),I=y+(R^N&(A^R))+w[12]+1804603682&4294967295,y=N+(I<<7&4294967295|I>>>25),I=R+(A^y&(N^A))+w[13]+4254626195&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(N^R&(y^N))+w[14]+2792965006&4294967295,A=R+(I<<17&4294967295|I>>>15),I=N+(y^A&(R^y))+w[15]+1236535329&4294967295,N=A+(I<<22&4294967295|I>>>10),I=y+(A^R&(N^A))+w[1]+4129170786&4294967295,y=N+(I<<5&4294967295|I>>>27),I=R+(N^A&(y^N))+w[6]+3225465664&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^N&(R^y))+w[11]+643717713&4294967295,A=R+(I<<14&4294967295|I>>>18),I=N+(R^y&(A^R))+w[0]+3921069994&4294967295,N=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(N^A))+w[5]+3593408605&4294967295,y=N+(I<<5&4294967295|I>>>27),I=R+(N^A&(y^N))+w[10]+38016083&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^N&(R^y))+w[15]+3634488961&4294967295,A=R+(I<<14&4294967295|I>>>18),I=N+(R^y&(A^R))+w[4]+3889429448&4294967295,N=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(N^A))+w[9]+568446438&4294967295,y=N+(I<<5&4294967295|I>>>27),I=R+(N^A&(y^N))+w[14]+3275163606&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^N&(R^y))+w[3]+4107603335&4294967295,A=R+(I<<14&4294967295|I>>>18),I=N+(R^y&(A^R))+w[8]+1163531501&4294967295,N=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(N^A))+w[13]+2850285829&4294967295,y=N+(I<<5&4294967295|I>>>27),I=R+(N^A&(y^N))+w[2]+4243563512&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^N&(R^y))+w[7]+1735328473&4294967295,A=R+(I<<14&4294967295|I>>>18),I=N+(R^y&(A^R))+w[12]+2368359562&4294967295,N=A+(I<<20&4294967295|I>>>12),I=y+(N^A^R)+w[5]+4294588738&4294967295,y=N+(I<<4&4294967295|I>>>28),I=R+(y^N^A)+w[8]+2272392833&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^N)+w[11]+1839030562&4294967295,A=R+(I<<16&4294967295|I>>>16),I=N+(A^R^y)+w[14]+4259657740&4294967295,N=A+(I<<23&4294967295|I>>>9),I=y+(N^A^R)+w[1]+2763975236&4294967295,y=N+(I<<4&4294967295|I>>>28),I=R+(y^N^A)+w[4]+1272893353&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^N)+w[7]+4139469664&4294967295,A=R+(I<<16&4294967295|I>>>16),I=N+(A^R^y)+w[10]+3200236656&4294967295,N=A+(I<<23&4294967295|I>>>9),I=y+(N^A^R)+w[13]+681279174&4294967295,y=N+(I<<4&4294967295|I>>>28),I=R+(y^N^A)+w[0]+3936430074&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^N)+w[3]+3572445317&4294967295,A=R+(I<<16&4294967295|I>>>16),I=N+(A^R^y)+w[6]+76029189&4294967295,N=A+(I<<23&4294967295|I>>>9),I=y+(N^A^R)+w[9]+3654602809&4294967295,y=N+(I<<4&4294967295|I>>>28),I=R+(y^N^A)+w[12]+3873151461&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^N)+w[15]+530742520&4294967295,A=R+(I<<16&4294967295|I>>>16),I=N+(A^R^y)+w[2]+3299628645&4294967295,N=A+(I<<23&4294967295|I>>>9),I=y+(A^(N|~R))+w[0]+4096336452&4294967295,y=N+(I<<6&4294967295|I>>>26),I=R+(N^(y|~A))+w[7]+1126891415&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~N))+w[14]+2878612391&4294967295,A=R+(I<<15&4294967295|I>>>17),I=N+(R^(A|~y))+w[5]+4237533241&4294967295,N=A+(I<<21&4294967295|I>>>11),I=y+(A^(N|~R))+w[12]+1700485571&4294967295,y=N+(I<<6&4294967295|I>>>26),I=R+(N^(y|~A))+w[3]+2399980690&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~N))+w[10]+4293915773&4294967295,A=R+(I<<15&4294967295|I>>>17),I=N+(R^(A|~y))+w[1]+2240044497&4294967295,N=A+(I<<21&4294967295|I>>>11),I=y+(A^(N|~R))+w[8]+1873313359&4294967295,y=N+(I<<6&4294967295|I>>>26),I=R+(N^(y|~A))+w[15]+4264355552&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~N))+w[6]+2734768916&4294967295,A=R+(I<<15&4294967295|I>>>17),I=N+(R^(A|~y))+w[13]+1309151649&4294967295,N=A+(I<<21&4294967295|I>>>11),I=y+(A^(N|~R))+w[4]+4149444226&4294967295,y=N+(I<<6&4294967295|I>>>26),I=R+(N^(y|~A))+w[11]+3174756917&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~N))+w[2]+718787259&4294967295,A=R+(I<<15&4294967295|I>>>17),I=N+(R^(A|~y))+w[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+R&4294967295}r.prototype.v=function(x,y){y===void 0&&(y=x.length);const N=y-this.blockSize,w=this.C;let A=this.h,R=0;for(;R<y;){if(A==0)for(;R<=N;)s(this,x,R),R+=this.blockSize;if(typeof x=="string"){for(;R<y;)if(w[A++]=x.charCodeAt(R++),A==this.blockSize){s(this,w),A=0;break}}else for(;R<y;)if(w[A++]=x[R++],A==this.blockSize){s(this,w),A=0;break}}this.h=A,this.o+=y},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;y=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=y&255,y/=256;for(this.v(x),x=Array(16),y=0,N=0;N<4;++N)for(let w=0;w<32;w+=8)x[y++]=this.g[N]>>>w&255;return x};function i(x,y){var N=l;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=y(x)}function o(x,y){this.h=y;const N=[];let w=!0;for(let A=x.length-1;A>=0;A--){const R=x[A]|0;w&&R==y||(N[A]=R,w=!1)}this.g=N}var l={};function u(x){return-128<=x&&x<128?i(x,function(y){return new o([y|0],y<0?-1:0)}):new o([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return m;if(x<0)return k(h(-x));const y=[];let N=1;for(let w=0;x>=N;w++)y[w]=x/N|0,N*=4294967296;return new o(y,0)}function f(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return k(f(x.substring(1),y));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(y,8));let w=m;for(let R=0;R<x.length;R+=8){var A=Math.min(8,x.length-R);const I=parseInt(x.substring(R,R+A),y);A<8?(A=h(Math.pow(y,A)),w=w.j(A).add(h(I))):(w=w.j(N),w=w.add(h(I)))}return w}var m=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(T(this))return-k(this).m();let x=0,y=1;for(let N=0;N<this.g.length;N++){const w=this.i(N);x+=(w>=0?w:4294967296+w)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(P(this))return"0";if(T(this))return"-"+k(this).toString(x);const y=h(Math.pow(x,6));var N=this;let w="";for(;;){const A=D(N,y).g;N=v(N,A.j(y));let R=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=A,P(N))return R+w;for(;R.length<6;)R="0"+R;w=R+w}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function P(x){if(x.h!=0)return!1;for(let y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function T(x){return x.h==-1}t.l=function(x){return x=v(this,x),T(x)?-1:P(x)?0:1};function k(x){const y=x.g.length,N=[];for(let w=0;w<y;w++)N[w]=~x.g[w];return new o(N,~x.h).add(g)}t.abs=function(){return T(this)?k(this):this},t.add=function(x){const y=Math.max(this.g.length,x.g.length),N=[];let w=0;for(let A=0;A<=y;A++){let R=w+(this.i(A)&65535)+(x.i(A)&65535),I=(R>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);w=I>>>16,R&=65535,I&=65535,N[A]=I<<16|R}return new o(N,N[N.length-1]&-2147483648?-1:0)};function v(x,y){return x.add(k(y))}t.j=function(x){if(P(this)||P(x))return m;if(T(this))return T(x)?k(this).j(k(x)):k(k(this).j(x));if(T(x))return k(this.j(k(x)));if(this.l(S)<0&&x.l(S)<0)return h(this.m()*x.m());const y=this.g.length+x.g.length,N=[];for(var w=0;w<2*y;w++)N[w]=0;for(w=0;w<this.g.length;w++)for(let A=0;A<x.g.length;A++){const R=this.i(w)>>>16,I=this.i(w)&65535,J=x.i(A)>>>16,le=x.i(A)&65535;N[2*w+2*A]+=I*le,E(N,2*w+2*A),N[2*w+2*A+1]+=R*le,E(N,2*w+2*A+1),N[2*w+2*A+1]+=I*J,E(N,2*w+2*A+1),N[2*w+2*A+2]+=R*J,E(N,2*w+2*A+2)}for(x=0;x<y;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=y;x<2*y;x++)N[x]=0;return new o(N,0)};function E(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function C(x,y){this.g=x,this.h=y}function D(x,y){if(P(y))throw Error("division by zero");if(P(x))return new C(m,m);if(T(x))return y=D(k(x),y),new C(k(y.g),k(y.h));if(T(y))return y=D(x,k(y)),new C(k(y.g),y.h);if(x.g.length>30){if(T(x)||T(y))throw Error("slowDivide_ only works with positive integers.");for(var N=g,w=y;w.l(x)<=0;)N=F(N),w=F(w);var A=U(N,1),R=U(w,1);for(w=U(w,2),N=U(N,2);!P(w);){var I=R.add(w);I.l(x)<=0&&(A=A.add(N),R=I),w=U(w,1),N=U(N,1)}return y=v(x,A.j(y)),new C(A,y)}for(A=m;x.l(y)>=0;){for(N=Math.max(1,Math.floor(x.m()/y.m())),w=Math.ceil(Math.log(N)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),R=h(N),I=R.j(y);T(I)||I.l(x)>0;)N-=w,R=h(N),I=R.j(y);P(R)&&(R=g),A=A.add(R),x=v(x,I)}return new C(A,x)}t.B=function(x){return D(this,x).h},t.and=function(x){const y=Math.max(this.g.length,x.g.length),N=[];for(let w=0;w<y;w++)N[w]=this.i(w)&x.i(w);return new o(N,this.h&x.h)},t.or=function(x){const y=Math.max(this.g.length,x.g.length),N=[];for(let w=0;w<y;w++)N[w]=this.i(w)|x.i(w);return new o(N,this.h|x.h)},t.xor=function(x){const y=Math.max(this.g.length,x.g.length),N=[];for(let w=0;w<y;w++)N[w]=this.i(w)^x.i(w);return new o(N,this.h^x.h)};function F(x){const y=x.g.length+1,N=[];for(let w=0;w<y;w++)N[w]=x.i(w)<<1|x.i(w-1)>>>31;return new o(N,x.h)}function U(x,y){const N=y>>5;y%=32;const w=x.g.length-N,A=[];for(let R=0;R<w;R++)A[R]=y>0?x.i(R+N)>>>y|x.i(R+N+1)<<32-y:x.i(R+N);return new o(A,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,q_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Sr=o}).apply(typeof wy<"u"?wy:typeof self<"u"?self:typeof window<"u"?window:{});var Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W_,io,G_,vl,wd,K_,Q_,J_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ya=="object"&&Ya];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var p=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var j=a[_];if(!(j in p))break e;p=p[j]}a=a[a.length-1],_=p[a],d=d(_),d!=_&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(d){var p=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&p.push([_,d[_]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,p){return a.call.apply(a.bind,arguments)}function h(a,d,p){return h=u,h.apply(null,arguments)}function f(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function m(a,d){function p(){}p.prototype=d.prototype,a.Z=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(_,j,b){for(var $=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)$[ae-2]=arguments[ae];return d.prototype[j].apply(_,$)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function S(a){const d=a.length;if(d>0){const p=Array(d);for(let _=0;_<d;_++)p[_]=a[_];return p}return[]}function P(a,d){for(let _=1;_<arguments.length;_++){const j=arguments[_];var p=typeof j;if(p=p!="object"?p:j?Array.isArray(j)?"array":p:"null",p=="array"||p=="object"&&typeof j.length=="number"){p=a.length||0;const b=j.length||0;a.length=p+b;for(let $=0;$<b;$++)a[p+$]=j[$]}else a.push(j)}}class T{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(a){o.setTimeout(()=>{throw a},0)}function v(){var a=x;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class E{constructor(){this.h=this.g=null}add(d,p){const _=C.get();_.set(d,p),this.h?this.h.next=_:this.g=_,this.h=_}}var C=new T(()=>new D,a=>a.reset());class D{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,x=new E,y=()=>{const a=Promise.resolve(void 0);F=()=>{a.then(N)}};function N(){for(var a;a=v();){try{a.h.call(a.g)}catch(p){k(p)}var d=C;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}U=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,d),o.removeEventListener("test",p,d)}catch{}return a}();function I(a){return/^[\s\xa0]*$/.test(a)}function J(a,d){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}m(J,A),J.prototype.init=function(a,d){const p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),H=0;function Me(a,d,p,_,j){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!_,this.ha=j,this.key=++H,this.da=this.fa=!1}function B(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function K(a,d,p){for(const _ in a)d.call(p,a[_],_,a)}function te(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function ge(a){const d={};for(const p in a)d[p]=a[p];return d}const _e="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(a,d){let p,_;for(let j=1;j<arguments.length;j++){_=arguments[j];for(p in _)a[p]=_[p];for(let b=0;b<_e.length;b++)p=_e[b],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function oe(a){this.src=a,this.g={},this.h=0}oe.prototype.add=function(a,d,p,_,j){const b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);const $=O(a,d,_,j);return $>-1?(d=a[$],p||(d.fa=!1)):(d=new Me(d,this.src,b,!!_,j),d.fa=p,a.push(d)),d};function we(a,d){const p=d.type;if(p in a.g){var _=a.g[p],j=Array.prototype.indexOf.call(_,d,void 0),b;(b=j>=0)&&Array.prototype.splice.call(_,j,1),b&&(B(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function O(a,d,p,_){for(let j=0;j<a.length;++j){const b=a[j];if(!b.da&&b.listener==d&&b.capture==!!p&&b.ha==_)return j}return-1}var Y="closure_lm_"+(Math.random()*1e6|0),pt={};function ne(a,d,p,_,j){if(Array.isArray(d)){for(let b=0;b<d.length;b++)ne(a,d[b],p,_,j);return null}return p=Bp(p),a&&a[le]?a.J(d,p,l(_)?!!_.capture:!1,j):me(a,d,p,!1,_,j)}function me(a,d,p,_,j,b){if(!d)throw Error("Invalid event type");const $=l(j)?!!j.capture:!!j;let ae=hu(a);if(ae||(a[Y]=ae=new oe(a)),p=ae.add(d,p,_,$,b),p.proxy)return p;if(_=mt(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)R||(j=$),j===void 0&&(j=!1),a.addEventListener(d.toString(),_,j);else if(a.attachEvent)a.attachEvent(zp(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function mt(){function a(p){return d.call(a.src,a.listener,p)}const d=eE;return a}function $r(a,d,p,_,j){if(Array.isArray(d))for(var b=0;b<d.length;b++)$r(a,d[b],p,_,j);else _=l(_)?!!_.capture:!!_,p=Bp(p),a&&a[le]?(a=a.i,b=String(d).toString(),b in a.g&&(d=a.g[b],p=O(d,p,_,j),p>-1&&(B(d[p]),Array.prototype.splice.call(d,p,1),d.length==0&&(delete a.g[b],a.h--)))):a&&(a=hu(a))&&(d=a.g[d.toString()],a=-1,d&&(a=O(d,p,_,j)),(p=a>-1?d[a]:null)&&uu(p))}function uu(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[le])we(d.i,a);else{var p=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(p,_,a.capture):d.detachEvent?d.detachEvent(zp(p),_):d.addListener&&d.removeListener&&d.removeListener(_),(p=hu(d))?(we(p,a),p.h==0&&(p.src=null,d[Y]=null)):B(a)}}}function zp(a){return a in pt?pt[a]:pt[a]="on"+a}function eE(a,d){if(a.da)a=!0;else{d=new J(d,this);const p=a.listener,_=a.ha||a.src;a.fa&&uu(a),a=p.call(_,d)}return a}function hu(a){return a=a[Y],a instanceof oe?a:null}var du="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bp(a){return typeof a=="function"?a:(a[du]||(a[du]=function(d){return a.handleEvent(d)}),a[du])}function it(){w.call(this),this.i=new oe(this),this.M=this,this.G=null}m(it,w),it.prototype[le]=!0,it.prototype.removeEventListener=function(a,d,p,_){$r(this,a,d,p,_)};function gt(a,d){var p,_=a.G;if(_)for(p=[];_;_=_.G)p.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new A(d,a);else if(d instanceof A)d.target=d.target||a;else{var j=d;d=new A(_,a),Z(d,j)}j=!0;let b,$;if(p)for($=p.length-1;$>=0;$--)b=d.g=p[$],j=Ea(b,_,!0,d)&&j;if(b=d.g=a,j=Ea(b,_,!0,d)&&j,j=Ea(b,_,!1,d)&&j,p)for($=0;$<p.length;$++)b=d.g=p[$],j=Ea(b,_,!1,d)&&j}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var a=this.i;for(const d in a.g){const p=a.g[d];for(let _=0;_<p.length;_++)B(p[_]);delete a.g[d],a.h--}}this.G=null},it.prototype.J=function(a,d,p,_){return this.i.add(String(a),d,!1,p,_)},it.prototype.K=function(a,d,p,_){return this.i.add(String(a),d,!0,p,_)};function Ea(a,d,p,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let j=!0;for(let b=0;b<d.length;++b){const $=d[b];if($&&!$.da&&$.capture==p){const ae=$.listener,He=$.ha||$.src;$.fa&&we(a.i,$),j=ae.call(He,_)!==!1&&j}}return j&&!_.defaultPrevented}function tE(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(a,d||0)}function $p(a){a.g=tE(()=>{a.g=null,a.i&&(a.i=!1,$p(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class nE extends w{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:$p(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(a){w.call(this),this.h=a,this.g={}}m(ki,w);var Hp=[];function qp(a){K(a.g,function(d,p){this.g.hasOwnProperty(p)&&uu(d)},a),a.g={}}ki.prototype.N=function(){ki.Z.N.call(this),qp(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fu=o.JSON.stringify,rE=o.JSON.parse,sE=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Wp(){}function Gp(){}var Ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pu(){A.call(this,"d")}m(pu,A);function mu(){A.call(this,"c")}m(mu,A);var Hr={},Kp=null;function Ta(){return Kp=Kp||new it}Hr.Ia="serverreachability";function Qp(a){A.call(this,Hr.Ia,a)}m(Qp,A);function ji(a){const d=Ta();gt(d,new Qp(d))}Hr.STAT_EVENT="statevent";function Jp(a,d){A.call(this,Hr.STAT_EVENT,a),this.stat=d}m(Jp,A);function yt(a){const d=Ta();gt(d,new Jp(d,a))}Hr.Ja="timingevent";function Yp(a,d){A.call(this,Hr.Ja,a),this.size=d}m(Yp,A);function Di(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},d)}function bi(){this.g=!0}bi.prototype.ua=function(){this.g=!1};function iE(a,d,p,_,j,b){a.info(function(){if(a.g)if(b){var $="",ae=b.split("&");for(let Ee=0;Ee<ae.length;Ee++){var He=ae[Ee].split("=");if(He.length>1){const Qe=He[0];He=He[1];const dn=Qe.split("_");$=dn.length>=2&&dn[1]=="type"?$+(Qe+"="+He+"&"):$+(Qe+"=redacted&")}}}else $=null;else $=b;return"XMLHTTP REQ ("+_+") [attempt "+j+"]: "+d+`
`+p+`
`+$})}function oE(a,d,p,_,j,b,$){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+j+"]: "+d+`
`+p+`
`+b+" "+$})}function xs(a,d,p,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+lE(a,p)+(_?" "+_:"")})}function aE(a,d){a.info(function(){return"TIMEOUT: "+d})}bi.prototype.info=function(){};function lE(a,d){if(!a.g)return d;if(!d)return null;try{const b=JSON.parse(d);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var p=b[a];if(!(p.length<2)){var _=p[1];if(Array.isArray(_)&&!(_.length<1)){var j=_[0];if(j!="noop"&&j!="stop"&&j!="close")for(let $=1;$<_.length;$++)_[$]=""}}}}return fu(b)}catch{return d}}var Ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zp;function gu(){}m(gu,Wp),gu.prototype.g=function(){return new XMLHttpRequest},Zp=new gu;function Vi(a){return encodeURIComponent(String(a))}function cE(a){var d=1;a=a.split(":");const p=[];for(;d>0&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function Gn(a,d,p,_){this.j=a,this.i=d,this.l=p,this.S=_||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new em}function em(){this.i=null,this.g="",this.h=!1}var tm={},yu={};function vu(a,d,p){a.M=1,a.A=xa(hn(d)),a.u=p,a.R=!0,nm(a,null)}function nm(a,d){a.F=Date.now(),Sa(a),a.B=hn(a.A);var p=a.B,_=a.S;Array.isArray(_)||(_=[String(_)]),mm(p.i,"t",_),a.C=0,p=a.j.L,a.h=new em,a.g=Dm(a.j,p?d:null,!a.u),a.P>0&&(a.O=new nE(h(a.Y,a,a.g),a.P)),d=a.V,p=a.g,_=a.ba;var j="readystatechange";Array.isArray(j)||(j&&(Hp[0]=j.toString()),j=Hp);for(let b=0;b<j.length;b++){const $=ne(p,j[b],_||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.J?ge(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),ji(),iE(a.i,a.v,a.B,a.l,a.S,a.u)}Gn.prototype.ba=function(a){a=a.target;const d=this.O;d&&Jn(a)==3?d.j():this.Y(a)},Gn.prototype.Y=function(a){try{if(a==this.g)e:{const ae=Jn(this.g),He=this.g.ya(),Ee=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||Tm(this.g)))){this.K||ae!=4||He==7||(He==8||Ee<=0?ji(3):ji(2)),_u(this);var d=this.g.ca();this.X=d;var p=uE(this);if(this.o=d==200,oE(this.i,this.v,this.B,this.l,this.S,ae,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,j=this.g;if((_=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(_)){var b=_;break t}}b=null}if(a=b)xs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wu(this,a);else{this.o=!1,this.m=3,yt(12),qr(this),Oi(this);break e}}if(this.R){a=!0;let Qe;for(;!this.K&&this.C<p.length;)if(Qe=hE(this,p),Qe==yu){ae==4&&(this.m=4,yt(14),a=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==tm){this.m=4,yt(15),xs(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else xs(this.i,this.l,Qe,null),wu(this,Qe);if(rm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||p.length!=0||this.h.h||(this.m=1,yt(16),a=!1),this.o=this.o&&a,!a)xs(this.i,this.l,p,"[Invalid Chunked Response]"),qr(this),Oi(this);else if(p.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Nu($),$.P=!0,yt(11))}}else xs(this.i,this.l,p,null),wu(this,p);ae==4&&qr(this),this.o&&!this.K&&(ae==4?Pm(this.j,this):(this.o=!1,Sa(this)))}else xE(this.g),d==400&&p.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),qr(this),Oi(this)}}}catch{}finally{}};function uE(a){if(!rm(a))return a.g.la();const d=Tm(a.g);if(d==="")return"";let p="";const _=d.length,j=Jn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return qr(a),Oi(a),"";a.h.i=new o.TextDecoder}for(let b=0;b<_;b++)a.h.h=!0,p+=a.h.i.decode(d[b],{stream:!(j&&b==_-1)});return d.length=0,a.h.g+=p,a.C=0,a.h.g}function rm(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function hE(a,d){var p=a.C,_=d.indexOf(`
`,p);return _==-1?yu:(p=Number(d.substring(p,_)),isNaN(p)?tm:(_+=1,_+p>d.length?yu:(d=d.slice(_,_+p),a.C=_+p,d)))}Gn.prototype.cancel=function(){this.K=!0,qr(this)};function Sa(a){a.T=Date.now()+a.H,sm(a,a.H)}function sm(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Di(h(a.aa,a),d)}function _u(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Gn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(aE(this.i,this.B),this.M!=2&&(ji(),yt(17)),qr(this),this.m=2,Oi(this)):sm(this,this.T-a)};function Oi(a){a.j.I==0||a.K||Pm(a.j,a)}function qr(a){_u(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,qp(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function wu(a,d){try{var p=a.j;if(p.I!=0&&(p.g==a||Eu(p.h,a))){if(!a.L&&Eu(p.h,a)&&p.I==3){try{var _=p.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var j=_;if(j[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)ka(p),Na(p);else break e;Cu(p),yt(18)}}else p.xa=j[1],0<p.xa-p.K&&j[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Di(h(p.Va,p),6e3));am(p.h)<=1&&p.ta&&(p.ta=void 0)}else Gr(p,11)}else if((a.L||p.g==a)&&ka(p),!I(d))for(j=p.Ba.g.parse(d),d=0;d<j.length;d++){let Ee=j[d];const Qe=Ee[0];if(!(Qe<=p.K))if(p.K=Qe,Ee=Ee[1],p.I==2)if(Ee[0]=="c"){p.M=Ee[1],p.ba=Ee[2];const dn=Ee[3];dn!=null&&(p.ka=dn,p.j.info("VER="+p.ka));const Kr=Ee[4];Kr!=null&&(p.za=Kr,p.j.info("SVER="+p.za));const Yn=Ee[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(_=1.5*Yn,p.O=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Xn=a.g;if(Xn){const ja=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var b=_.h;b.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Tu(b,b.h),b.h=null))}if(_.G){const Pu=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pu&&(_.wa=Pu,xe(_.J,_.G,Pu))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),_=p;var $=a;if(_.na=jm(_,_.L?_.ba:null,_.W),$.L){lm(_.h,$);var ae=$,He=_.O;He&&(ae.H=He),ae.D&&(_u(ae),Sa(ae)),_.g=$}else Cm(_);p.i.length>0&&Pa(p)}else Ee[0]!="stop"&&Ee[0]!="close"||Gr(p,7);else p.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Gr(p,7):Au(p):Ee[0]!="noop"&&p.l&&p.l.qa(Ee),p.A=0)}}ji(4)}catch{}}var dE=class{constructor(a,d){this.g=a,this.map=d}};function im(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function om(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function am(a){return a.h?1:a.g?a.g.size:0}function Eu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Tu(a,d){a.g?a.g.add(d):a.h=d}function lm(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}im.prototype.cancel=function(){if(this.i=cm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function cm(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.G);return d}return S(a.i)}var um=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fE(a,d){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const _=a[p].indexOf("=");let j,b=null;_>=0?(j=a[p].substring(0,_),b=a[p].substring(_+1)):j=a[p],d(j,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Kn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Kn?(this.l=a.l,Mi(this,a.j),this.o=a.o,this.g=a.g,Li(this,a.u),this.h=a.h,Iu(this,gm(a.i)),this.m=a.m):a&&(d=String(a).match(um))?(this.l=!1,Mi(this,d[1]||"",!0),this.o=Fi(d[2]||""),this.g=Fi(d[3]||"",!0),Li(this,d[4]),this.h=Fi(d[5]||"",!0),Iu(this,d[6]||"",!0),this.m=Fi(d[7]||"")):(this.l=!1,this.i=new zi(null,this.l))}Kn.prototype.toString=function(){const a=[];var d=this.j;d&&a.push(Ui(d,hm,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ui(d,hm,!0),"@"),a.push(Vi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Ui(p,p.charAt(0)=="/"?gE:mE,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Ui(p,vE)),a.join("")},Kn.prototype.resolve=function(a){const d=hn(this);let p=!!a.j;p?Mi(d,a.j):p=!!a.o,p?d.o=a.o:p=!!a.g,p?d.g=a.g:p=a.u!=null;var _=a.h;if(p)Li(d,a.u);else if(p=!!a.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var j=d.h.lastIndexOf("/");j!=-1&&(_=d.h.slice(0,j+1)+_)}if(j=_,j==".."||j==".")_="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){_=j.lastIndexOf("/",0)==0,j=j.split("/");const b=[];for(let $=0;$<j.length;){const ae=j[$++];ae=="."?_&&$==j.length&&b.push(""):ae==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),_&&$==j.length&&b.push("")):(b.push(ae),_=!0)}_=b.join("/")}else _=j}return p?d.h=_:p=a.i.toString()!=="",p?Iu(d,gm(a.i)):p=!!a.m,p&&(d.m=a.m),d};function hn(a){return new Kn(a)}function Mi(a,d,p){a.j=p?Fi(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Li(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function Iu(a,d,p){d instanceof zi?(a.i=d,_E(a.i,a.l)):(p||(d=Ui(d,yE)),a.i=new zi(d,a.l))}function xe(a,d,p){a.i.set(d,p)}function xa(a){return xe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Fi(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ui(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,pE),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function pE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hm=/[#\/\?@]/g,mE=/[#\?:]/g,gE=/[#\?]/g,yE=/[#\?@]/g,vE=/#/g;function zi(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Wr(a){a.g||(a.g=new Map,a.h=0,a.i&&fE(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=zi.prototype,t.add=function(a,d){Wr(this),this.i=null,a=As(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function dm(a,d){Wr(a),d=As(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function fm(a,d){return Wr(a),d=As(a,d),a.g.has(d)}t.forEach=function(a,d){Wr(this),this.g.forEach(function(p,_){p.forEach(function(j){a.call(d,j,_,this)},this)},this)};function pm(a,d){Wr(a);let p=[];if(typeof d=="string")fm(a,d)&&(p=p.concat(a.g.get(As(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)p=p.concat(a[d]);return p}t.set=function(a,d){return Wr(this),this.i=null,a=As(this,a),fm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=pm(this,a),a.length>0?String(a[0]):d):d};function mm(a,d,p){dm(a,d),p.length>0&&(a.i=null,a.g.set(As(a,d),S(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var p=d[_];const j=Vi(p);p=pm(this,p);for(let b=0;b<p.length;b++){let $=j;p[b]!==""&&($+="="+Vi(p[b])),a.push($)}}return this.i=a.join("&")};function gm(a){const d=new zi;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function As(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function _E(a,d){d&&!a.j&&(Wr(a),a.i=null,a.g.forEach(function(p,_){const j=_.toLowerCase();_!=j&&(dm(this,_),mm(this,j,p))},a)),a.j=d}function wE(a,d){const p=new bi;if(o.Image){const _=new Image;_.onload=f(Qn,p,"TestLoadImage: loaded",!0,d,_),_.onerror=f(Qn,p,"TestLoadImage: error",!1,d,_),_.onabort=f(Qn,p,"TestLoadImage: abort",!1,d,_),_.ontimeout=f(Qn,p,"TestLoadImage: timeout",!1,d,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function EE(a,d){const p=new bi,_=new AbortController,j=setTimeout(()=>{_.abort(),Qn(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(b=>{clearTimeout(j),b.ok?Qn(p,"TestPingServer: ok",!0,d):Qn(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Qn(p,"TestPingServer: error",!1,d)})}function Qn(a,d,p,_,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),_(p)}catch{}}function TE(){this.g=new sE}function Su(a){this.i=a.Sb||null,this.h=a.ab||!1}m(Su,Wp),Su.prototype.g=function(){return new Aa(this.i,this.h)};function Aa(a,d){it.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Aa,it),t=Aa.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,$i(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ym(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function ym(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Bi(this):$i(this),this.readyState==3&&ym(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Bi(this))},t.Na=function(a){this.g&&(this.response=a,Bi(this))},t.ga=function(){this.g&&Bi(this)};function Bi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,$i(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function $i(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vm(a){let d="";return K(a,function(p,_){d+=_,d+=":",d+=p,d+=`\r
`}),d}function xu(a,d,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=vm(p),typeof a=="string"?p!=null&&Vi(p):xe(a,d,p))}function be(a){it.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(be,it);var IE=/^https?$/i,SE=["POST","PUT"];t=be.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zp.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(b){_m(this,b);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var j in _)p.set(j,_[j]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const b of _.keys())p.set(b,_.get(b));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(b=>b.toLowerCase()=="content-type"),j=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(SE,d,void 0)>=0)||_||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,$]of p)this.g.setRequestHeader(b,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){_m(this,b)}};function _m(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,wm(a),Ca(a)}function wm(a){a.A||(a.A=!0,gt(a,"complete"),gt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,gt(this,"complete"),gt(this,"abort"),Ca(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ca(this,!0)),be.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Em(this):this.Xa())},t.Xa=function(){Em(this)};function Em(a){if(a.h&&typeof i<"u"){if(a.v&&Jn(a)==4)setTimeout(a.Ca.bind(a),0);else if(gt(a,"readystatechange"),Jn(a)==4){a.h=!1;try{const b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var _;if(_=b===0){let $=String(a.D).match(um)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),_=!IE.test($?$.toLowerCase():"")}p=_}if(p)gt(a,"complete"),gt(a,"success");else{a.o=6;try{var j=Jn(a)>2?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.ca()+"]",wm(a)}}finally{Ca(a)}}}}function Ca(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,d||gt(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),rE(d)}};function Tm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function xE(a){const d={};a=(a.g&&Jn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(I(a[_]))continue;var p=cE(a[_]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const b=d[j]||[];d[j]=b,b.push(p)}te(d,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hi(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function Im(a){this.za=0,this.i=[],this.j=new bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hi("baseRetryDelayMs",5e3,a),this.Za=Hi("retryDelaySeedMs",1e4,a),this.Ta=Hi("forwardChannelMaxRetries",2,a),this.va=Hi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new im(a&&a.concurrentRequestLimit),this.Ba=new TE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Im.prototype,t.ka=8,t.I=1,t.connect=function(a,d,p,_){yt(0),this.W=a,this.H=d||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.J=jm(this,null,this.W),Pa(this)};function Au(a){if(Sm(a),a.I==3){var d=a.V++,p=hn(a.J);if(xe(p,"SID",a.M),xe(p,"RID",d),xe(p,"TYPE","terminate"),qi(a,p),d=new Gn(a,a.j,d),d.M=2,d.A=xa(hn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=d.A,p=!0),p||(d.g=Dm(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Sa(d)}Rm(a)}function Na(a){a.g&&(Nu(a),a.g.cancel(),a.g=null)}function Sm(a){Na(a),a.v&&(o.clearTimeout(a.v),a.v=null),ka(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Pa(a){if(!om(a.h)&&!a.m){a.m=!0;var d=a.Ea;F||y(),U||(F(),U=!0),x.add(d,a),a.D=0}}function AE(a,d){return am(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Di(h(a.Ea,a,d),km(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const j=new Gn(this,this.j,a);let b=this.o;if(this.U&&(b?(b=ge(b),Z(b,this.U)):b=this.U),this.u!==null||this.R||(j.J=b,b=null),this.S)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Am(this,j,d),p=hn(this.J),xe(p,"RID",a),xe(p,"CVER",22),this.G&&xe(p,"X-HTTP-Session-Id",this.G),qi(this,p),b&&(this.R?d="headers="+Vi(vm(b))+"&"+d:this.u&&xu(p,this.u,b)),Tu(this.h,j),this.Ra&&xe(p,"TYPE","init"),this.S?(xe(p,"$req",d),xe(p,"SID","null"),j.U=!0,vu(j,p,null)):vu(j,p,d),this.I=2}}else this.I==3&&(a?xm(this,a):this.i.length==0||om(this.h)||xm(this))};function xm(a,d){var p;d?p=d.l:p=a.V++;const _=hn(a.J);xe(_,"SID",a.M),xe(_,"RID",p),xe(_,"AID",a.K),qi(a,_),a.u&&a.o&&xu(_,a.u,a.o),p=new Gn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Am(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Tu(a.h,p),vu(p,_,d)}function qi(a,d){a.H&&K(a.H,function(p,_){xe(d,_,p)}),a.l&&K({},function(p,_){xe(d,_,p)})}function Am(a,d,p){p=Math.min(a.i.length,p);const _=a.l?h(a.l.Ka,a.l,a):null;e:{var j=a.i;let ae=-1;for(;;){const He=["count="+p];ae==-1?p>0?(ae=j[0].g,He.push("ofs="+ae)):ae=0:He.push("ofs="+ae);let Ee=!0;for(let Qe=0;Qe<p;Qe++){var b=j[Qe].g;const dn=j[Qe].map;if(b-=ae,b<0)ae=Math.max(0,j[Qe].g-100),Ee=!1;else try{b="req"+b+"_"||"";try{var $=dn instanceof Map?dn:Object.entries(dn);for(const[Kr,Yn]of $){let Xn=Yn;l(Yn)&&(Xn=fu(Yn)),He.push(b+Kr+"="+encodeURIComponent(Xn))}}catch(Kr){throw He.push(b+"type="+encodeURIComponent("_badmap")),Kr}}catch{_&&_(dn)}}if(Ee){$=He.join("&");break e}}$=void 0}return a=a.i.splice(0,p),d.G=a,$}function Cm(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;F||y(),U||(F(),U=!0),x.add(d,a),a.A=0}}function Cu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Di(h(a.Da,a),km(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Nm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Di(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),Na(this),Nm(this))};function Nu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Nm(a){a.g=new Gn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=hn(a.na);xe(d,"RID","rpc"),xe(d,"SID",a.M),xe(d,"AID",a.K),xe(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&xe(d,"TO",a.ia),xe(d,"TYPE","xmlhttp"),qi(a,d),a.u&&a.o&&xu(d,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=xa(hn(d)),p.u=null,p.R=!0,nm(p,a)}t.Va=function(){this.C!=null&&(this.C=null,Na(this),Cu(this),yt(19))};function ka(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Pm(a,d){var p=null;if(a.g==d){ka(a),Nu(a),a.g=null;var _=2}else if(Eu(a.h,d))p=d.G,lm(a.h,d),_=1;else return;if(a.I!=0){if(d.o)if(_==1){p=d.u?d.u.length:0,d=Date.now()-d.F;var j=a.D;_=Ta(),gt(_,new Yp(_,p)),Pa(a)}else Cm(a);else if(j=d.m,j==3||j==0&&d.X>0||!(_==1&&AE(a,d)||_==2&&Cu(a)))switch(p&&p.length>0&&(d=a.h,d.i=d.i.concat(p)),j){case 1:Gr(a,5);break;case 4:Gr(a,10);break;case 3:Gr(a,6);break;default:Gr(a,2)}}}function km(a,d){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*d}function Gr(a,d){if(a.j.info("Error code "+d),d==2){var p=h(a.bb,a),_=a.Ua;const j=!_;_=new Kn(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Mi(_,"https"),xa(_),j?wE(_.toString(),p):EE(_.toString(),p)}else yt(2);a.I=0,a.l&&a.l.pa(d),Rm(a),Sm(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Rm(a){if(a.I=0,a.ja=[],a.l){const d=cm(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ja,d),P(a.ja,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.oa()}}function jm(a,d,p){var _=p instanceof Kn?hn(p):new Kn(p);if(_.g!="")d&&(_.g=d+"."+_.g),Li(_,_.u);else{var j=o.location;_=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;const b=new Kn(null);_&&Mi(b,_),d&&(b.g=d),j&&Li(b,j),p&&(b.h=p),_=b}return p=a.G,d=a.wa,p&&d&&xe(_,p,d),xe(_,"VER",a.ka),qi(a,_),_}function Dm(a,d,p){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new be(new Su({ab:p})):new be(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bm(){}t=bm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ra(){}Ra.prototype.g=function(a,d){return new jt(a,d)};function jt(a,d){it.call(this),this.g=new Im(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!I(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!I(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Cs(this)}m(jt,it),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Au(this.g)},jt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=fu(a),a=p);d.i.push(new dE(d.Ya++,a)),d.I==3&&Pa(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,Au(this.g),delete this.g,jt.Z.N.call(this)};function Vm(a){pu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}m(Vm,pu);function Om(){mu.call(this),this.status=1}m(Om,mu);function Cs(a){this.g=a}m(Cs,bm),Cs.prototype.ra=function(){gt(this.g,"a")},Cs.prototype.qa=function(a){gt(this.g,new Vm(a))},Cs.prototype.pa=function(a){gt(this.g,new Om)},Cs.prototype.oa=function(){gt(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,J_=function(){return new Ra},Q_=function(){return Ta()},K_=Hr,wd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ia.NO_ERROR=0,Ia.TIMEOUT=8,Ia.HTTP_ERROR=6,vl=Ia,Xp.COMPLETE="complete",G_=Xp,Gp.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",it.prototype.listen=it.prototype.J,io=Gp,be.prototype.listenOnce=be.prototype.K,be.prototype.getLastError=be.prototype.Ha,be.prototype.getLastErrorCode=be.prototype.ya,be.prototype.getStatus=be.prototype.ca,be.prototype.getResponseJson=be.prototype.La,be.prototype.getResponseText=be.prototype.la,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Fa,W_=be}).apply(typeof Ya<"u"?Ya:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xi="12.8.0";function z3(t){xi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Lf("@firebase/firestore");function Ps(){return ms.logLevel}function W(t,...e){if(ms.logLevel<=ue.DEBUG){const n=e.map(Xf);ms.debug(`Firestore (${xi}): ${t}`,...n)}}function zn(t,...e){if(ms.logLevel<=ue.ERROR){const n=e.map(Xf);ms.error(`Firestore (${xi}): ${t}`,...n)}}function hi(t,...e){if(ms.logLevel<=ue.WARN){const n=e.map(Xf);ms.warn(`Firestore (${xi}): ${t}`,...n)}}function Xf(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Y_(t,r,n)}function Y_(t,e,n){let r=`FIRESTORE (${xi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zn(r),new Error(r)}function ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Y_(e,s,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class $3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H3{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new X_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new ct(e)}}class q3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class W3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new q3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ey(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ey(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=K3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Ed(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return uh(s)===uh(i)?he(s,i):uh(s)?1:-1}return he(t.length,e.length)}const Q3=55296,J3=57343;function uh(t){const e=t.charCodeAt(0);return e>=Q3&&e<=J3}function di(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return he(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),s=gn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gn.extractNumericId(e).compare(gn.extractNumericId(n)):Ed(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class Te extends gn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const Y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends gn{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return Y3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ty}static keyField(){return new tt([Ty])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new q(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new q(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Te.fromString(e))}static fromName(e){return new Q(Te.fromString(e).popFirst(5))}static empty(){return new Q(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e,n){if(!n)throw new q(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X3(t,e,n,r){if(e===!0&&r===!0)throw new q(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Iy(t){if(!Q.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sy(t){if(Q.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function e2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Rt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lc(t);throw new q(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function da(t,e){if(!e2(t))throw new q(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=-62135596800,Ay=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ay);return new Ie(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xy)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ay}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(da(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:$e("string",Ie._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ie(0,0))}static max(){return new re(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=-1;function Z3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new Pr(s,Q.empty(),e)}function eA(t){return new Pr(t.readTime,t.key,qo)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(re.min(),Q.empty(),qo)}static max(){return new Pr(re.max(),Q.empty(),qo)}}function tA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==nA)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ci(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=-1;function Uc(t){return t==null}function nc(t){return t===0&&1/t==-1/0}function iA(t){return typeof t=="number"&&Number.isInteger(t)&&!nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="";function oA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Cy(e)),e=aA(t.get(n),e);return Cy(e)}function aA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case t2:n+="";break;default:n+=i}}return n}function Cy(t){return t+t2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function n2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xa(this.root,e,this.comparator,!0)}}class Xa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??et.RED,this.left=s??et.EMPTY,this.right=i??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new Ge(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return di(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new r2("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const lA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=lA.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="server_timestamp",i2="__type__",o2="__previous_value__",a2="__local_write_time__";function tp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[i2])==null?void 0:r.stringValue)===s2}function zc(t){const e=t.mapValue.fields[o2];return tp(e)?zc(e):e}function Wo(t){const e=kr(t.mapValue.fields[a2].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n,r,s,i,o,l,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f,this.apiKey=m}}const rc="(default)";class Go{constructor(e,n){this.projectId=e,this.database=n||rc}static empty(){return new Go("","")}get isDefaultDatabase(){return this.database===rc}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}function uA(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new q(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="__type__",hA="__max__",Za={mapValue:{}},c2="__vector__",sc="value";function jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tp(t)?4:fA(t)?9007199254740991:dA(t)?10:11:X(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=jr(t);if(n!==jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wo(t).isEqual(Wo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=kr(s.timestampValue),l=kr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Rr(s.bytesValue).isEqual(Rr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Le(s.doubleValue),l=Le(i.doubleValue);return o===l?nc(o)===nc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return di(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ny(o)!==Ny(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!xn(o[u],l[u])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function Ko(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function fi(t,e){if(t===e)return 0;const n=jr(t),r=jr(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Le(i.integerValue||i.doubleValue),u=Le(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ky(t.timestampValue,e.timestampValue);case 4:return ky(Wo(t),Wo(e));case 5:return Ed(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Rr(i),u=Rr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=he(l[h],u[h]);if(f!==0)return f}return he(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=he(Le(i.latitude),Le(o.latitude));return l!==0?l:he(Le(i.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ry(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,S,P,T;const l=i.fields||{},u=o.fields||{},h=(g=l[sc])==null?void 0:g.arrayValue,f=(S=u[sc])==null?void 0:S.arrayValue,m=he(((P=h==null?void 0:h.values)==null?void 0:P.length)||0,((T=f==null?void 0:f.values)==null?void 0:T.length)||0);return m!==0?m:Ry(h,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Za.mapValue&&o===Za.mapValue)return 0;if(i===Za.mapValue)return 1;if(o===Za.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Ed(u[m],f[m]);if(g!==0)return g;const S=fi(l[u[m]],h[f[m]]);if(S!==0)return S}return he(u.length,f.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function ky(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=kr(t),r=kr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function Ry(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=fi(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function pi(t){return Td(t)}function Td(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Td(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Td(n.fields[o])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function _l(t){switch(jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zc(t);return e?16+_l(e):16;case 5:return 2*t.stringValue.length;case 6:return Rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+_l(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return zr(r.fields,(i,o)=>{s+=i.length+_l(o)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function jy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Id(t){return!!t&&"integerValue"in t}function np(t){return!!t&&"arrayValue"in t}function Dy(t){return!!t&&"nullValue"in t}function by(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wl(t){return!!t&&"mapValue"in t}function dA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[l2])==null?void 0:r.stringValue)===c2}function Eo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eo(t.arrayValue.values[n]);return e}return{...t}}function fA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eo(n)}setAll(e){let n=tt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Eo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){zr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Eo(this.value))}}function u2(t){const e=[];return zr(t.fields,(n,r)=>{const s=new tt([n]);if(wl(r)){const i=u2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ht(e,0,re.min(),re.min(),re.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,re.min(),re.min(),At.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,re.min(),re.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.position=e,this.inclusive=n}}function Vy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=fi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Oy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function pA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{}class Be extends h2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gA(e,n,r):n==="array-contains"?new _A(e,r):n==="in"?new wA(e,r):n==="not-in"?new EA(e,r):n==="array-contains-any"?new TA(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yA(e,r):new vA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fi(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(fi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends h2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new cn(e,n)}matches(e){return d2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d2(t){return t.op==="and"}function f2(t){return mA(t)&&d2(t)}function mA(t){for(const e of t.filters)if(e instanceof cn)return!1;return!0}function Sd(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+pi(t.value);if(f2(t))return t.filters.map(e=>Sd(e)).join(",");{const e=t.filters.map(n=>Sd(n)).join(",");return`${t.op}(${e})`}}function p2(t,e){return t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof cn?function(r,s){return s instanceof cn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&p2(o,s.filters[l]),!0):!1}(t,e):void X(19439)}function m2(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${pi(n.value)}`}(t):t instanceof cn?function(n){return n.op.toString()+" {"+n.getFilters().map(m2).join(" ,")+"}"}(t):"Filter"}class gA extends Be{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class yA extends Be{constructor(e,n){super(e,"in",n),this.keys=g2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vA extends Be{constructor(e,n){super(e,"not-in",n),this.keys=g2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function g2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class _A extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return np(n)&&Ko(n.arrayValue,this.value)}}class wA extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ko(this.value.arrayValue,n)}}class EA extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ko(this.value.arrayValue,n)}}class TA extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ko(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function My(t,e=null,n=[],r=[],s=null,i=null,o=null){return new IA(t,e,n,r,s,i,o)}function rp(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Uc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pi(r)).join(",")),e.Te=n}return e.Te}function sp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!p2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Oy(t.startAt,e.startAt)&&Oy(t.endAt,e.endAt)}function xd(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function SA(t,e,n,r,s,i,o,l){return new fa(t,e,n,r,s,i,o,l)}function Bc(t){return new fa(t)}function Ly(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xA(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function y2(t){return t.collectionGroup!==null}function To(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ge(tt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new oc(i,r))}),n.has(tt.keyField().canonicalString())||e.Ie.push(new oc(tt.keyField(),r))}return e.Ie}function En(t){const e=ie(t);return e.Ee||(e.Ee=AA(e,To(t))),e.Ee}function AA(t,e){if(t.limitType==="F")return My(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new oc(s.field,i)});const n=t.endAt?new ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ic(t.startAt.position,t.startAt.inclusive):null;return My(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ad(t,e){const n=t.filters.concat([e]);return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cd(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $c(t,e){return sp(En(t),En(e))&&t.limitType===e.limitType}function v2(t){return`${rp(En(t))}|lt:${t.limitType}`}function ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>m2(s)).join(", ")}]`),Uc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>pi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>pi(s)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function Hc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of To(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Vy(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,To(r),s)||r.endAt&&!function(o,l,u){const h=Vy(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,To(r),s))}(t,e)}function CA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _2(t){return(e,n)=>{let r=!1;for(const s of To(t)){const i=NA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function NA(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?fi(u,h):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return n2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new De(Q.comparator);function Bn(){return PA}const w2=new De(Q.comparator);function oo(...t){let e=w2;for(const n of t)e=e.insert(n.key,n);return e}function E2(t){let e=w2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ns(){return Io()}function T2(){return Io()}function Io(){return new ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const kA=new De(Q.comparator),RA=new Ge(Q.comparator);function de(...t){let e=RA;for(const n of t)e=e.add(n);return e}const jA=new Ge(he);function DA(){return jA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function I2(t){return{integerValue:""+t}}function S2(t,e){return iA(e)?I2(e):ip(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function bA(t,e,n){return t instanceof Qo?function(s,i){const o={fields:{[i2]:{stringValue:s2},[a2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&tp(i)&&(i=zc(i)),i&&(o.fields[o2]=i),{mapValue:o}}(n,e):t instanceof Jo?A2(t,e):t instanceof Yo?C2(t,e):function(s,i){const o=x2(s,i),l=Fy(o)+Fy(s.Ae);return Id(o)&&Id(s.Ae)?I2(l):ip(s.serializer,l)}(t,e)}function VA(t,e,n){return t instanceof Jo?A2(t,e):t instanceof Yo?C2(t,e):n}function x2(t,e){return t instanceof Xo?function(r){return Id(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qo extends qc{}class Jo extends qc{constructor(e){super(),this.elements=e}}function A2(t,e){const n=N2(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Yo extends qc{constructor(e){super(),this.elements=e}}function C2(t,e){let n=N2(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Xo extends qc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Fy(t){return Le(t.integerValue||t.doubleValue)}function N2(t){return np(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.field=e,this.transform=n}}function OA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Jo&&s instanceof Jo||r instanceof Yo&&s instanceof Yo?di(r.elements,s.elements,xn):r instanceof Xo&&s instanceof Xo?xn(r.Ae,s.Ae):r instanceof Qo&&s instanceof Qo}(t.transform,e.transform)}class MA{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function El(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wc{}function k2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new op(t.key,Gt.none()):new pa(t.key,t.data,Gt.none());{const n=t.data,r=At.empty();let s=new Ge(tt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Br(t.key,r,new Ot(s.toArray()),Gt.none())}}function LA(t,e,n){t instanceof pa?function(s,i,o){const l=s.value.clone(),u=zy(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Br?function(s,i,o){if(!El(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=zy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(R2(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function So(t,e,n,r){return t instanceof pa?function(i,o,l,u){if(!El(i.precondition,o))return l;const h=i.value.clone(),f=By(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Br?function(i,o,l,u){if(!El(i.precondition,o))return l;const h=By(i.fieldTransforms,u,o),f=o.data;return f.setAll(R2(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return El(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function FA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=x2(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function Uy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&di(r,s,(i,o)=>OA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends Wc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Br extends Wc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function R2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zy(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,VA(o,l,n[s]))}return r}function By(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bA(i,o,e))}return r}class op extends Wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UA extends Wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=So(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=So(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=T2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=k2(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&di(this.mutations,e.mutations,(n,r)=>Uy(n,r))&&di(this.baseMutations,e.baseMutations,(n,r)=>Uy(n,r))}}class ap{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return kA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ap(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,fe;function HA(t){switch(t){case M.OK:return X(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function j2(t){if(t===void 0)return zn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ue.OK:return M.OK;case Ue.CANCELLED:return M.CANCELLED;case Ue.UNKNOWN:return M.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return M.INTERNAL;case Ue.UNAVAILABLE:return M.UNAVAILABLE;case Ue.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ue.NOT_FOUND:return M.NOT_FOUND;case Ue.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ue.ABORTED:return M.ABORTED;case Ue.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ue.DATA_LOSS:return M.DATA_LOSS;default:return X(39323,{code:t})}}(fe=Ue||(Ue={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new Sr([4294967295,4294967295],0);function $y(t){const e=qA().encode(t),n=new q_;return n.update(e),new Uint8Array(n.digest())}function Hy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Sr([n,r],0),new Sr([s,i],0)]}class lp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ao(`Invalid padding: ${n}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ao(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Sr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Sr.fromNumber(r)));return s.compare(WA)===1&&(s=new Sr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$y(e),[r,s]=Hy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=$y(e),[r,s]=Hy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ao extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gc(re.min(),s,new De(he),Bn(),de())}}class ma{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ma(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class D2{constructor(e,n){this.targetId=e,this.Ce=n}}class b2{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class qy{constructor(){this.ve=0,this.Fe=Wy(),this.Me=st.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),r=de();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X(38017,{changeType:i})}}),new ma(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Wy()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class GA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bn(),this.He=el(),this.Je=el(),this.Ze=new De(he)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(xd(i))if(r===0){const o=new Q(i.path);this.et(n,o,ht.newNoDocument(o,re.min()))}else ye(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Rr(r).toUint8Array()}catch(u){if(u instanceof r2)return hi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lp(o,s,i)}catch(u){return hi(u instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&xd(l.target)){const u=new Q(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ht.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=de();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Gc(e,n,this.Ze,this.je,r);return this.je=Bn(),this.He=el(),this.Je=el(),this.Ze=new De(he),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new qy,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ge(he),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ge(he),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qy),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function el(){return new De(Q.comparator)}function Wy(){return new De(Q.comparator)}const KA={asc:"ASCENDING",desc:"DESCENDING"},QA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JA={and:"AND",or:"OR"};class YA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nd(t,e){return t.useProto3Json||Uc(e)?e:{value:e}}function ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XA(t,e){return ac(t,e.toTimestamp())}function Tn(t){return ye(!!t,49232),re.fromTimestamp(function(n){const r=kr(n);return new Ie(r.seconds,r.nanos)}(t))}function cp(t,e){return Pd(t,e).canonicalString()}function Pd(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function O2(t){const e=Te.fromString(t);return ye(z2(e),10190,{key:e.toString()}),e}function kd(t,e){return cp(t.databaseId,e.path)}function hh(t,e){const n=O2(e);if(n.get(1)!==t.databaseId.projectId)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(L2(n))}function M2(t,e){return cp(t.databaseId,e)}function ZA(t){const e=O2(t);return e.length===4?Te.emptyPath():L2(e)}function Rd(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L2(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Gy(t,e,n){return{name:kd(t,e),fields:n.value.mapValue.fields}}function eC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:X(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(ye(f===void 0||typeof f=="string",58123),st.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),st.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?M.UNKNOWN:j2(h.code);return new q(f,h.message||"")}(o);n=new b2(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=hh(t,r.document.name),i=Tn(r.document.updateTime),o=r.document.createTime?Tn(r.document.createTime):re.min(),l=new At({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(s,i,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Tl(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=hh(t,r.document),i=r.readTime?Tn(r.readTime):re.min(),o=ht.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Tl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=hh(t,r.document),i=r.removedTargetIds||[];n=new Tl([],i,s,null)}else{if(!("filter"in e))return X(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new $A(s,i),l=r.targetId;n=new D2(l,o)}}return n}function tC(t,e){let n;if(e instanceof pa)n={update:Gy(t,e.key,e.value)};else if(e instanceof op)n={delete:kd(t,e.key)};else if(e instanceof Br)n={update:Gy(t,e.key,e.data),updateMask:uC(e.fieldMask)};else{if(!(e instanceof UA))return X(16599,{dt:e.type});n={verify:kd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Qo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xo)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:XA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X(27497)}(t,e.precondition)),n}function nC(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Tn(s.updateTime):Tn(i);return o.isEqual(re.min())&&(o=Tn(i)),new MA(o,s.transformResults||[])}(n,e))):[]}function rC(t,e){return{documents:[M2(t,e.path)]}}function sC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=M2(t,s);const i=function(h){if(h.length!==0)return U2(cn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:Rs(g.field),direction:aC(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Nd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function iC(t){let e=ZA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=F2(m);return g instanceof cn&&f2(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(P){return new oc(js(P.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Uc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,S=m.values||[];return new ic(S,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,S=m.values||[];return new ic(S,g)}(n.endAt)),SA(e,s,o,i,l,"F",u,h)}function oC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function F2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=js(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=js(n.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=js(n.unaryFilter.field);return Be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=js(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return Be.create(js(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cn.create(n.compositeFilter.filters.map(r=>F2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function aC(t){return KA[t]}function lC(t){return QA[t]}function cC(t){return JA[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function js(t){return tt.fromServerFormat(t.fieldPath)}function U2(t){return t instanceof Be?function(n){if(n.op==="=="){if(by(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(Dy(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(by(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(Dy(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:lC(n.op),value:n.value}}}(t):t instanceof cn?function(n){const r=n.getFilters().map(s=>U2(s));return r.length===1?r[0]:{compositeFilter:{op:cC(n.op),filters:r}}}(t):X(54877,{filter:t})}function uC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function z2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function B2(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r,s,i=re.min(),o=re.min(),l=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.yt=e}}function dC(t){const e=iC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.Sn=new pC}addToCollectionParentIndex(e,n){return this.Sn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Pr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class pC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$2=41943040;class St{static withCacheSize(e){return new St(e,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */St.DEFAULT_COLLECTION_PERCENTILE=10,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,St.DEFAULT=new St($2,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),St.DISABLED=new St(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new mi(0)}static ar(){return new mi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LruGarbageCollector",mC=1048576;function Jy([t,e],[n,r]){const s=he(t,n);return s===0?he(e,r):s}class gC{constructor(e){this.Pr=e,this.buffer=new Ge(Jy),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Jy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){W(Qy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ci(n)?W(Qy,"Ignoring IndexedDB error during garbage collection: ",n):await Ai(n)}await this.Ar(3e5)})}}class vC{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Fc.ce);const r=new gC(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Ky)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ky):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Ps()<=ue.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function _C(t,e){return new vC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.changes=new ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&So(r.mutation,s,Ot.empty(),Ie.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const s=ns();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=oo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Bn();const o=Io(),l=function(){return Io()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Br)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),So(f.mutation,h,f.mutation.getFieldMask(),Ie.now())):o.set(h.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>l.set(h,new EC(f,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Io();let s=new De((o,l)=>o-l),i=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Ot.empty();f=l.applyToLocalView(h,f),r.set(u,f);const m=(s.get(l.batchId)||de()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,m=T2();f.forEach(g=>{if(!i.has(g)){const S=k2(n.get(g),r.get(g));S!==null&&m.set(g,S),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return xA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):y2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(ns());let l=qo,u=i;return o.next(h=>L.forEach(h,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,de())).next(f=>({batchId:l,changes:E2(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=oo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=oo();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const h=function(m,g){return new fa(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,ht.newInvalidDocument(f)))});let l=oo();return o.forEach((u,h)=>{const f=i.get(u);f!==void 0&&So(f.mutation,h,Ot.empty(),Ie.now()),Hc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return L.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:dC(s.bundledQuery),readTime:Tn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.overlays=new De(Q.comparator),this.Lr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ns();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=ns(),i=n.length+1,o=new Q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=ns(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=ns(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return L.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BA(n,r));let i=this.Lr.get(n);i===void 0&&(i=de(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.kr=new Ge(Je.Kr),this.qr=new Ge(Je.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Je(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new Q(new Te([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Q(new Te([])),r=new Je(n,e),s=new Je(n,e+1);let i=de();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Q.comparator(e.key,n.key)||he(e.Hr,n.Hr)}static Ur(e,n){return he(e.Hr,n.Hr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ge(Je.Kr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zA(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Je(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ep:this.Yn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(he);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),L.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new Je(new Q(i),0);let l=new Ge(he);return this.Jr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Hr)),!0)},o),L.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return L.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Je(n,0),s=this.Jr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.ti=e,this.docs=function(){return new De(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bn();const o=n.path,l=new Q(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||tA(eA(f),r)<=0||(s.has(f.key)||Hc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X(9500)}ni(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NC(this)}getSize(e){return L.resolve(this.size)}}class NC extends wC{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.persistence=e,this.ri=new ws(n=>rp(n),sp),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.ii=0,this.si=new up,this.targetCount=0,this.oi=mi._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),L.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new mi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.lr(n),L.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n){this._i={},this.overlays={},this.ai=new Fc(0),this.ui=!1,this.ui=!0,this.ci=new xC,this.referenceDelegate=e(this),this.li=new PC(this),this.indexManager=new fC,this.remoteDocumentCache=function(s){return new CC(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new hC(n),this.Pi=new IC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new AC(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new kC(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return L.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class kC extends rA{constructor(e){super(),this.currentSequenceNumber=e}}class hp{constructor(e){this.persistence=e,this.Ri=new up,this.Ai=null}static Vi(e){return new hp(e)}get di(){if(this.Ai)return this.Ai;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,r=>{const s=Q.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class lc{constructor(e,n){this.persistence=e,this.fi=new ws(r=>oA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=_C(this,n)}static Vi(e,n){return new lc(e,n)}Ti(){}Ii(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return L.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),L.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_l(e.data.value)),n}wr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=de(),s=de();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new dp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return EI()?8:sA(ft())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new RC;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Ps()<=ue.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Ps()<=ue.DEBUG&&W("QueryEngine","Query:",ks(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ps()<=ue.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):L.resolve())}gs(e,n){if(Ly(n))return L.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cd(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=de(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ss(n,h,o,u.readTime)?this.gs(e,Cd(n,null,"F")):this.Ds(e,h,n,u)}))})))}ps(e,n,r,s){return Ly(n)||s.isEqual(re.min())?L.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?L.resolve(null):(Ps()<=ue.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ks(n)),this.Ds(e,o,n,Z3(s,qo)).next(l=>l))})}bs(e,n){let r=new Ge(_2(e));return n.forEach((s,i)=>{Hc(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Ps()<=ue.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ks(n)),this.fs.getDocumentsMatchingQuery(e,n,Pr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="LocalStore",DC=3e8;class bC{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new De(he),this.Fs=new ws(i=>rp(i),sp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function VC(t,e,n,r){return new bC(t,e,n,r)}async function q2(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=de();for(const h of s){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ns:h,removedBatchIds:o,addedBatchIds:l}))})})}function OC(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const m=h.batch,g=m.keys();let S=L.resolve();return g.forEach(P=>{S=S.next(()=>f.getEntry(u,P)).next(T=>{const k=h.docVersions.get(P);ye(k!==null,48541),T.version.compareTo(k)<0&&(m.applyToRemoteDocument(T,h),T.isValidDocument()&&(T.setReadTime(h.commitVersion),f.addEntry(T)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=de();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function W2(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function MC(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.li.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.li.addMatchingKeys(i,f.addedDocuments,m)));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(st.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),s=s.insert(m,S),function(T,k,v){return T.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=DC?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,S,f)&&l.push(n.li.updateTargetData(i,S))});let u=Bn(),h=de();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(LC(i,o,e.documentUpdates).next(f=>{u=f.Bs,h=f.Ls})),!r.isEqual(re.min())){const f=n.li.getLastRemoteSnapshotVersion(i).next(m=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.vs=s,i))}function LC(t,e,n){let r=de(),s=de();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W(fp,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Bs:o,Ls:s}})}function FC(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ep),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function UC(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function jd(t,e,n){const r=ie(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ci(o))throw o;W(fp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Yy(t,e,n){const r=ie(t);let s=re.min(),i=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const m=ie(u),g=m.Fs.get(f);return g!==void 0?L.resolve(m.vs.get(g)):m.li.getTargetData(h,f)}(r,o,En(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:de())).next(l=>(zC(r,CA(e),l),{documents:l,ks:i})))}function zC(t,e,n){let r=t.Ms.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Xy{constructor(){this.activeTargetIds=DA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BC{constructor(){this.vo=new Xy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Xy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="ConnectivityMonitor";class e1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){W(Zy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){W(Zy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=null;function Dd(){return tl===null?tl=function(){return 268435456+Math.round(2147483648*Math.random())}():tl++,"0x"+tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="RestConnection",HC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class qC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===rc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Dd(),l=this.Qo(e,n.toUriEncodedString());W(dh,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:h}=new URL(l),f=Ei(h);return this.zo(e,l,u,r,f).then(m=>(W(dh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw hi(dh,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=HC[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection",eo=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class ei extends qC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ei.c_){const e=Q_();eo(e,K_.STAT_EVENT,n=>{n.stat===wd.PROXY?W(lt,"STAT_EVENT: detected buffering proxy"):n.stat===wd.NOPROXY&&W(lt,"STAT_EVENT: detected no buffering proxy")}),ei.c_=!0}}zo(e,n,r,s,i){const o=Dd();return new Promise((l,u)=>{const h=new W_;h.setWithCredentials(!0),h.listenOnce(G_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case vl.NO_ERROR:const m=h.getResponseJson();W(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case vl.TIMEOUT:W(lt,`RPC '${e}' ${o} timed out`),u(new q(M.DEADLINE_EXCEEDED,"Request time out"));break;case vl.HTTP_ERROR:const g=h.getStatus();if(W(lt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const P=S==null?void 0:S.error;if(P&&P.status&&P.message){const T=function(v){const E=v.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(E)>=0?E:M.UNKNOWN}(P.status);u(new q(T,P.message))}else u(new q(M.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new q(M.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{W(lt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);W(lt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",f,r,15)})}T_(e,n,r){const s=Dd(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");W(lt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let m=!1,g=!1;const S=new WC({Ho:P=>{g?W(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(W(lt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),W(lt,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Jo:()=>f.close()});return eo(f,io.EventType.OPEN,()=>{g||(W(lt,`RPC '${e}' stream ${s} transport opened.`),S.i_())}),eo(f,io.EventType.CLOSE,()=>{g||(g=!0,W(lt,`RPC '${e}' stream ${s} transport closed`),S.o_(),this.E_(f))}),eo(f,io.EventType.ERROR,P=>{g||(g=!0,hi(lt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),S.o_(new q(M.UNAVAILABLE,"The operation could not be completed")))}),eo(f,io.EventType.MESSAGE,P=>{var T;if(!g){const k=P.data[0];ye(!!k,16349);const v=k,E=(v==null?void 0:v.error)||((T=v[0])==null?void 0:T.error);if(E){W(lt,`RPC '${e}' stream ${s} received error:`,E);const C=E.status;let D=function(x){const y=Ue[x];if(y!==void 0)return j2(y)}(C),F=E.message;D===void 0&&(D=M.INTERNAL,F="Unknown error status: "+C+" with message "+E.message),g=!0,S.o_(new q(D,F)),f.close()}else W(lt,`RPC '${e}' stream ${s} received:`,k),S.__(k)}}),ei.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return J_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){return new ei(t)}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return new YA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.c_=!1;class G2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="PersistentStream";class K2{constructor(e,n,r,s,i,o,l,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new G2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new q(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(t1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(W(t1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KC extends K2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eC(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Tn(o.readTime):re.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Rd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=xd(u)?{documents:rC(i,u)}:{query:sC(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=V2(i,o.resumeToken);const h=Nd(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(re.min())>0){l.readTime=ac(i,o.snapshotVersion.toTimestamp());const h=Nd(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=oC(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Rd(this.serializer),n.removeTarget=e,this.K_(n)}}class QC extends K2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=nC(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Rd(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tC(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{}class YC extends JC{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Pd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,Pd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function XC(t,e,n,r){return new YC(t,e,n,r)}class ZC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zn(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="RemoteStore";class e6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Es(this)&&(W(gs,"Restarting streams for network reachability change."),await async function(u){const h=ie(u);h.Ea.add(4),await ga(h),h.Va.set("Unknown"),h.Ea.delete(4),await Qc(h)}(this))})}),this.Va=new ZC(r,s)}}async function Qc(t){if(Es(t))for(const e of t.Ra)await e(!0)}async function ga(t){for(const e of t.Ra)await e(!1)}function Q2(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yp(n)?gp(n):Ni(n).O_()&&mp(n,e))}function pp(t,e){const n=ie(t),r=Ni(n);n.Ia.delete(e),r.O_()&&J2(n,e),n.Ia.size===0&&(r.O_()?r.L_():Es(n)&&n.Va.set("Unknown"))}function mp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ni(t).Z_(e)}function J2(t,e){t.da.$e(e),Ni(t).X_(e)}function gp(t){t.da=new GA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ni(t).start(),t.Va.ua()}function yp(t){return Es(t)&&!Ni(t).x_()&&t.Ia.size>0}function Es(t){return ie(t).Ea.size===0}function Y2(t){t.da=void 0}async function t6(t){t.Va.set("Online")}async function n6(t){t.Ia.forEach((e,n)=>{mp(t,e)})}async function r6(t,e){Y2(t),yp(t)?(t.Va.ha(e),gp(t)):t.Va.set("Unknown")}async function s6(t,e,n){if(t.Va.set("Online"),e instanceof b2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){W(gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cc(t,r)}else if(e instanceof Tl?t.da.Xe(e):e instanceof D2?t.da.st(e):t.da.tt(e),!n.isEqual(re.min()))try{const r=await W2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(st.EMPTY_BYTE_STRING,f.snapshotVersion)),J2(i,u);const m=new hr(f.target,u,h,f.sequenceNumber);mp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(gs,"Failed to raise snapshot:",r),await cc(t,r)}}async function cc(t,e,n){if(!Ci(e))throw e;t.Ea.add(1),await ga(t),t.Va.set("Offline"),n||(n=()=>W2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(gs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qc(t)})}function X2(t,e){return e().catch(n=>cc(t,n,e))}async function Jc(t){const e=ie(t),n=Dr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ep;for(;i6(e);)try{const s=await FC(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,o6(e,s)}catch(s){await cc(e,s)}Z2(e)&&ew(e)}function i6(t){return Es(t)&&t.Ta.length<10}function o6(t,e){t.Ta.push(e);const n=Dr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function Z2(t){return Es(t)&&!Dr(t).x_()&&t.Ta.length>0}function ew(t){Dr(t).start()}async function a6(t){Dr(t).ra()}async function l6(t){const e=Dr(t);for(const n of t.Ta)e.ea(n.mutations)}async function c6(t,e,n){const r=t.Ta.shift(),s=ap.from(r,e,n);await X2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Jc(t)}async function u6(t,e){e&&Dr(t).Y_&&await async function(r,s){if(function(o){return HA(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();Dr(r).B_(),await X2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Jc(r)}}(t,e),Z2(t)&&ew(t)}async function n1(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),W(gs,"RemoteStore received new credentials");const r=Es(n);n.Ea.add(3),await ga(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qc(n)}async function h6(t,e){const n=ie(t);e?(n.Ea.delete(2),await Qc(n)):e||(n.Ea.add(2),await ga(n),n.Va.set("Unknown"))}function Ni(t){return t.ma||(t.ma=function(n,r,s){const i=ie(n);return i.sa(),new KC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:t6.bind(null,t),Yo:n6.bind(null,t),t_:r6.bind(null,t),J_:s6.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),yp(t)?gp(t):t.Va.set("Unknown")):(await t.ma.stop(),Y2(t))})),t.ma}function Dr(t){return t.fa||(t.fa=function(n,r,s){const i=ie(n);return i.sa(),new QC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:a6.bind(null,t),t_:u6.bind(null,t),ta:l6.bind(null,t),na:c6.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Jc(t)):(await t.fa.stop(),t.Ta.length>0&&(W(gs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new vp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(t,e){if(zn("AsyncQueue",`${e}: ${t}`),Ci(t))return new q(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{static emptySet(e){return new ti(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=oo(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ti)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ti;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.ga=new De(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class gi{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new gi(e,n,ti.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class f6{constructor(){this.queries=s1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=s1(),i.forEach((o,l)=>{for(const u of l.ba)u.onError(r)})})(this,new q(M.ABORTED,"Firestore shutting down"))}}function s1(){return new ws(t=>v2(t),$c)}async function wp(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new d6,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=_p(o,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Tp(n)}async function Ep(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function p6(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&Tp(n)}function m6(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Tp(t){t.Ca.forEach(e=>{e.next()})}var bd,i1;(i1=bd||(bd={})).Ma="default",i1.Cache="cache";class Ip{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new gi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.key=e}}class nw{constructor(e){this.key=e}}class g6{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=de(),this.mutatedKeys=de(),this.eu=_2(e),this.tu=new ti(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new r1,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),S=Hc(this.query,m)?m:null,P=!!g&&this.mutatedKeys.has(g.key),T=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let k=!1;g&&S?g.data.isEqual(S.data)?P!==T&&(r.track({type:3,doc:S}),k=!0):this.su(g,S)||(r.track({type:2,doc:S}),k=!0,(u&&this.eu(S,u)>0||h&&this.eu(S,h)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),k=!0):g&&!S&&(r.track({type:1,doc:g}),k=!0,(u||h)&&(l=!0)),k&&(S?(o=o.add(S),i=T?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(S,P){const T=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Vt:k})}};return T(S)-T(P)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,h=u!==this.Xa;return this.Xa=u,o.length!==0||h?{snapshot:new gi(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=de(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new nw(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new tw(r))}),n}cu(e){this.Za=e.ks,this.Ya=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Sp="SyncEngine";class y6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class v6{constructor(e){this.key=e,this.hu=!1}}class _6{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ws(l=>v2(l),$c),this.Iu=new Map,this.Eu=new Set,this.Ru=new De(Q.comparator),this.Au=new Map,this.Vu=new up,this.du={},this.mu=new Map,this.fu=mi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function w6(t,e,n=!0){const r=lw(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await rw(r,e,n,!0),s}async function E6(t,e){const n=lw(t);await rw(n,e,!0,!1)}async function rw(t,e,n,r){const s=await UC(t.localStore,En(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await T6(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Q2(t.remoteStore,s),l}async function T6(t,e,n,r,s){t.pu=(m,g,S)=>async function(T,k,v,E){let C=k.view.ru(v);C.Ss&&(C=await Yy(T.localStore,k.query,!1).then(({documents:x})=>k.view.ru(x,C)));const D=E&&E.targetChanges.get(k.targetId),F=E&&E.targetMismatches.get(k.targetId)!=null,U=k.view.applyChanges(C,T.isPrimaryClient,D,F);return a1(T,k.targetId,U.au),U.snapshot}(t,m,g,S);const i=await Yy(t.localStore,e,!0),o=new g6(e,i.ks),l=o.ru(i.documents),u=ma.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);a1(t,n,h.au);const f=new y6(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function I6(t,e,n){const r=ie(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!$c(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await jd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&pp(r.remoteStore,s.targetId),Vd(r,s.targetId)}).catch(Ai)):(Vd(r,s.targetId),await jd(r.localStore,s.targetId,!0))}async function S6(t,e){const n=ie(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pp(n.remoteStore,r.targetId))}async function x6(t,e,n){const r=j6(t);try{const s=await function(o,l){const u=ie(o),h=Ie.now(),f=l.reduce((S,P)=>S.add(P.key),de());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let P=Bn(),T=de();return u.xs.getEntries(S,f).next(k=>{P=k,P.forEach((v,E)=>{E.isValidDocument()||(T=T.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,P)).next(k=>{m=k;const v=[];for(const E of l){const C=FA(E,m.get(E.key).overlayedDocument);C!=null&&v.push(new Br(E.key,C,u2(C.value.mapValue),Gt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,v,l)}).next(k=>{g=k;const v=k.applyToLocalDocumentSet(m,T);return u.documentOverlayCache.saveOverlays(S,k.batchId,v)})}).then(()=>({batchId:g.batchId,changes:E2(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.du[o.currentUser.toKey()];h||(h=new De(he)),h=h.insert(l,u),o.du[o.currentUser.toKey()]=h}(r,s.batchId,n),await ya(r,s.changes),await Jc(r.remoteStore)}catch(s){const i=_p(s,"Failed to persist write");n.reject(i)}}async function sw(t,e){const n=ie(t);try{const r=await MC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ye(o.hu,14607):s.removedDocuments.size>0&&(ye(o.hu,42227),o.hu=!1))}),await ya(n,r,e)}catch(r){await Ai(r)}}function o1(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ie(o);u.onlineState=l;let h=!1;u.queries.forEach((f,m)=>{for(const g of m.ba)g.va(l)&&(h=!0)}),h&&Tp(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function A6(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new De(Q.comparator);o=o.insert(i,ht.newNoDocument(i,re.min()));const l=de().add(i),u=new Gc(re.min(),new Map,new De(he),o,l);await sw(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),xp(r)}else await jd(r.localStore,e,!1).then(()=>Vd(r,e,n)).catch(Ai)}async function C6(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await OC(n.localStore,e);ow(n,r,null),iw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ya(n,s)}catch(s){await Ai(s)}}async function N6(t,e,n){const r=ie(t);try{const s=await function(o,l){const u=ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ye(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);ow(r,e,n),iw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ya(r,s)}catch(s){await Ai(s)}}function iw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function ow(t,e,n){const r=ie(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Vd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||aw(t,r)})}function aw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(pp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),xp(t))}function a1(t,e,n){for(const r of n)r instanceof tw?(t.Vu.addReference(r.key,e),P6(t,r)):r instanceof nw?(W(Sp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||aw(t,r.key)):X(19791,{wu:r})}function P6(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(W(Sp,"New document in limbo: "+n),t.Eu.add(r),xp(t))}function xp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new v6(n)),t.Ru=t.Ru.insert(n,r),Q2(t.remoteStore,new hr(En(Bc(n.path)),r,"TargetPurposeLimboResolution",Fc.ce))}}async function ya(t,e,n){const r=ie(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=dp.Es(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(u,h){const f=ie(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,g=>L.forEach(g.Ts,S=>f.persistence.referenceDelegate.addReference(m,g.targetId,S)).next(()=>L.forEach(g.Is,S=>f.persistence.referenceDelegate.removeReference(m,g.targetId,S)))))}catch(m){if(!Ci(m))throw m;W(fp,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const S=f.vs.get(g),P=S.snapshotVersion,T=S.withLastLimboFreeSnapshotVersion(P);f.vs=f.vs.insert(g,T)}}}(r.localStore,i))}async function k6(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){W(Sp,"User change. New user:",e.toKey());const r=await q2(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new q(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ya(n,r.Ns)}}function R6(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return de().add(r.key);{let s=de();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function lw(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A6.bind(null,e),e.Pu.J_=p6.bind(null,e.eventManager),e.Pu.yu=m6.bind(null,e.eventManager),e}function j6(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N6.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VC(this.persistence,new jC,e.initialUser,this.serializer)}Cu(e){return new H2(hp.Vi,this.serializer)}Du(e){return new BC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class D6 extends uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ye(this.persistence.referenceDelegate instanceof lc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?St.withCacheSize(this.cacheSizeBytes):St.DEFAULT;return new H2(r=>lc.Vi(r,n),this.serializer)}}class Od{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=k6.bind(null,this.syncEngine),await h6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new f6}()}createDatastore(e){const n=Kc(e.databaseInfo.databaseId),r=GC(e.databaseInfo);return XC(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new e6(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>o1(this.syncEngine,n,0),function(){return e1.v()?new e1:new $C}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,f){const m=new _6(s,i,o,l,u,h);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);W(gs,"RemoteStore shutting down."),i.Ea.add(5),await ga(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Od.provider={build:()=>new Od};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="FirestoreClient";class b6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=Zf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(br,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(br,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_p(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ph(t,e){t.asyncQueue.verifyOperationInProgress(),W(br,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await q2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await V6(t);W(br,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>n1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>n1(e.remoteStore,s)),t._onlineComponents=e}async function V6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(br,"Using user provided OfflineComponentProvider");try{await ph(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;hi("Error using user provided cache. Falling back to memory cache: "+n),await ph(t,new uc)}}else W(br,"Using default OfflineComponentProvider"),await ph(t,new D6(void 0));return t._offlineComponents}async function cw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(br,"Using user provided OnlineComponentProvider"),await l1(t,t._uninitializedComponentsProvider._online)):(W(br,"Using default OnlineComponentProvider"),await l1(t,new Od))),t._onlineComponents}function O6(t){return cw(t).then(e=>e.syncEngine)}async function hc(t){const e=await cw(t),n=e.eventManager;return n.onListen=w6.bind(null,e.syncEngine),n.onUnlisten=I6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=E6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=S6.bind(null,e.syncEngine),n}function M6(t,e,n,r){const s=new Ap(r),i=new Ip(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>wp(await hc(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>Ep(await hc(t),i))}}function L6(t,e,n={}){const r=new bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const f=new Ap({next:g=>{f.Nu(),o.enqueueAndForget(()=>Ep(i,m));const S=g.docs.has(l);!S&&g.fromCache?h.reject(new q(M.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&g.fromCache&&u&&u.source==="server"?h.reject(new q(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Ip(Bc(l.path),f,{includeMetadataChanges:!0,Ka:!0});return wp(i,m)}(await hc(t),t.asyncQueue,e,n,r)),r.promise}function F6(t,e,n={}){const r=new bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const f=new Ap({next:g=>{f.Nu(),o.enqueueAndForget(()=>Ep(i,m)),g.fromCache&&u.source==="server"?h.reject(new q(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Ip(l,f,{includeMetadataChanges:!0,Ka:!0});return wp(i,m)}(await hc(t),t.asyncQueue,e,n,r)),r.promise}function U6(t,e){const n=new bn;return t.asyncQueue.enqueueAndForget(async()=>x6(await O6(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="ComponentProvider",c1=new Map;function B6(t,e,n,r,s){return new cA(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,uw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firestore.googleapis.com",u1=!0;class h1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hw,this.ssl=u1}else this.host=e.host,this.ssl=e.ssl??u1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mC)throw new q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B3;switch(r.type){case"firstParty":return new W3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=c1.get(n);r&&(W(z6,"Removing Datastore"),c1.delete(n),r.terminate())}(this),Promise.resolve()}}function $6(t,e,n,r={}){var h;t=Rt(t,Yc);const s=Ei(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(r_(`https://${l}`),s_("Firestore",!0)),i.host!==hw&&i.host!==l&&hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!ds(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=ct.MOCK_USER;else{f=dI(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new q(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ct(g)}t._authCredentials=new $3(new X_(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class Oe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oe(this.firestore,e,this._key)}toJSON(){return{type:Oe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(da(n,Oe._jsonSchema))return new Oe(e,r||null,new Q(Te.fromString(n.referencePath)))}}Oe._jsonSchemaVersion="firestore/documentReference/1.0",Oe._jsonSchema={type:$e("string",Oe._jsonSchemaVersion),referencePath:$e("string")};class xr extends Ts{constructor(e,n,r){super(e,n,Bc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new Q(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function un(t,e,...n){if(t=Ke(t),Z_("collection","path",e),t instanceof Yc){const r=Te.fromString(e,...n);return Sy(r),new xr(t,null,r)}{if(!(t instanceof Oe||t instanceof xr))throw new q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Sy(r),new xr(t.firestore,null,r)}}function Et(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=Zf.newId()),Z_("doc","path",e),t instanceof Yc){const r=Te.fromString(e,...n);return Iy(r),new Oe(t,null,new Q(r))}{if(!(t instanceof Oe||t instanceof xr))throw new q(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Iy(r),new Oe(t.firestore,t instanceof xr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="AsyncQueue";class f1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G2(this,"async_queue_retry"),this._c=()=>{const r=fh();r&&W(d1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new bn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ci(e))throw e;W(d1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,zn("INTERNAL UNHANDLED ERROR: ",p1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=vp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:p1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function p1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class $n extends Yc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new f1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f1(e),this._firestoreClient=void 0,await e}}}function H6(t,e){const n=typeof t=="object"?t:l_(),r=typeof t=="string"?t:rc,s=Uf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=uI("firestore");i&&$6(s,...i)}return s}function Xc(t){if(t._terminated)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q6(t),t._firestoreClient}function q6(t){var r,s,i,o;const e=t._freezeSettings(),n=B6(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new b6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(st.fromBase64String(e))}catch(n){throw new q(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ht(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ht._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(da(e,Ht._jsonSchema))return Ht.fromBase64String(e.bytes)}}Ht._jsonSchemaVersion="firestore/bytes/1.0",Ht._jsonSchema={type:$e("string",Ht._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(da(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:$e("string",In._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:an._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(da(e,an._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new an(e.vectorValues);throw new q(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}an._jsonSchemaVersion="firestore/vectorValue/1.0",an._jsonSchema={type:$e("string",an._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=/^__.*__$/;class G6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}class dw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Br(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{dataSource:t})}}class Np{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Np({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return dc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(fw(this.dataSource)&&W6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class K6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kc(e)}createContext(e,n,r,s=!1){return new Np({dataSource:e,methodName:n,targetDoc:r,path:tt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zc(t){const e=t._freezeSettings(),n=Kc(t._databaseId);return new K6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pw(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Rp("Data must be an object, but it was:",o,r);const l=mw(r,o);let u,h;if(i.merge)u=new Ot(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=yi(e,m,n);if(!o.contains(g))throw new q(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);vw(f,g)||f.push(g)}u=new Ot(f),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new G6(new At(l),u,h)}class eu extends va{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eu}}class Pp extends va{_toFieldTransform(e){return new P2(e.path,new Qo)}isEqual(e){return e instanceof Pp}}class kp extends va{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Xo(e.serializer,S2(e.serializer,this.Vc));return new P2(e.path,n)}isEqual(e){return e instanceof kp&&this.Vc===e.Vc}}function Q6(t,e,n,r){const s=t.createContext(1,e,n);Rp("Data must be an object, but it was:",s,r);const i=[],o=At.empty();zr(r,(u,h)=>{const f=yw(e,u,n);h=Ke(h);const m=s.childContextForFieldPath(f);if(h instanceof eu)i.push(f);else{const g=_a(h,m);g!=null&&(i.push(f),o.set(f,g))}});const l=new Ot(i);return new dw(o,l,s.fieldTransforms)}function J6(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[yi(e,r,n)],u=[s];if(i.length%2!=0)throw new q(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(yi(e,i[g])),u.push(i[g+1]);const h=[],f=At.empty();for(let g=l.length-1;g>=0;--g)if(!vw(h,l[g])){const S=l[g];let P=u[g];P=Ke(P);const T=o.childContextForFieldPath(S);if(P instanceof eu)h.push(S);else{const k=_a(P,T);k!=null&&(h.push(S),f.set(S,k))}}const m=new Ot(h);return new dw(f,m,o.fieldTransforms)}function Y6(t,e,n,r=!1){return _a(n,t.createContext(r?4:3,e))}function _a(t,e){if(gw(t=Ke(t)))return Rp("Unsupported field value:",e,t),mw(t,e);if(t instanceof va)return function(r,s){if(!fw(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=_a(l,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return S2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ie.fromDate(r);return{timestampValue:ac(s.serializer,i)}}if(r instanceof Ie){const i=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ac(s.serializer,i)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ht)return{bytesValue:V2(s.serializer,r._byteString)};if(r instanceof Oe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof an)return function(o,l){const u=o instanceof an?o.toArray():o;return{mapValue:{fields:{[l2]:{stringValue:c2},[sc]:{arrayValue:{values:u.map(f=>{if(typeof f!="number")throw l.createError("VectorValues must only contain numeric values.");return ip(l.serializer,f)})}}}}}}(r,s);if(B2(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Lc(r)}`)}(t,e)}function mw(t,e){const n={};return n2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(r,s)=>{const i=_a(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function gw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof In||t instanceof Ht||t instanceof Oe||t instanceof va||t instanceof an||B2(t))}function Rp(t,e,n){if(!gw(n)||!e2(n)){const r=Lc(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function yi(t,e,n){if((e=Ke(e))instanceof Cp)return e._internalPath;if(typeof e=="string")return yw(t,e);throw dc("Field path arguments must be of type string or ",t,!1,void 0,n)}const X6=new RegExp("[~\\*/\\[\\]]");function yw(t,e,n){if(e.search(X6)>=0)throw dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cp(...e.split("."))._internalPath}catch{throw dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new q(M.INVALID_ARGUMENT,l+t+u)}function vw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{convertValue(e,n="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[sc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Le(o.doubleValue));return new an(n)}convertGeoPoint(e){return new In(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wo(e));default:return null}}convertTimestamp(e){const n=kr(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);ye(z2(r),9688,{name:e});const s=new Go(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Z6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}function Ar(){return new Pp("serverTimestamp")}function _w(t){return new kp("increment",t)}const m1="@firebase/firestore",g1="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(yi("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eN extends ww{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class tN extends Dp{}function Vr(t,e,...n){let r=[];e instanceof Dp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof bp).length,l=i.filter(u=>u instanceof tu).length;if(o>1||o>0&&l>0)throw new q(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class tu extends tN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tu(e,n,r)}_apply(e){const n=this._parse(e);return Tw(e._query,n),new Ts(e.firestore,e.converter,Ad(e._query,n))}_parse(e){const n=Zc(e.firestore);return function(i,o,l,u,h,f,m){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new q(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){_1(m,f);const P=[];for(const T of m)P.push(v1(u,i,T));g={arrayValue:{values:P}}}else g=v1(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||_1(m,f),g=Y6(l,o,m,f==="in"||f==="not-in");return Be.create(h,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nn(t,e,n){const r=e,s=yi("where",t);return tu._create(s,r,n)}class bp extends Dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)Tw(o,u),o=Ad(o,u)}(e._query,n),new Ts(e.firestore,e.converter,Ad(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function v1(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new q(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y2(e)&&n.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!Q.isDocumentKey(r))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jy(t,new Q(r))}if(n instanceof Oe)return jy(t,n._key);throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lc(n)}.`)}function _1(t,e){if(!Array.isArray(t)||t.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Iw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class is extends ww{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yi("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=is._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}is._jsonSchemaVersion="firestore/documentSnapshot/1.0",is._jsonSchema={type:$e("string",is._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class Il extends is{data(e={}){return super.data(e)}}class os{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Il(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Il(s._firestore,s._userDataWriter,l.doc.key,l.doc,new lo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Il(s._firestore,s._userDataWriter,l.doc.key,l.doc,new lo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:nN(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=os._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os._jsonSchemaVersion="firestore/querySnapshot/1.0",os._jsonSchema={type:$e("string",os._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){t=Rt(t,Oe);const e=Rt(t.firestore,$n),n=Xc(e);return L6(n,t._key).then(r=>Sw(e,t,r))}function Ss(t){t=Rt(t,Ts);const e=Rt(t.firestore,$n),n=Xc(e),r=new jp(e);return Ew(t._query),F6(n,t._query).then(s=>new os(e,r,t,s))}function lr(t,e,n){t=Rt(t,Oe);const r=Rt(t.firestore,$n),s=Iw(t.converter,e,n),i=Zc(r);return nu(r,[pw(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gt.none())])}function wa(t,e,n,...r){t=Rt(t,Oe);const s=Rt(t.firestore,$n),i=Zc(s);let o;return o=typeof(e=Ke(e))=="string"||e instanceof Cp?J6(i,"updateDoc",t._key,e,n,r):Q6(i,"updateDoc",t._key,e),nu(s,[o.toMutation(t._key,Gt.exists(!0))])}function rN(t){return nu(Rt(t.firestore,$n),[new op(t._key,Gt.none())])}function sN(t,e){const n=Rt(t.firestore,$n),r=Et(t),s=Iw(t.converter,e),i=Zc(t.firestore);return nu(n,[pw(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function w1(t,...e){var h,f,m;t=Ke(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||y1(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(y1(e[r])){const g=e[r];e[r]=(h=g.next)==null?void 0:h.bind(g),e[r+1]=(f=g.error)==null?void 0:f.bind(g),e[r+2]=(m=g.complete)==null?void 0:m.bind(g)}let i,o,l;if(t instanceof Oe)o=Rt(t.firestore,$n),l=Bc(t._key.path),i={next:g=>{e[r]&&e[r](Sw(o,t,g))},error:e[r+1],complete:e[r+2]};else{const g=Rt(t,Ts);o=Rt(g.firestore,$n),l=g._query;const S=new jp(o);i={next:P=>{e[r]&&e[r](new os(o,S,g,P))},error:e[r+1],complete:e[r+2]},Ew(t._query)}const u=Xc(o);return M6(u,l,s,i)}function nu(t,e){const n=Xc(t);return U6(n,e)}function Sw(t,e,n){const r=n.docs.get(e._key),s=new jp(t);return new is(t,s,e._key,r,new lo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){z3(Ti),ci(new fs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new $n(new H3(r.getProvider("auth-internal")),new G3(o,r.getProvider("app-check-internal")),uA(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Tr(m1,g1,e),Tr(m1,g1,"esm2020")})();const iN={apiKey:"AIzaSyAuw9wrp1J425Eq9ICq-e1F4c9nIfQFxb8",authDomain:"haqebetelmuslim.firebaseapp.com",projectId:"haqebetelmuslim",storageBucket:"haqebetelmuslim.firebasestorage.app",messagingSenderId:"803361212566",appId:"1:803361212566:web:58dc843f545c3e6a81dab7",measurementId:"G-9KP2M8DNN2"};console.log(" Initializing Firebase...");const xw=a_(iN);console.log(" Firebase initialized");const pn=F3(xw),Ne=H6(xw);R_(pn,Kf).then(()=>{console.log("     LOCAL -   ")}).catch(t=>{console.warn("   :",t)});const Md=new Nn;try{Md.setCustomParameters({prompt:"select_account"})}catch{}const Aw="geelstation@gmail.com";console.log(" Firebase config loaded");const Cw=V.createContext();function ru(){return V.useContext(Cw)}function oN({children:t}){const[e,n]=V.useState(null),[r,s]=V.useState(!0),[i,o]=V.useState(!1),[l,u]=V.useState(null);V.useEffect(()=>{(async()=>{try{await R_(pn,Kf),console.log(" Auth Persistence: LOCAL (  )")}catch(S){console.warn("    :",S)}})()},[]),V.useEffect(()=>Cx(pn,S=>{S?(console.log("   :",S.email),n({uid:S.uid,displayName:S.displayName,email:S.email,photoURL:S.photoURL,isAnonymous:S.isAnonymous||!1})):(console.log("    "),n(null)),s(!1)}),[]),V.useEffect(()=>{(async()=>{try{const S=await t3(pn);S!=null&&S.user&&u(null)}catch(S){console.error("   :",S),u(S)}})()},[]);const m={currentUser:e,loginWithGoogle:async()=>{var g;if(i){console.warn("     ");return}try{return o(!0),u(null),(g=pn.useDeviceLanguage)==null||g.call(pn),(await Gx(pn,Md)).user}catch(S){if(console.error("   :",S),(S==null?void 0:S.code)==="auth/cancelled-popup-request"){console.log("   popup    ");return}const P=(S==null?void 0:S.code)||"";if(P==="auth/popup-blocked"||P==="auth/popup-closed-by-user"||P==="auth/unauthorized-domain")try{return await Zx(pn,Md),null}catch(v){throw console.error("     :",v),v}throw S}finally{o(!1)}},logout:async()=>{try{await Nx(pn)}catch(g){console.error("   :",g)}},loading:r,isAuthenticating:i,lastAuthError:l};return c.jsx(Cw.Provider,{value:m,children:!r&&t})}const su=()=>{try{const t=localStorage.getItem("favorites");return t?JSON.parse(t):[]}catch(t){return console.error("Error getting favorites:",t),[]}},aN=t=>{try{const e=su();return e.includes(t)?!1:(e.push(t),localStorage.setItem("favorites",JSON.stringify(e)),!0)}catch(e){return console.error("Error adding to favorites:",e),!1}},lN=t=>{try{let e=su();return e=e.filter(n=>n!==t),localStorage.setItem("favorites",JSON.stringify(e)),!0}catch(e){return console.error("Error removing from favorites:",e),!1}},cN=t=>su().includes(t),E1=(t,e,n=0)=>{try{const r={cassetteId:t,itemId:e,position:n,timestamp:Date.now()};return localStorage.setItem("lastPlaybackState",JSON.stringify(r)),!0}catch(r){return console.error("Error saving playback state:",r),!1}},T1=()=>{try{const t=localStorage.getItem("lastPlaybackState");return t?JSON.parse(t):null}catch(t){return console.error("Error getting playback state:",t),null}},Ld=t=>{try{const e=iu(),n={...t,cachedAt:Date.now()},r=e.findIndex(i=>i.id===t.id);r>=0?e[r]=n:e.push(n);const s=e.slice(-100);return localStorage.setItem("offlineCache",JSON.stringify(s)),console.log(" Cached cassette:",t.title),!0}catch(e){return console.error("Error caching cassette:",e),e.name==="QuotaExceededError"?(hN(50),Ld(t)):!1}},iu=()=>{try{const t=localStorage.getItem("offlineCache");return t?JSON.parse(t):[]}catch(t){return console.error("Error getting offline cache:",t),[]}},uN=t=>iu().find(n=>n.id===t)||null,hN=(t=50)=>{try{const e=iu();e.sort((r,s)=>(s.cachedAt||0)-(r.cachedAt||0));const n=e.slice(0,t);return localStorage.setItem("offlineCache",JSON.stringify(n)),console.log(` Cleared old cache, kept ${t} newest cassettes`),!0}catch(e){return console.error("Error clearing old cache:",e),!1}},Nw=async(t,e,n,r)=>{try{const{autoApprove:s,...i}=t;return(await sN(un(Ne,"cassettes"),{...i,status:s?"approved":"pending",createdBy:e,createdByEmail:n,createdByName:r,createdAt:Ar(),updatedAt:Ar(),...s&&{approvedAt:Ar()},views:0,downloads:0})).id}catch(s){throw console.error("Error creating cassette:",s),s}},Pw=async(t=null)=>{try{console.log(" getApprovedCassettes:    :",t);let e;t?e=Vr(un(Ne,"cassettes"),nn("status","==","approved"),nn("sectionId","==",t)):e=Vr(un(Ne,"cassettes"),nn("status","==","approved"));const r=(await Ss(e)).docs.map(s=>({id:s.id,...s.data()}));return r.sort((s,i)=>{var u,h,f,m;const o=((h=(u=s.createdAt)==null?void 0:u.toMillis)==null?void 0:h.call(u))||0;return(((m=(f=i.createdAt)==null?void 0:f.toMillis)==null?void 0:m.call(f))||0)-o}),console.log(" getApprovedCassettes: ",r.length," "),r}catch(e){throw console.error(" getApprovedCassettes: :",e),e}},kw=async()=>{try{const t=Vr(un(Ne,"cassettes"),nn("status","==","pending")),n=(await Ss(t)).docs.map(r=>({id:r.id,...r.data()}));return n.sort((r,s)=>{var l,u,h,f;const i=((u=(l=r.createdAt)==null?void 0:l.toMillis)==null?void 0:u.call(l))||0;return(((f=(h=s.createdAt)==null?void 0:h.toMillis)==null?void 0:f.call(h))||0)-i}),n}catch(t){throw console.error("Error getting pending cassettes:",t),t}},Rw=async()=>{try{console.log(" getAllCassettes:   ");const e=(await Ss(un(Ne,"cassettes"))).docs.map(n=>({id:n.id,...n.data()}));return e.sort((n,r)=>{var o,l,u,h;const s=((l=(o=n.createdAt)==null?void 0:o.toMillis)==null?void 0:l.call(o))||0;return(((h=(u=r.createdAt)==null?void 0:u.toMillis)==null?void 0:h.call(u))||0)-s}),console.log(" getAllCassettes: ",e.length,""),e}catch(t){throw console.error(" getAllCassettes: :",t),t}},ou=async t=>{try{console.log(" getUserCassettes:   :",t);const e=Vr(un(Ne,"cassettes"),nn("createdBy","==",t)),r=(await Ss(e)).docs.map(s=>({id:s.id,...s.data()}));return r.sort((s,i)=>{var u,h,f,m;const o=((h=(u=s.createdAt)==null?void 0:u.toMillis)==null?void 0:h.call(u))||0;return(((m=(f=i.createdAt)==null?void 0:f.toMillis)==null?void 0:m.call(f))||0)-o}),console.log(" getUserCassettes: ",r.length," "),r.forEach(s=>{console.log("  - :",s.title,"| :",s.status,"| :",s.sectionId)}),r}catch(e){throw console.error(" getUserCassettes: :",e),e}},jw=async t=>{try{const e=Et(Ne,"cassettes",t),n=await Is(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error(" getCassetteById: :",e),e}},Dw=async t=>{try{const e=Et(Ne,"cassettes",t);await wa(e,{status:"approved",approvedAt:Ar(),updatedAt:Ar()})}catch(e){throw console.error("Error approving cassette:",e),e}},bw=async(t,e="")=>{try{const n=Et(Ne,"cassettes",t);await wa(n,{status:"rejected",rejectionReason:e,rejectedAt:Ar(),updatedAt:Ar()})}catch(n){throw console.error("Error rejecting cassette:",n),n}},Vp=async(t,e)=>{try{const n=Et(Ne,"cassettes",t);await wa(n,{...e,updatedAt:Ar()})}catch(n){throw console.error("Error updating cassette:",n),n}},Op=async t=>{try{await rN(Et(Ne,"cassettes",t));try{const e=localStorage.getItem("favorites");if(e){const r=JSON.parse(e).filter(s=>s!==t);localStorage.setItem("favorites",JSON.stringify(r))}}catch(e){console.warn("     localStorage:",e)}try{const e=localStorage.getItem("lastPlaybackState");e&&JSON.parse(e).cassetteId===t&&localStorage.removeItem("lastPlaybackState")}catch(e){console.warn("    :",e)}}catch(e){throw console.error("Error deleting cassette:",e),e}},Vw=async t=>{try{const e=Et(Ne,"cassettes",t);await wa(e,{views:_w(1)})}catch(e){console.error("Error incrementing views:",e)}},Ow=async(t=20)=>{try{console.log(" getLatestCassettes:  ",t,"");const e=Vr(un(Ne,"cassettes"),nn("status","==","approved")),r=(await Ss(e)).docs.map(i=>({id:i.id,...i.data()}));r.sort((i,o)=>{var h,f,m,g,S,P,T,k;const l=((f=(h=i.updatedAt)==null?void 0:h.toMillis)==null?void 0:f.call(h))||((g=(m=i.createdAt)==null?void 0:m.toMillis)==null?void 0:g.call(m))||0;return(((P=(S=o.updatedAt)==null?void 0:S.toMillis)==null?void 0:P.call(S))||((k=(T=o.createdAt)==null?void 0:T.toMillis)==null?void 0:k.call(T))||0)-l});const s=r.slice(0,t);return console.log(" getLatestCassettes: ",s.length,""),s}catch(e){throw console.error(" getLatestCassettes: :",e),e}},Mw=async(t=20)=>{try{console.log(" getTrendingCassettes:  ",t," ");const e=Vr(un(Ne,"cassettes"),nn("status","==","approved")),r=(await Ss(e)).docs.map(i=>({id:i.id,...i.data()}));r.sort((i,o)=>{const l=i.views||0;return(o.views||0)-l});const s=r.slice(0,t);return console.log(" getTrendingCassettes: ",s.length,""),s}catch(e){throw console.error(" getTrendingCassettes: :",e),e}},dN=Object.freeze(Object.defineProperty({__proto__:null,approveCassette:Dw,createCassette:Nw,deleteCassette:Op,getAllCassettes:Rw,getApprovedCassettes:Pw,getCassetteById:jw,getLatestCassettes:Ow,getPendingCassettes:kw,getTrendingCassettes:Mw,getUserCassettes:ou,incrementViews:Vw,rejectCassette:bw,updateCassette:Vp},Symbol.toStringTag,{value:"Module"})),xo=[{id:"favorites",name:"",icon:"",cassettes:[]},{id:"quran",name:" ",icon:"",cassettes:[]},{id:"nasheeds",name:"",icon:"",cassettes:[]},{id:"lectures",name:" ",icon:"",cassettes:[]},{id:"podcast",name:"",icon:"",cassettes:[]},{id:"student",name:" ",icon:"",cassettes:[]},{id:"latest",name:" ",icon:"",cassettes:[]},{id:"trending",name:" ",icon:"",cassettes:[]}],fN=t=>{V.useEffect(()=>{const e=n=>{if(n.target.tagName==="INPUT"||n.target.tagName==="TEXTAREA"||n.target.isContentEditable)return;const r=n.key.toLowerCase();if(r===" "&&t.onPlayPause&&(n.preventDefault(),t.onPlayPause()),r==="arrowright"&&t.onSeekForward&&(n.preventDefault(),t.onSeekForward()),r==="arrowleft"&&t.onSeekBackward&&(n.preventDefault(),t.onSeekBackward()),r==="arrowup"&&t.onVolumeUp&&(n.preventDefault(),t.onVolumeUp()),r==="arrowdown"&&t.onVolumeDown&&(n.preventDefault(),t.onVolumeDown()),r==="n"&&t.onNext&&(n.preventDefault(),t.onNext()),r==="p"&&t.onPrevious&&(n.preventDefault(),t.onPrevious()),r==="m"&&t.onMute&&(n.preventDefault(),t.onMute()),r==="s"&&t.onStop&&(n.preventDefault(),t.onStop()),r==="f"&&t.onToggleFullscreen&&(n.preventDefault(),t.onToggleFullscreen()),/^[0-9]$/.test(r)&&t.onSeekToPercent){n.preventDefault();const s=parseInt(r)*10;t.onSeekToPercent(s)}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])};class pN extends _t.Component{constructor(n){super(n);ku(this,"handleReload",()=>{window.location.reload()});ku(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("   :",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?c.jsx("div",{className:"error-boundary",role:"alert","aria-live":"assertive",children:c.jsxs("div",{className:"error-boundary-content",children:[c.jsx("div",{className:"error-icon",children:""}),c.jsx("h1",{children:"    "}),c.jsx("p",{className:"error-message",children:"   .     ."}),!1,c.jsxs("div",{className:"error-actions",children:[c.jsx("button",{className:"error-btn primary",onClick:this.handleReload,"aria-label":"  ",children:"   "}),c.jsx("button",{className:"error-btn secondary",onClick:this.handleReset,"aria-label":"  ",children:"   "})]}),c.jsx("p",{className:"error-support",children:"       "})]})}):this.props.children}}var Lw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},I1=_t.createContext&&_t.createContext(Lw),mN=["attr","size","title"];function gN(t,e){if(t==null)return{};var n=yN(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yN(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fc(){return fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fc.apply(this,arguments)}function S1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S1(Object(n),!0).forEach(function(r){vN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vN(t,e,n){return e=_N(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _N(t){var e=wN(t,"string");return typeof e=="symbol"?e:e+""}function wN(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fw(t){return t&&t.map((e,n)=>_t.createElement(e.tag,pc({key:n},e.attr),Fw(e.child)))}function se(t){return e=>_t.createElement(EN,fc({attr:pc({},t.attr)},e),Fw(t.child))}function EN(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=gN(t,mN),l=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),_t.createElement("svg",fc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:pc(pc({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&_t.createElement("title",null,i),t.children)};return I1!==void 0?_t.createElement(I1.Consumer,null,n=>e(n)):e(Lw)}function x1(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function A1(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function C1(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function N1(t){return se({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function TN(t){return se({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(t)}function Mp(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function mh(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function mc(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function IN(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function Zo(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function ea(t){return se({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function SN(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function xN(t){return se({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function AN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"},child:[]}]})(t)}function CN(t){return se({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(t)}function NN(t){return se({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 304v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48zm-48-80a79.557 79.557 0 0 1 30.777 6.165L462.25 85.374A48.003 48.003 0 0 0 422.311 64H153.689a48 48 0 0 0-39.938 21.374L17.223 230.165A79.557 79.557 0 0 1 48 224h480zm-48 96c-17.673 0-32 14.327-32 32s14.327 32 32 32 32-14.327 32-32-14.327-32-32-32zm-96 0c-17.673 0-32 14.327-32 32s14.327 32 32 32 32-14.327 32-32-14.327-32-32-32z"},child:[]}]})(t)}function PN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function kN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function P1(t){return se({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function k1(t){return se({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M0 480c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V160H0v320zm579.16-192c17.86-17.39 28.84-37.34 28.84-58.91 0-52.86-41.79-93.79-87.92-122.9-41.94-26.47-80.63-57.77-111.96-96.22L400 0l-8.12 9.97c-31.33 38.45-70.01 69.76-111.96 96.22C233.79 135.3 192 176.23 192 229.09c0 21.57 10.98 41.52 28.84 58.91h358.32zM608 320H192c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h32v-64c0-17.67 14.33-32 32-32s32 14.33 32 32v64h64v-72c0-48 48-72 48-72s48 24 48 72v72h64v-64c0-17.67 14.33-32 32-32s32 14.33 32 32v64h32c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM64 0S0 32 0 96v32h128V96c0-64-64-96-64-96z"},child:[]}]})(t)}function R1(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(t)}function au(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(t)}function Or(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function ys(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function RN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(t)}function jN(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function j1(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Uw(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"},child:[]}]})(t)}function DN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function bN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function VN(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"},child:[]}]})(t)}function ON(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"},child:[]}]})(t)}function MN(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function LN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(t)}function FN(t){return se({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}function UN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(t)}function bt(t){return se({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Mr(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function zN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function BN(t){return se({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(t)}function gh(t){return se({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1L362.3 248.3C412.1 230.7 448 183.8 448 128 448 57.3 390.7 0 320 0c-67.1 0-121.5 51.8-126.9 117.4L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3zM96 422.4V464c0 26.5 21.5 48 48 48h350.2L207.4 290.3C144.2 301.3 96 356 96 422.4z"},child:[]}]})(t)}function Fd(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function $N(t){return se({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function HN(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(t)}function qN(t){return se({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const zw=V.createContext();function Bw(){return V.useContext(zw)}function WN({children:t}){const[e,n]=V.useState("brown");V.useEffect(()=>{const i=localStorage.getItem("theme")||"brown";n(i),document.documentElement.setAttribute("data-theme",i)},[]);const r=()=>{const i=["brown","green","black","pink"],o=i.indexOf(e),l=i[(o+1)%i.length];n(l),localStorage.setItem("theme",l),document.documentElement.setAttribute("data-theme",l)},s=i=>({favorites:"",quran:"",nasheeds:"",lectures:"",podcast:"",student:"",latest:"",trending:"",downloaded:""})[i]||"";return c.jsx(zw.Provider,{value:{theme:e,toggleTheme:r,getThemeIcon:s},children:t})}const $w="appSettings",Hw=async()=>{try{const t=Et(Ne,"settings",$w),e=await Is(t);return e.exists()?e.data():{topBarMessage:"   "}}catch(t){return console.error("    :",t),{topBarMessage:"   "}}},GN=async(t,e="")=>{try{const n=Et(Ne,"settings",$w),r=Array.isArray(t)?t:[t];return await lr(n,{topBarMessages:r,topBarMessage:r[0],separatorIcon:e,updatedAt:new Date},{merge:!0}),console.log("     "),!0}catch(n){throw console.error("    :",n),n}};function KN({onAddCassetteClick:t}){const{currentUser:e,logout:n,loginWithGoogle:r,isAuthenticating:s,lastAuthError:i}=ru(),{theme:o,toggleTheme:l}=Bw(),[u,h]=V.useState(["   "]),[f,m]=V.useState("");V.useEffect(()=>{const P=async()=>{try{const k=await Hw();k.topBarMessages&&k.topBarMessages.length>0?h(k.topBarMessages):k.topBarMessage&&h([k.topBarMessage]),k.separatorIcon&&m(k.separatorIcon)}catch(k){console.error("     :",k)}};P();const T=setInterval(P,3e4);return()=>clearInterval(T)},[]),V.useEffect(()=>{if(i){const P=(i==null?void 0:i.code)||"unknown",T=(i==null?void 0:i.message)||"",k=[];(P==="auth/popup-blocked"||P==="auth/popup-closed-by-user")&&k.push("         ."),P==="auth/unauthorized-domain"&&(k.push(" : geelstation.github.io  Authorized domains  Firebase Auth."),k.push(" : localhost   .")),P==="auth/operation-not-allowed"&&k.push("  Google   Authentication  Sign-in method  Firebase."),alert(`  . : ${P}
${T}
${k.join(`
`)}`)}},[i]);const g=async()=>{try{await n()}catch(P){console.error("   :",P)}},S=async()=>{try{await r()}catch(P){console.error("   :",P);const T=(P==null?void 0:P.code)||"unknown",k=(P==null?void 0:P.message)||"",v=[];(T==="auth/popup-blocked"||T==="auth/popup-closed-by-user")&&v.push("         ."),T==="auth/unauthorized-domain"&&v.push(" : geelstation.github.io  Authorized domains  Firebase Auth."),alert(`  . : ${T}
${k}
${v.join(`
`)}`)}};return c.jsx("div",{className:"top-bar",children:c.jsxs("div",{className:"top-bar-content",children:[c.jsx("h1",{className:"app-title",children:" "}),c.jsx("div",{className:"message-area",children:c.jsx("p",{className:"message-text",children:u.map((P,T)=>c.jsxs("span",{children:[P,T<u.length-1&&c.jsx("span",{className:"message-separator",children:f})]},T))})}),c.jsxs("div",{className:"top-bar-actions",children:[c.jsx("button",{className:"theme-toggle-btn",onClick:l,title:o==="dark"?" ":o==="light"?" ":o==="islamic1"?" ":o==="islamic2"?"":o==="islamic3"?"":o==="islamic4"?" ":" ",children:o==="dark"||o==="light"?c.jsx(k1,{}):c.jsx(k1,{})}),e?c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"add-cassette-btn",onClick:t,title:"  ",children:[c.jsx(ys,{}),c.jsx("span",{children:" "})]}),c.jsxs("div",{className:"user-section",children:[c.jsx("img",{src:e.photoURL,alt:e.displayName,className:"user-avatar"}),c.jsx("span",{className:"user-name",children:e.displayName}),c.jsx("button",{className:"logout-btn",onClick:g,title:" ",children:c.jsx(DN,{})})]})]}):c.jsxs("button",{className:"login-btn",onClick:S,disabled:s,title:" ",children:[c.jsx(qN,{className:"google-icon"}),c.jsx("span",{children:s?" ...":" "})]})]})]})})}function QN({selectedSection:t,setSelectedSection:e,selectedAyah:n,isPlaying:r,setIsPlaying:s,refreshTrigger:i}){const[o,l]=V.useState(0),[u,h]=V.useState([]),{getThemeIcon:f}=Bw();V.useEffect(()=>{h(xo)},[i]);const m=g=>{e(g)};return c.jsx("div",{className:"left-panel",children:c.jsx("div",{className:"sections-list",children:c.jsx("div",{className:"sections-items",children:u.map(g=>c.jsxs("button",{className:`section-item ${(t==null?void 0:t.id)===g.id?"active":""}`,onClick:()=>m(g),children:[c.jsx("span",{className:"section-icon",children:f(g.id)}),c.jsx("span",{className:"section-name",children:g.name})]},g.id))})})})}const JN=_t.memo(QN),qw="downloadedAudioFiles",Lp="downloadedCassettes",Ww="activeDownloads";let Kt={};const lu=()=>{try{const t=localStorage.getItem(qw);return t?JSON.parse(t):{}}catch(t){return console.error("    :",t),{}}},cu=()=>{try{const t=localStorage.getItem(Lp);return t?JSON.parse(t):[]}catch(t){return console.error("     :",t),[]}},ta=()=>{try{const t=localStorage.getItem(Ww);return t?JSON.parse(t):[]}catch(t){return console.error("    :",t),[]}},Fp=t=>{try{localStorage.setItem(Ww,JSON.stringify(t))}catch(e){console.error("    :",e)}},YN=(t,e)=>{const n=ta(),r=n.findIndex(i=>i.id===t),s={id:t,title:e.title,items:e.items,progress:0,current:0,total:e.items.length,status:"downloading",startedAt:Date.now(),updatedAt:Date.now()};return r!==-1?n[r]=s:n.push(s),Fp(n),s},gc=(t,e,n,r="downloading")=>{const s=ta(),i=s.findIndex(o=>o.id===t);i!==-1&&(s[i].current=e,s[i].total=n,s[i].progress=Math.round(e/n*100),s[i].status=r,s[i].updatedAt=Date.now(),Fp(s))},yc=t=>{const n=ta().filter(r=>r.id!==t);Fp(n),Kt[t]&&(Kt[t].cancelled=!0,delete Kt[t])},XN=(t,e,n)=>{try{const r=lu();return r[t]={localPath:e,downloadedAt:Date.now(),size:n.size||0,fileName:n.fileName||"audio.mp3"},localStorage.setItem(qw,JSON.stringify(r)),!0}catch(r){return console.error("    :",r),!1}},ZN=(t,e)=>{try{const n=cu(),r=n.findIndex(s=>s.id===t);return r!==-1?n[r]={id:t,...e,downloadedAt:Date.now()}:n.push({id:t,...e,downloadedAt:Date.now()}),localStorage.setItem(Lp,JSON.stringify(n)),yc(t),!0}catch(n){return console.error("     :",n),!1}},Gw=t=>{try{return cu().some(n=>n.id===t)}catch(e){return console.error("    :",e),!1}},eP=t=>{var e;try{return((e=lu()[t])==null?void 0:e.localPath)||null}catch(n){return console.error("    :",n),null}},D1=t=>{try{const n=cu().filter(r=>r.id!==t);return localStorage.setItem(Lp,JSON.stringify(n)),!0}catch(e){return console.error("     :",e),!1}},tP=()=>{const t=lu();let e=0;return Object.values(t).forEach(n=>{e+=n.size||0}),e},b1=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]},nP=async(t,e,n)=>{if(window.electronAPI&&window.electronAPI.downloadFile)try{const r=await window.electronAPI.downloadFile(t,e,n);if(r.success)return XN(t,r.localPath,{size:r.size,fileName:e}),r;throw new Error(r.error||" ")}catch(r){throw console.error("   :",r),r}else throw console.error(" Electron API   -     "),new Error("      ")},rP=async(t,e)=>{const n=t.id;Kt[n]={paused:!1,cancelled:!1},YN(n,t);const r=[];let s=0,i=0;for(let o=0;o<t.items.length;o++){const l=Kt[n];if(l&&l.cancelled)return console.log("  "),yc(n),{success:!1,cancelled:!0,successCount:s,failCount:i,results:r};for(;l&&l.paused;)gc(n,o,t.items.length,"paused"),await new Promise(f=>setTimeout(f,500));const u=t.items[o],h=`${t.title}_${u.title}.mp3`;try{gc(n,o+1,t.items.length,"downloading"),e&&e({current:o+1,total:t.items.length,fileName:u.title,status:"downloading"});const f=await nP(u.audioUrl,h);r.push({success:!0,item:u.title}),s++}catch(f){r.push({success:!1,item:u.title,error:f.message}),i++}}if(s===t.items.length){const o=lu();let l=0;t.items.forEach(u=>{const h=o[u.audioUrl];h&&h.size&&(l+=h.size)}),ZN(n,{cassetteId:t.id,title:t.title,items:t.items,itemsCount:t.items.length,downloadedItemsCount:s,totalSize:l,downloadedAt:Date.now()}),console.log("    :",t.title,"-",l,"bytes")}else console.warn("     :",s,"/",t.items.length);return yc(n),e&&e({current:t.items.length,total:t.items.length,status:"completed",successCount:s,failCount:i}),delete Kt[n],{success:i===0,successCount:s,failCount:i,results:r}},sP=t=>Kt[t]?(Kt[t].paused=!0,gc(t,0,0,"paused"),!0):!1,iP=t=>Kt[t]?(Kt[t].paused=!1,gc(t,0,0,"downloading"),!0):!1,oP=t=>(Kt[t]&&(Kt[t].cancelled=!0),yc(t),!0);function aP({selectedAyah:t,selectedSection:e,selectedCassette:n,isPlaying:r,setIsPlaying:s,onNext:i,onPrevious:o,autoPlay:l,sequentialPlay:u,isExpanded:h,onToggleExpand:f,onPositionUpdate:m,savedPosition:g,audioRefCallback:S}){var pt;const[P,T]=V.useState(0),[k,v]=V.useState(0),[E,C]=V.useState(0),[D,F]=V.useState(1),[U,x]=V.useState(!1),[y,N]=V.useState(null),[w,A]=V.useState(0),[R,I]=V.useState(!1),[J,le]=V.useState(!1),H=V.useRef(null),Me=V.useRef(null),B=V.useRef(null);V.useEffect(()=>{S&&H.current&&S(H.current)},[S]),V.useEffect(()=>{if(t&&H.current){const ne=t.audioUrl||t.src;if(ne){H.current.pause();try{const me=eP(ne);me?(console.log("    :",me),H.current.src=`file://${me}`):ne.startsWith("http")&&(H.current.src=ne)}catch{console.log("   "),ne.startsWith("http")&&(H.current.src=ne)}if(H.current.load(),r){const me=setTimeout(()=>{if(H.current){const mt=H.current.play();mt!==void 0&&mt.then(()=>{console.log("  :",t.title)}).catch($r=>{console.error("   :",$r)})}},50);return()=>clearTimeout(me)}}}},[t,r]),V.useEffect(()=>{if(n!=null&&n.items&&t&&u){const ne=n.items.findIndex(me=>me.id===t.id||me.title===t.title);if(ne!==-1&&ne<n.items.length-1){const me=n.items[ne+1],mt=me.audioUrl||me.src;mt&&Me.current&&(Me.current.src=mt,Me.current.load(),console.log("    :",me.title))}}},[t,n,u]),V.useEffect(()=>{H.current&&(r?H.current.play().catch(ne=>console.error("  :",ne)):H.current.pause())},[r]);const K=()=>{if(H.current){const ne=H.current.currentTime,me=H.current.duration;v(ne),me>0&&T(ne/me*100),m&&Math.floor(ne)%5===0&&m(ne)}},te=()=>{H.current&&(C(H.current.duration),g&&g>0&&(H.current.currentTime=g,console.log("   :",g)))},ge=ne=>{const me=ne.target.value;T(me),H.current&&E>0&&(H.current.currentTime=me/100*E)},_e=()=>{s(!r)},Z=()=>{s(!1),T(0),H.current&&(H.current.currentTime=0,H.current.pause())},oe=ne=>{F(ne),H.current&&(H.current.playbackRate=ne),x(!1)},we=ne=>{if(B.current&&clearInterval(B.current),ne===0){N(null),A(0),I(!1);return}const me=Date.now()+ne*60*1e3;N(me),A(ne*60),I(!1),B.current=setInterval(()=>{const mt=Math.floor((me-Date.now())/1e3);mt<=0?(Z(),N(null),A(0),clearInterval(B.current),alert("    -   ")):A(mt)},1e3)};V.useEffect(()=>()=>{B.current&&clearInterval(B.current)},[]),V.useEffect(()=>{H.current&&(H.current.playbackRate=D)},[D]);const O=ne=>{if(!ne||isNaN(ne))return"0:00";const me=Math.floor(ne/60),mt=Math.floor(ne%60);return`${me}:${mt.toString().padStart(2,"0")}`},Y=ne=>{const me=Math.floor(ne/3600),mt=Math.floor(ne%3600/60),$r=ne%60;return me>0?`${me}:${mt.toString().padStart(2,"0")}:${$r.toString().padStart(2,"0")}`:`${mt}:${$r.toString().padStart(2,"0")}`};return c.jsxs("div",{className:`audio-player ${h?"expanded":""}`,children:[c.jsx("audio",{ref:H,preload:"auto",onTimeUpdate:K,onLoadedMetadata:te,onWaiting:()=>le(!0),onCanPlayThrough:()=>le(!1),onPlaying:()=>le(!1),onEnded:()=>{u&&i?i():(s(!1),T(0))}}),c.jsx("audio",{ref:Me,preload:"auto",style:{display:"none"}}),f&&c.jsx("button",{className:"expand-toggle-btn",onClick:f,title:h?"":"",children:h?c.jsx(IN,{}):c.jsx(SN,{})}),c.jsx("div",{className:"media-viewer",children:c.jsx("div",{className:"no-media-placeholder",children:t?c.jsx("div",{className:"ayah-display",children:n!=null&&n.imageUrl?c.jsxs("div",{className:`cassette-cover ${r?"playing":""}`,children:[c.jsx("img",{src:n.imageUrl,alt:n.title}),c.jsx("div",{className:"shine-effect"}),r&&c.jsxs("div",{className:"sound-waves",children:[c.jsx("span",{className:"wave"}),c.jsx("span",{className:"wave"}),c.jsx("span",{className:"wave"}),c.jsx("span",{className:"wave"})]})]}):c.jsx("p",{className:"ayah-arabic arabic-text",children:t.title})}):c.jsx("p",{className:"placeholder-text",children:"  "})})}),c.jsxs("div",{className:"media-controls",children:[c.jsxs("div",{className:"control-buttons",children:[c.jsx("button",{className:"control-btn",onClick:o,disabled:!t||!o,title:"",children:c.jsx(VN,{})}),c.jsx("button",{className:"control-btn play-btn",onClick:_e,disabled:!t,title:r?" ":"",children:r?c.jsx(au,{}):c.jsx(Or,{})}),c.jsx("button",{className:"control-btn",onClick:Z,disabled:!t,title:"",children:c.jsx(MN,{})}),c.jsx("button",{className:"control-btn",onClick:i,disabled:!t||!i,title:"",children:c.jsx(ON,{})}),c.jsxs("div",{className:"speed-control",children:[c.jsxs("button",{className:"control-btn speed-btn",onClick:()=>x(!U),disabled:!t,title:" ",children:[c.jsx(FN,{}),c.jsxs("span",{className:"speed-label",children:[D,"x"]})]}),U&&c.jsxs("div",{className:"speed-menu",children:[c.jsx("button",{onClick:()=>oe(.5),children:"0.5x"}),c.jsx("button",{onClick:()=>oe(.75),children:"0.75x"}),c.jsx("button",{onClick:()=>oe(1),className:"default",children:"1x"}),c.jsx("button",{onClick:()=>oe(1.25),children:"1.25x"}),c.jsx("button",{onClick:()=>oe(1.5),children:"1.5x"}),c.jsx("button",{onClick:()=>oe(2),children:"2x"})]})]}),c.jsxs("div",{className:"sleep-timer-control",children:[c.jsxs("button",{className:"control-btn sleep-btn",onClick:()=>I(!R),title:" ",children:[c.jsx(mc,{}),y&&c.jsx("span",{className:"timer-badge",children:Y(w)})]}),R&&c.jsxs("div",{className:"sleep-menu",children:[c.jsx("button",{onClick:()=>we(15),children:"15 "}),c.jsx("button",{onClick:()=>we(30),children:"30 "}),c.jsx("button",{onClick:()=>we(45),children:"45 "}),c.jsx("button",{onClick:()=>we(60),children:"60 "}),y&&c.jsx("button",{onClick:()=>we(0),className:"cancel",children:""})]})]})]}),c.jsxs("div",{className:"progress-container",children:[c.jsxs("div",{className:"time-display",children:[c.jsx("span",{className:"current-time",children:O(k)}),c.jsx("span",{className:"duration-time",children:O(E)})]}),c.jsx("input",{type:"range",min:"0",max:"100",value:P,onChange:ge,className:"progress-slider",disabled:!t})]})]}),c.jsxs("div",{className:"metadata-section",children:[c.jsx("h3",{className:"metadata-title",children:""}),c.jsxs("div",{className:"metadata-content",children:[c.jsxs("div",{className:"metadata-item",children:[c.jsx("span",{className:"metadata-label",children:":"}),c.jsx("span",{className:"metadata-value",children:t?t.title:"-"})]}),c.jsxs("div",{className:"metadata-item",children:[c.jsx("span",{className:"metadata-label",children:":"}),c.jsx("span",{className:"metadata-value",children:e?e.name:"-"})]}),c.jsxs("div",{className:"metadata-item",children:[c.jsx("span",{className:"metadata-label",children:" :"}),c.jsx("span",{className:"metadata-value",children:n?((pt=n.items)==null?void 0:pt.length)||0:"-"})]}),c.jsxs("div",{className:"metadata-item",children:[c.jsx("span",{className:"metadata-label",children:":"}),c.jsx("span",{className:"metadata-value stat-value",children:(n==null?void 0:n.views)||0})]}),c.jsxs("div",{className:"metadata-item",children:[c.jsx("span",{className:"metadata-label",children:":"}),c.jsx("span",{className:"metadata-value stat-value",children:(n==null?void 0:n.downloads)||0})]}),c.jsxs("div",{className:"metadata-item",children:[c.jsx("span",{className:"metadata-label",children:" :"}),c.jsx("span",{className:"metadata-value",children:n!=null&&n.createdAt?new Date(n.createdAt).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"-"})]}),c.jsxs("div",{className:"metadata-item uploader-item",children:[c.jsx("span",{className:"metadata-label",children:"  :"}),c.jsxs("div",{className:"uploader-info",children:[c.jsx("span",{className:"metadata-value uploader-name",children:(n==null?void 0:n.createdByName)||""}),c.jsx("span",{className:"free-badge",children:""})]})]})]})]})]})}const Kw=_t.memo(aP),Qw="quran_playlists",Wn=()=>{try{const t=localStorage.getItem(Qw);return t?JSON.parse(t):[]}catch(t){return console.error("   :",t),[]}},Pi=t=>{try{return localStorage.setItem(Qw,JSON.stringify(t)),!0}catch(e){return console.error("   :",e),!1}},Jw=(t,e="")=>{try{const n=Wn(),r={id:Date.now().toString(),name:t,description:e,items:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n.push(r),Pi(n),r}catch(n){return console.error("   :",n),null}},lP=(t,e)=>{try{const n=Wn(),r=n.findIndex(s=>s.id===t);return r!==-1?(n[r]={...n[r],...e,updatedAt:new Date().toISOString()},Pi(n),n[r]):null}catch(n){return console.error("   :",n),null}},cP=t=>{try{const n=Wn().filter(r=>r.id!==t);return Pi(n),!0}catch(e){return console.error("   :",e),!1}},V1=(t,e,n)=>{try{const r=Wn(),s=r.find(o=>o.id===t);return!s||s.items.some(o=>o.itemId===n.id&&o.cassetteId===e.id)?!1:(s.items.push({itemId:n.id,itemTitle:n.title,itemUrl:n.url,cassetteId:e.id,cassetteTitle:e.title,addedAt:new Date().toISOString()}),s.updatedAt=new Date().toISOString(),Pi(r),!0)}catch(r){return console.error("   :",r),!1}},uP=(t,e)=>{try{const n=Wn(),r=n.find(s=>s.id===t);return r?(r.items=r.items.filter(s=>s.itemId!==e),r.updatedAt=new Date().toISOString(),Pi(n),!0):!1}catch(n){return console.error("   :",n),!1}},hP=t=>{try{const n=Wn().find(l=>l.id===t);if(!n)return!1;const r=JSON.stringify(n,null,2),s=new Blob([r],{type:"application/json"}),i=URL.createObjectURL(s),o=document.createElement("a");return o.href=i,o.download=`playlist-${n.name}-${Date.now()}.json`,o.click(),URL.revokeObjectURL(i),!0}catch(e){return console.error("   :",e),!1}},dP=async t=>{try{const e=await t.text(),n=JSON.parse(e);if(!n.name||!Array.isArray(n.items))throw new Error("  ");const r=Wn();return n.id=Date.now().toString(),n.createdAt=new Date().toISOString(),n.updatedAt=new Date().toISOString(),r.push(n),Pi(r),!0}catch(e){throw console.error("   :",e),e}};function fP({cassette:t,item:e,onClose:n}){const[r,s]=V.useState([]),[i,o]=V.useState(!1),[l,u]=V.useState("");V.useEffect(()=>{h()},[]);const h=()=>{const g=Wn();s(g)},f=g=>{V1(g,t,e)?(alert("    "),n()):alert("      ")},m=()=>{if(!l.trim()){alert("   ");return}const g=Jw(l.trim());g&&(V1(g.id,t,e),alert("     "),n())};return c.jsx("div",{className:"add-to-playlist-overlay",onClick:n,children:c.jsxs("div",{className:"add-to-playlist-modal",onClick:g=>g.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"  "}),c.jsx("button",{className:"close-icon-btn",onClick:n,children:c.jsx(bt,{})})]}),c.jsxs("div",{className:"modal-content",children:[c.jsxs("div",{className:"track-info",children:[c.jsx("strong",{children:e.title}),c.jsx("small",{children:t.title})]}),r.length===0?c.jsx("p",{className:"no-playlists",children:"  .    "}):c.jsx("div",{className:"playlists-list",children:r.map(g=>c.jsxs("button",{className:"playlist-option",onClick:()=>f(g.id),children:[c.jsx("span",{children:g.name}),c.jsxs("small",{children:[g.items.length," "]})]},g.id))}),c.jsx("div",{className:"create-new-section",children:i?c.jsxs("div",{className:"create-new-form",children:[c.jsx("input",{type:"text",placeholder:"  ",value:l,onChange:g=>u(g.target.value),onKeyPress:g=>g.key==="Enter"&&m(),autoFocus:!0}),c.jsxs("div",{className:"create-actions",children:[c.jsx("button",{className:"create-btn",onClick:m,children:" "}),c.jsx("button",{className:"cancel-btn",onClick:()=>o(!1),children:""})]})]}):c.jsxs("button",{className:"new-playlist-btn",onClick:()=>o(!0),children:[c.jsx(ys,{}),"   "]})})]})]})})}function pP({selectedCassette:t,selectedItem:e,setSelectedItem:n,isPlaying:r,setIsPlaying:s,onOpenUserProfile:i,isPlayerExpanded:o,onToggleExpand:l,onNext:u,onPrevious:h,autoPlay:f,sequentialPlay:m}){const[g,S]=V.useState(!1),[P,T]=V.useState(null),[k,v]=V.useState(!1),[E,C]=V.useState(!1),[D,F]=V.useState(null);_t.useEffect(()=>{t!=null&&t.id&&v(Gw(t.id))},[t]);const U=y=>{(e==null?void 0:e.id)===y.id?s(!r):(n(y),s(!0))},x=(y,N)=>{N.stopPropagation(),F(y),C(!0)};return c.jsxs("div",{className:"center-panel",children:[o&&t&&e?c.jsx("div",{className:"expanded-player-container",children:c.jsx(Kw,{selectedAyah:e,selectedSection:null,selectedCassette:t,isPlaying:r,setIsPlaying:s,onNext:u,onPrevious:h,autoPlay:f,sequentialPlay:m,isExpanded:!0,onToggleExpand:l})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"cassette-header",children:[c.jsx("h3",{className:"cassette-title",children:t?t.title:" "}),t&&c.jsxs("div",{className:"cassette-meta",children:[c.jsxs("span",{className:"cassette-items-count",children:[t.items.length," "]}),k&&c.jsx("span",{className:"downloaded-badge",title:" ",children:c.jsx(Mp,{})}),t.createdByName&&c.jsxs("button",{className:"user-profile-link",onClick:()=>i&&i({userId:t.createdBy,userName:t.createdByName}),children:[c.jsx(Fd,{})," ",t.createdByName]})]})]}),c.jsx("div",{className:"cassette-content",children:t?c.jsx("div",{className:"items-list",children:t.items.map((y,N)=>c.jsxs("div",{className:`item-row ${(e==null?void 0:e.id)===y.id?"active":""} ${(e==null?void 0:e.id)===y.id&&r?"playing":""}`,onClick:()=>U(y),children:[c.jsx("span",{className:"item-number",children:N+1}),c.jsx("span",{className:"item-title",children:y.title}),c.jsx("button",{className:"add-to-playlist-btn",onClick:w=>x(y,w),title:" ",children:c.jsx(ys,{})}),(e==null?void 0:e.id)===y.id&&c.jsx("span",{className:"item-play-icon",children:r?c.jsx(au,{}):c.jsx(Or,{})})]},y.id))}):c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:"     "})})})]}),E&&D&&t&&c.jsx(fP,{cassette:t,item:D,onClose:()=>{C(!1),F(null)}})]})}const mP=_t.memo(pP),gP="modulepreload",yP=function(t){return"/"+t},O1={},vP=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=yP(u),u in O1)return;O1[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":gP,h||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((g,S)=>{m.addEventListener("load",g),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},_P=async t=>{try{return navigator.share?(await navigator.share({title:t.title,text:` : ${t.title}`,url:window.location.href}),!0):(await navigator.clipboard.writeText(window.location.href),alert("   "),!0)}catch(e){return console.error("  :",e),!1}},wP=async t=>{try{const e=`${window.location.origin}${window.location.pathname}?user=${t}`;return navigator.share?(await navigator.share({title:"   ",text:"  ",url:e}),!0):(await navigator.clipboard.writeText(e),!0)}catch(e){return console.error("  :",e),!1}};function EP({cassette:t,isSelected:e,isPlaying:n,onClick:r}){const[s,i]=V.useState(!1),[o,l]=V.useState(!1);V.useEffect(()=>{t!=null&&t.id&&(i(cN(t.id)),l(Gw(t.id)))},[t]);const u=f=>{f.stopPropagation(),t!=null&&t.id&&(s?(lN(t.id),i(!1)):(aN(t.id),i(!0)))},h=async f=>{f.stopPropagation(),await _P(t)};return c.jsx("div",{className:`cassette-card ${e?"selected":""} ${n&&e?"playing":""}`,onClick:r,role:"button",tabIndex:0,"aria-label":` ${t.reciter||t.title}`,onKeyPress:f=>f.key==="Enter"&&(r==null?void 0:r()),children:c.jsxs("div",{className:"cassette-body",children:[c.jsx("button",{className:`favorite-btn ${s?"active":""}`,onClick:u,title:s?"  ":" ",children:s?c.jsx(PN,{}):c.jsx(HN,{})}),o&&c.jsx("div",{className:"downloaded-indicator",title:"  -   ",children:c.jsx(Mp,{})}),c.jsx("button",{className:"share-btn",onClick:h,title:" ",children:c.jsx(Uw,{})}),c.jsx("div",{className:"screw screw-top-left"}),c.jsx("div",{className:"screw screw-top-right"}),c.jsx("div",{className:"screw screw-bottom-left"}),c.jsx("div",{className:"screw screw-bottom-right"}),c.jsx("div",{className:"screw screw-center"}),c.jsxs("div",{className:"cassette-window",children:[t.imageUrl&&c.jsx("div",{className:"cassette-image",children:c.jsx("img",{src:t.imageUrl,alt:t.title,loading:"lazy",decoding:"async"})}),c.jsxs("div",{className:"reel reel-left",children:[c.jsx("div",{className:"reel-hub"}),c.jsx("div",{className:"reel-teeth"})]}),c.jsx("div",{className:"tape-line"}),c.jsxs("div",{className:"reel reel-right",children:[c.jsx("div",{className:"reel-hub"}),c.jsx("div",{className:"reel-teeth"})]})]}),c.jsxs("div",{className:"cassette-label",children:[c.jsx("h4",{className:"label-title",children:t.reciter||t.title}),t.reciter&&c.jsx("p",{className:"label-subtitle",children:t.title})]}),c.jsx("div",{className:"cassette-bottom-slot"})]})})}const Yw=_t.memo(EP),TP=(t,e)=>{if(!e||e.trim()==="")return t;const n=e.toLowerCase().trim();return t.filter(r=>!!(r.title.toLowerCase().includes(n)||r.reciter&&r.reciter.toLowerCase().includes(n)||r.description&&r.description.toLowerCase().includes(n)||r.items&&r.items.some(s=>s.title.toLowerCase().includes(n))))},IP=(t,e)=>!e||e==="all"?t:t.filter(n=>n.category===e),Xw=(t,e="date")=>{const n=[...t];switch(e){case"title":return n.sort((r,s)=>r.title.localeCompare(s.title,"ar"));case"date":return n.sort((r,s)=>{const i=new Date(r.uploadedAt||0);return new Date(s.uploadedAt||0)-i});case"popular":return n.sort((r,s)=>(s.plays||0)-(r.plays||0));default:return n}},SP=(t,e={})=>{let n=[...t];return e.searchTerm&&(n=TP(n,e.searchTerm)),e.category&&(n=IP(n,e.category)),e.reciter&&(n=n.filter(r=>r.reciter===e.reciter)),e.sortBy&&(n=Xw(n,e.sortBy)),n},xP=(t,e)=>Xw(t,e),AP=(t,e)=>{if(!e||e.length<2)return[];const n=e.toLowerCase(),r=new Set;return t.forEach(s=>{s.title.toLowerCase().includes(n)&&r.add(s.title),s.reciter&&s.reciter.toLowerCase().includes(n)&&r.add(s.reciter)}),Array.from(r).slice(0,5)};function CP({selectedSection:t,selectedCassette:e,setSelectedCassette:n,refreshTrigger:r,isPlaying:s}){const[i,o]=V.useState(""),[l,u]=V.useState([]),[h,f]=V.useState("date-desc"),[m,g]=V.useState([]);V.useEffect(()=>{const T=async()=>{if(!t){u([]);return}console.log(" RightPanel:   :",t.id);try{let v;if(t.id==="favorites"){const E=su();if(console.log("  :",E.length,""),E.length===0){console.log("     "),u([]);return}const C=[];for(const D of E){const F=uN(D);if(F)C.push(F);else try{const{getCassetteById:U}=await vP(async()=>{const{getCassetteById:y}=await Promise.resolve().then(()=>dN);return{getCassetteById:y}},void 0),x=await U(D);x&&(C.push(x),Ld(x))}catch{console.warn("   :",D)}}console.log("  ",C.length,"  "),u(C);return}t.id==="latest"?(v=await Ow(20),console.log("   ",v.length,"")):t.id==="trending"?(v=await Mw(20),console.log("  ",v.length,"   ")):(v=await Pw(t.id),console.log("  ",v.length,"  ",t.name)),console.log(" :",v),v.length===0&&console.warn("    :",t.id),v.forEach(E=>{try{Ld(E)}catch(C){console.warn("     cache:",C.message)}}),console.log("     Offline Cache"),u(v)}catch(v){console.error(" RightPanel:   :",v),console.log("    Offline Cache...");const C=iu().filter(D=>t.id==="latest"||t.id==="trending"?!0:D.sectionId===t.id);C.length>0?(console.log("  ",C.length,"  Offline Cache"),u(C)):(console.warn("    "),u([]))}};T();const k=setInterval(()=>{t&&(console.log("   ..."),T())},1e4);return()=>clearInterval(k)},[t,r]);const S=V.useMemo(()=>{let T=l;return i.trim()&&(T=SP(l,i,{sectionId:(t==null?void 0:t.id)!=="latest"&&(t==null?void 0:t.id)!=="trending"?t==null?void 0:t.id:void 0})),T=xP(T,h),T},[l,i,h,t]);V.useEffect(()=>{if(i.trim().length>=2){const T=AP(l,i);g(T)}else g([])},[i,l]);const P=async T=>{if(n(T),T.id&&!T.id.startsWith("surah-"))try{await Vw(T.id)}catch(k){console.error("Error incrementing views:",k)}};return c.jsxs("div",{className:"right-panel",children:[c.jsxs("div",{className:"search-container",children:[c.jsxs("div",{className:"search-input-wrapper",children:[c.jsx(j1,{className:"search-icon"}),c.jsx("input",{type:"text",className:"search-input",placeholder:"  ...",value:i,onChange:T=>o(T.target.value)}),i&&c.jsx("button",{className:"clear-search-btn",onClick:()=>o(""),title:" ",children:c.jsx(bt,{})})]}),m.length>0&&c.jsx("div",{className:"search-suggestions",children:m.map((T,k)=>c.jsxs("button",{className:"suggestion-item",onClick:()=>o(T),children:[c.jsx(j1,{})," ",T]},k))})]}),c.jsx("div",{className:"cards-grid",children:t?S.length===0?c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:"  "})}):S.map(T=>c.jsx(Yw,{cassette:T,isSelected:(e==null?void 0:e.id)===T.id,isPlaying:s&&(e==null?void 0:e.id)===T.id,onClick:()=>P(T)},T.id)):c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:"   "})})}),t&&S.length>0&&c.jsx("div",{className:"list-footer",children:c.jsxs("span",{className:"items-count",children:[S.length," ",(S.length===1,"")]})})]})}const NP=_t.memo(CP);function PP({showAdminPanel:t,setShowAdminPanel:e,showMyCassettes:n,setShowMyCassettes:r,showMyDownloads:s,setShowMyDownloads:i,showMyPlaylists:o,setShowMyPlaylists:l,isAdmin:u}){const h=()=>{window.location.reload()},f=()=>{i(!s),t&&e(!1),n&&r(!1),o&&l(!1)},m=()=>{l(!o),t&&e(!1),n&&r(!1),s&&i(!1)},g=()=>{e(!t),n&&r(!1),s&&i(!1),o&&l(!1)},S=()=>{alert(`    !

-     
-     
-  

: geelstation@gmail.com`)};return c.jsxs("div",{className:"side-toolbar",children:[c.jsx("button",{className:"toolbar-btn",onClick:h,title:"",children:c.jsx(LN,{})}),c.jsx("button",{className:`toolbar-btn ${s?"active":""}`,onClick:f,title:"",children:c.jsx(Zo,{})}),c.jsx("button",{className:`toolbar-btn ${o?"active":""}`,onClick:m,title:" ",children:c.jsx(kN,{})}),u&&c.jsx("button",{className:`toolbar-btn ${t?"active":""}`,onClick:g,title:" ",children:c.jsx(BN,{})}),c.jsx("div",{className:"toolbar-spacer"}),c.jsx("button",{className:"toolbar-btn",onClick:S,title:"",children:c.jsx(RN,{})})]})}function kP({selectedAyah:t,selectedCassette:e,isPlaying:n,setIsPlaying:r,autoPlay:s,setAutoPlay:i,sequentialPlay:o,setSequentialPlay:l,setShowMyDownloads:u}){const h=()=>{t&&r(!n)},f=async()=>{if(!e){alert("   ");return}u&&u(!0);try{await rP(e,m=>{console.log(`: ${m.current}/${m.total}`)})}catch(m){console.error("  :",m)}};return c.jsxs("div",{className:"bottom-bar",children:[c.jsxs("div",{className:"bottom-actions",children:[c.jsxs("button",{className:"action-btn play-action",onClick:h,disabled:!t,children:[n?c.jsx(au,{}):c.jsx(Or,{}),c.jsx("span",{children:n?"":""})]}),c.jsxs("button",{className:"action-btn download-action",onClick:f,disabled:!e,title:"  ",children:[c.jsx(Zo,{}),c.jsx("span",{children:""})]})]}),c.jsxs("div",{className:"bottom-options",children:[c.jsxs("label",{className:"checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:s,onChange:m=>i(m.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-text",children:" "})]}),c.jsxs("label",{className:"checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:o,onChange:m=>l(m.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-text",children:" "})]})]}),c.jsxs("div",{className:"bottom-status",children:[c.jsxs("div",{className:"status-indicator",children:[c.jsx("span",{className:"status-dot",style:{backgroundColor:n?"#4caf50":"#808080"}}),c.jsx("span",{className:"status-text",children:n?" ":""})]}),t&&c.jsxs("div",{className:"current-item",children:[c.jsx("span",{className:"current-label",children:" :"}),c.jsx("span",{className:"current-value",children:t.title})]})]})]})}function RP({isOpen:t,onClose:e,onCassetteAdded:n}){const{currentUser:r}=ru(),s=(r==null?void 0:r.email)===Aw,[i,o]=V.useState(""),[l,u]=V.useState(""),[h,f]=V.useState(""),[m,g]=V.useState([{name:"",url:""}]),[S,P]=V.useState(""),[T,k]=V.useState(!1),[v,E]=V.useState(""),[C,D]=V.useState(""),F=["",""," ","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],U=()=>{g([...m,{name:"",url:""}])},x=I=>{if(m.length>1){const J=m.filter((le,H)=>H!==I);g(J)}},y=(I,J,le)=>{const H=[...m];H[I][J]=le,g(H)},N=()=>{if(!C.trim()){P("    ");return}const I=C.trim();if(!I.includes("001")){P("     001  ");return}const J=F.map((le,H)=>{const Me=String(H+1).padStart(3,"0"),B=I.replace("001",Me);return{name:le,url:B}});g(J),P(""),alert("   114  !")},w=async I=>{if(I.preventDefault(),P(""),!i){P("  ");return}if(!l.trim()){P("   ");return}const J=m.filter(H=>H.name.trim()&&H.url.trim());if(J.length===0){P("      ");return}const le={sectionId:i,title:l.trim(),imageUrl:h.trim()||null,items:J.map((H,Me)=>({id:`item-${Date.now()}-${Me}`,title:H.name.trim(),audioUrl:H.url.trim(),ayah:null})),isCustom:!0,autoApprove:s};console.log("   :",{sectionId:i,title:l.trim(),itemsCount:J.length,isAdmin:s,autoApprove:s}),Nw(le,r.uid,r.email,r.displayName).then(()=>{console.log("      Firestore"),n?(console.log("  onCassetteAdded  "),n(le)):console.warn(" onCassetteAdded  !")}).catch(H=>{console.error("    :",H),alert("    .     Firestore.")}),alert(s?"     !":"  ...      ."),A(),e()},A=()=>{o(""),u(""),f(""),g([{name:"",url:""}]),P(""),k(!1),E(""),D("")},R=()=>{A(),e()};return t?c.jsx("div",{className:"modal-overlay",onClick:R,children:c.jsxs("div",{className:"modal-content",onClick:I=>I.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{className:"close-btn",onClick:R,children:c.jsx(bt,{})})]}),c.jsx("div",{className:"modal-body",children:r?c.jsxs("form",{onSubmit:w,className:"cassette-form",children:[c.jsxs("div",{className:"user-info",children:[c.jsx("img",{src:r.photoURL,alt:r.displayName}),c.jsx("span",{children:r.displayName})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"section",children:":"}),c.jsxs("select",{id:"section",value:i,onChange:I=>o(I.target.value),required:!0,children:[c.jsx("option",{value:"",children:"--   --"}),xo.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"title",children:" :"}),c.jsx("input",{type:"text",id:"title",value:l,onChange:I=>u(I.target.value),placeholder:"  ",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"imageUrl",children:"  ():"}),c.jsx("input",{type:"url",id:"imageUrl",value:h,onChange:I=>f(I.target.value),placeholder:"https://example.com/image.jpg"}),h&&c.jsx("div",{className:"image-preview",children:c.jsx("img",{src:h,alt:"",onError:I=>I.target.style.display="none"})})]}),s&&i==="quran"&&c.jsxs("div",{className:"form-group ai-mode-section",children:[c.jsx("div",{className:"ai-mode-header",children:c.jsxs("label",{children:[c.jsx("input",{type:"checkbox",checked:T,onChange:I=>{k(I.target.checked),I.target.checked&&g([{name:"",url:""}])}}),"     (AI)"]})}),T&&c.jsxs("div",{className:"ai-mode-inputs",children:[c.jsx("p",{className:"ai-mode-desc",children:"       114  "}),c.jsxs("div",{className:"ai-input-row",children:[c.jsx("input",{type:"text",value:v,disabled:!0,placeholder:" ",className:"ai-surah-name"}),c.jsx("input",{type:"url",value:C,onChange:I=>D(I.target.value),placeholder:"https://server12.mp3quran.net/kyat/001.mp3",className:"ai-surah-url"})]}),c.jsx("button",{type:"button",className:"generate-quran-btn",onClick:N,children:"    (114 )"})]})]}),!T&&c.jsxs("div",{className:"form-group audio-items-section",children:[c.jsx("label",{children:" :"}),c.jsx("div",{className:"audio-items-list",children:m.map((I,J)=>c.jsxs("div",{className:"audio-item-row",children:[c.jsx("span",{className:"item-number",children:J+1}),c.jsx("input",{type:"text",placeholder:"  ",value:I.name,onChange:le=>y(J,"name",le.target.value),className:"audio-name-input"}),c.jsx("input",{type:"url",placeholder:"https://example.com/audio.mp3",value:I.url,onChange:le=>y(J,"url",le.target.value),className:"audio-url-input"}),m.length>1&&c.jsx("button",{type:"button",className:"remove-item-btn",onClick:()=>x(J),title:"",children:c.jsx(Mr,{})})]},J))}),c.jsxs("button",{type:"button",className:"add-item-btn",onClick:U,children:[c.jsx(ys,{}),c.jsx("span",{children:"  "})]})]}),T&&m.length>1&&c.jsxs("div",{className:"form-group generated-items-section",children:[c.jsxs("label",{children:["  (",m.length,"):"]}),c.jsxs("div",{className:"generated-items-preview",children:[c.jsxs("p",{children:["   ",m.length,"  "]}),c.jsxs("div",{className:"preview-scroll",children:[m.slice(0,5).map((I,J)=>c.jsxs("div",{className:"preview-item",children:[J+1,". ",I.name]},J)),m.length>5&&c.jsxs("div",{className:"preview-more",children:["...  ",m.length-5,"  "]})]})]})]}),S&&c.jsx("div",{className:"error-message",children:S}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"cancel-btn",onClick:R,children:""}),c.jsx("button",{type:"submit",className:"submit-btn",children:" "})]})]}):c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-message",children:[c.jsx("h3",{children:"   "}),c.jsx("p",{children:"         "}),c.jsx("button",{className:"close-modal-btn",onClick:R,children:""})]})})})]})}):null}const Up="presence",M1="visitorId",L1="sessionId",jP=3e4;let yh=null,Ud=null;function zd(){return"v_"+Math.random().toString(36).slice(2)+Date.now().toString(36)}function Zw(){let t=localStorage.getItem(M1);return t||(t=zd(),localStorage.setItem(M1,t)),t}function DP(){const t=navigator.userAgent;let e="Unknown";t.indexOf("Win")!==-1?e="Windows":t.indexOf("Mac")!==-1?e="macOS":t.indexOf("Linux")!==-1?e="Linux":t.indexOf("Android")!==-1?e="Android":(t.indexOf("iOS")!==-1||t.indexOf("iPhone")!==-1||t.indexOf("iPad")!==-1)&&(e="iOS");let n="Unknown";t.indexOf("Chrome")!==-1&&t.indexOf("Edg")===-1?n="Chrome":t.indexOf("Safari")!==-1&&t.indexOf("Chrome")===-1?n="Safari":t.indexOf("Firefox")!==-1?n="Firefox":t.indexOf("Edg")!==-1?n="Edge":(t.indexOf("Opera")!==-1||t.indexOf("OPR")!==-1)&&(n="Opera");let r="Desktop";return/Mobile|Android|iPhone|iPad|iPod/.test(t)?r="Mobile":/Tablet|iPad/.test(t)&&(r="Tablet"),{os:e,browser:n,device:r}}async function bP(){try{const e=await(await fetch("https://ipapi.co/json/")).json();return{ip:e.ip||"Unknown",country:e.country_name||"Unknown",countryCode:e.country_code||"XX",city:e.city||"Unknown",region:e.region||"Unknown",regionCode:e.region_code||"Unknown",postal:e.postal||"Unknown",latitude:e.latitude||0,longitude:e.longitude||0,timezone:e.timezone||"Unknown",currency:e.currency||"Unknown",languages:e.languages||"Unknown",org:e.org||"Unknown"}}catch(t){return console.warn("Failed to get location:",t),{ip:"Unknown",country:"Unknown",countryCode:"XX",city:"Unknown",region:"Unknown",regionCode:"Unknown",postal:"Unknown",latitude:0,longitude:0,timezone:"Unknown",currency:"Unknown",languages:"Unknown",org:"Unknown"}}}async function VP(t){const e=Zw(),n=Et(Ne,Up,e),r=sessionStorage.getItem(L1),s=sessionStorage.getItem("sessionStartTime");if(!r){const h=zd();sessionStorage.setItem(L1,h),sessionStorage.setItem("sessionStartTime",Date.now().toString());try{const f=Et(Ne,"analytics","counters");await lr(f,{totalVisits:_w(1),lastVisit:new Date},{merge:!0})}catch(f){console.warn("Failed to increment visit counter:",f)}}const i=await bP(),o=DP(),l=s?Math.floor((Date.now()-parseInt(s))/1e3):0,u={visitorId:e,sessionId:r||zd(),userId:(t==null?void 0:t.uid)||null,email:(t==null?void 0:t.email)||null,displayName:(t==null?void 0:t.displayName)||null,photoURL:(t==null?void 0:t.photoURL)||null,isAnonymous:!t||t.isAnonymous,location:{ip:i.ip,country:i.country,city:i.city,region:i.region},ip:i.ip,country:i.country,countryCode:i.countryCode,city:i.city,region:i.region,regionCode:i.regionCode,postal:i.postal,latitude:i.latitude,longitude:i.longitude,timezone:i.timezone,currency:i.currency,languages:i.languages,org:i.org,os:o.os,browser:o.browser,device:o.device,userAgent:navigator.userAgent,isOnline:!0,firstSeen:new Date,lastSeen:new Date,lastActive:new Date,status:"online",currentPage:window.location.pathname,sessionDuration:l,currentlyPlaying:null,playHistory:[]};try{const h=await Is(n);if(h.exists()){const f=h.data();await lr(n,{...u,firstSeen:f.firstSeen||new Date,visitCount:(f.visitCount||0)+(r?0:1),playHistory:f.playHistory||[]},{merge:!0})}else await lr(n,{...u,visitCount:1},{merge:!0})}catch(h){console.warn("Presence init failed:",h)}yh&&clearInterval(yh),yh=setInterval(async()=>{try{const h=sessionStorage.getItem("sessionStartTime"),f=h?Math.floor((Date.now()-parseInt(h))/1e3):0;await lr(n,{lastSeen:new Date,lastActive:new Date,isOnline:!0,status:"online",currentPage:window.location.pathname,sessionDuration:f,currentlyPlaying:Ud},{merge:!0})}catch(h){console.warn("Presence heartbeat failed:",h)}},jP),window.addEventListener("beforeunload",async()=>{try{await lr(n,{lastSeen:new Date,lastActive:new Date,isOnline:!1,status:"offline"},{merge:!0})}catch{}})}async function OP(){try{const t=un(Ne,Up),n=(await Ss(t)).docs.map(w=>({id:w.id,...w.data()})),r=Date.now();let s=0;try{const w=Et(Ne,"analytics","counters"),A=await Is(w);A.exists()&&(s=A.data().totalVisits||0)}catch(w){console.warn("Failed to get total visits:",w)}const i=r-10*60*1e3,o=n.filter(w=>{var R,I;if(!w.isOnline)return!1;const A=w.lastSeen instanceof Date?w.lastSeen.getTime():((I=(R=w.lastSeen)==null?void 0:R.toMillis)==null?void 0:I.call(R))||0;return A&&r-A<=10*60*1e3}),l={},u={},h={},f={},m={},g={},S={},P={};n.forEach(w=>{const A=w.country||"Unknown",R=w.city||"Unknown",I=w.region||"Unknown",J=`${R}, ${A}`,le=w.os||"Unknown",H=w.browser||"Unknown",Me=w.device||"Unknown",B=w.timezone||"Unknown",K=w.currency||"Unknown";l[A]=(l[A]||0)+1,u[J]=(u[J]||0)+1,h[I]=(h[I]||0)+1,f[le]=(f[le]||0)+1,m[H]=(m[H]||0)+1,g[Me]=(g[Me]||0)+1,S[B]=(S[B]||0)+1,P[K]=(P[K]||0)+1});const T=Object.entries(l).map(([w,A])=>({country:w,count:A})).sort((w,A)=>A.count-w.count).slice(0,10),k=Object.entries(u).map(([w,A])=>({location:w,count:A})).sort((w,A)=>A.count-w.count).slice(0,10),v=Object.entries(h).map(([w,A])=>({region:w,count:A})).sort((w,A)=>A.count-w.count).slice(0,10),E=Object.entries(f).map(([w,A])=>({os:w,count:A})).sort((w,A)=>A.count-w.count),C=Object.entries(m).map(([w,A])=>({browser:w,count:A})).sort((w,A)=>A.count-w.count),D=Object.entries(g).map(([w,A])=>({device:w,count:A})).sort((w,A)=>A.count-w.count),F=Object.entries(S).map(([w,A])=>({timezone:w,count:A})).sort((w,A)=>A.count-w.count).slice(0,10),U=Object.entries(P).map(([w,A])=>({currency:w,count:A})).sort((w,A)=>A.count-w.count).slice(0,10),x=o.filter(w=>w.currentlyPlaying).map(w=>w.currentlyPlaying),y={};x.forEach(w=>{w!=null&&w.cassetteTitle&&(y[w.cassetteTitle]=(y[w.cassetteTitle]||0)+1)});const N=Object.entries(y).map(([w,A])=>({title:w,count:A})).sort((w,A)=>A.count-w.count).slice(0,5);return{totalVisits:s,uniqueVisitors:n.length,onlineNow:o.length,topCountries:T,topCities:k,topRegions:v,topOS:E,topBrowsers:C,topDevices:D,topTimezones:F,topCurrencies:U,activeListeners:x.length,topPlaying:N,allVisitors:n}}catch(t){return console.warn("getStats failed:",t),{totalVisits:0,uniqueVisitors:0,onlineNow:0,topCountries:[],topCities:[],topRegions:[],topOS:[],topBrowsers:[],topDevices:[],topTimezones:[],topCurrencies:[],activeListeners:0,topPlaying:[],allVisitors:[]}}}async function vh(t,e){if(Ud=t?{cassetteTitle:t,itemTitle:e,timestamp:new Date}:null,t)try{const n=Zw(),r=Et(Ne,Up,n),s=await Is(r);if(s.exists()){const i=s.data().playHistory||[],l=[{cassetteTitle:t,itemTitle:e,timestamp:new Date},...i].slice(0,20),u={};l.forEach(f=>{u[f.cassetteTitle]=(u[f.cassetteTitle]||0)+1});const h=Object.entries(u).sort((f,m)=>m[1]-f[1])[0];await lr(r,{currentlyPlaying:Ud,playHistory:l,mostPlayedCassette:h?{title:h[0],count:h[1]}:null},{merge:!0})}}catch(n){console.warn("Failed to update play history:",n)}}function MP(){const[t,e]=V.useState([]),[n,r]=V.useState([]),[s,i]=V.useState(!0);V.useEffect(()=>{const f=Ie.fromDate(new Date(Date.now()-6e5)),m=Vr(un(Ne,"presence"),nn("isOnline","==",!0),nn("isAnonymous","==",!1)),g=w1(m,T=>{const k=T.docs.map(v=>({id:v.id,...v.data()})).filter(v=>v.lastSeen&&v.lastSeen.toDate()>=f.toDate()).sort((v,E)=>E.lastSeen.toDate()-v.lastSeen.toDate());e(k),i(!1)},T=>{console.error("    :",T),i(!1)}),S=Vr(un(Ne,"presence"),nn("isOnline","==",!0),nn("isAnonymous","==",!0)),P=w1(S,T=>{const k=T.docs.map(v=>({id:v.id,...v.data()})).filter(v=>v.lastSeen&&v.lastSeen.toDate()>=f.toDate()).sort((v,E)=>E.lastSeen.toDate()-v.lastSeen.toDate());r(k)},T=>{console.error("   :",T)});return()=>{g(),P()}},[]);const o=f=>{if(!f)return" ";const m=f.toDate(),S=new Date-m,P=Math.floor(S/1e3),T=Math.floor(P/60);if(P<60)return"";if(T===1)return" ";if(T<60)return` ${T} `;const k=Math.floor(T/60);return k===1?" ":` ${k} `},l=f=>{if(!f||f<0)return"0 ";const m=Math.floor(f/3600),g=Math.floor(f%3600/60),S=f%60;return m>0?`${m}   ${g} `:g>0?`${g}   ${S} `:`${S} `},u=f=>({Egypt:"","United States":" ",Yemen:"","Saudi Arabia":"","United Arab Emirates":"",Kuwait:"",Jordan:"",Palestine:"",Lebanon:"",Syria:"",Iraq:"",Qatar:"",Bahrain:"",Oman:"",Morocco:"",Algeria:"",Tunisia:"",Libya:"",Sudan:"",Unknown:" ",Alexandria:"",Cairo:"",Giza:"","Ash-Shaykh Zayid":" ","Port Said":"",Suez:"",Luxor:"",Aswan:"",Mansoura:"",Tanta:"",Asyut:"",Ismailia:"",Zagazig:"",Damietta:"",Ashburn:"",Boardman:"","New York":"","Los Angeles":" ",Chicago:"",Houston:"",Phoenix:"",Philadelphia:"","San Antonio":" ","San Diego":" ",Dallas:"","San Jose":" ",Sanaa:"",Aden:"",Taiz:"",Hodeidah:"",Ibb:"",Riyadh:"",Jeddah:"",Mecca:"",Medina:"",Dammam:"",Khobar:"",Dubai:"","Abu Dhabi":"",Sharjah:"",Ajman:"",London:"",Paris:"",Berlin:"",Rome:"",Madrid:"",Istanbul:"",Moscow:"",Tokyo:"",Beijing:"",Seoul:"",Mumbai:"",Delhi:"",Karachi:"",Sydney:"",Melbourne:"",Toronto:"",Montreal:""})[f]||f,h=f=>{if(!f)return" ";const m=[];return f.city&&m.push(u(f.city)),f.country&&m.push(u(f.country)),m.length>0?m.join(" "):" "};return s?c.jsx("div",{className:"online-users-loading",children:c.jsx("p",{children:" ..."})}):c.jsxs("div",{className:"online-users-container",children:[c.jsxs("div",{className:"online-stats",children:[c.jsxs("div",{className:"stat-box registered",children:[c.jsx(Fd,{className:"stat-icon"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:t.length}),c.jsx("span",{className:"stat-label",children:" "})]})]}),c.jsxs("div",{className:"stat-box anonymous",children:[c.jsx(gh,{className:"stat-icon"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:n.length}),c.jsx("span",{className:"stat-label",children:""})]})]}),c.jsxs("div",{className:"stat-box total",children:[c.jsx(CN,{className:"stat-icon"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:t.length+n.length}),c.jsx("span",{className:"stat-label",children:""})]})]})]}),t.length>0&&c.jsxs("div",{className:"users-section",children:[c.jsxs("h3",{className:"section-title",children:[c.jsx(Fd,{}),"   (",t.length,")"]}),c.jsx("div",{className:"users-list",children:t.map(f=>c.jsxs("div",{className:"user-card registered",children:[c.jsx("img",{src:f.photoURL||"/default-avatar.png",alt:f.displayName,className:"user-avatar"}),c.jsxs("div",{className:"user-details",children:[c.jsx("div",{className:"user-name",children:f.displayName||""}),c.jsx("div",{className:"user-email",children:f.email}),c.jsxs("div",{className:"user-meta",children:[c.jsxs("span",{className:"user-location",children:[c.jsx(P1,{})," ",h(f.location)]}),c.jsxs("span",{className:"user-time",children:[c.jsx(mc,{})," ",o(f.lastSeen)]})]}),c.jsxs("div",{className:"user-stats",children:[c.jsxs("span",{className:"stat-badge",children:["  ",f.visitCount||1," "]}),c.jsxs("span",{className:"stat-badge",children:[" ",l(f.sessionDuration||0)]})]}),f.currentPage&&c.jsxs("div",{className:"user-activity",children:[" ",f.currentPage]}),f.currentlyPlaying&&c.jsxs("div",{className:"currently-playing",children:[" ",c.jsx("strong",{children:" :"})," ",f.currentlyPlaying.cassetteTitle,f.currentlyPlaying.itemTitle&&` - ${f.currentlyPlaying.itemTitle}`]}),f.mostPlayedCassette&&c.jsxs("div",{className:"most-played",children:[" ",c.jsx("strong",{children:" :"})," ",f.mostPlayedCassette.title," (",f.mostPlayedCassette.count," )"]})]}),c.jsx("div",{className:"online-indicator"})]},f.id))})]}),n.length>0&&c.jsxs("div",{className:"users-section",children:[c.jsxs("h3",{className:"section-title",children:[c.jsx(gh,{}),"  (",n.length,")"]}),c.jsx("div",{className:"users-list",children:n.map(f=>c.jsxs("div",{className:"user-card anonymous",children:[c.jsx(gh,{className:"anonymous-icon"}),c.jsxs("div",{className:"user-details",children:[c.jsx("div",{className:"user-name",children:""}),c.jsxs("div",{className:"user-meta",children:[c.jsxs("span",{className:"user-location",children:[c.jsx(P1,{})," ",h(f.location)]}),c.jsxs("span",{className:"user-time",children:[c.jsx(mc,{})," ",o(f.lastSeen)]})]}),c.jsxs("div",{className:"user-stats",children:[c.jsxs("span",{className:"stat-badge",children:["  ",f.visitCount||1," "]}),c.jsxs("span",{className:"stat-badge",children:[" ",l(f.sessionDuration||0)]})]}),f.currentPage&&c.jsxs("div",{className:"user-activity",children:[" ",f.currentPage]}),f.currentlyPlaying&&c.jsxs("div",{className:"currently-playing",children:[" ",c.jsx("strong",{children:" :"})," ",f.currentlyPlaying.cassetteTitle,f.currentlyPlaying.itemTitle&&` - ${f.currentlyPlaying.itemTitle}`]}),f.mostPlayedCassette&&c.jsxs("div",{className:"most-played",children:[" ",c.jsx("strong",{children:" :"})," ",f.mostPlayedCassette.title," (",f.mostPlayedCassette.count," )"]}),c.jsxs("div",{className:"user-id",children:["ID: ",f.id.substring(0,8),"..."]})]}),c.jsx("div",{className:"online-indicator"})]},f.id))})]}),t.length===0&&n.length===0&&c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:"    "})})]})}function LP({isAdmin:t,currentUser:e}){const[n,r]=V.useState([]),[s,i]=V.useState([]),[o,l]=V.useState([]),[u,h]=V.useState("pending"),[f,m]=V.useState(null),[g,S]=V.useState(!1),[P,T]=V.useState(null),[k,v]=V.useState([]),[E,C]=V.useState(""),[D,F]=V.useState(""),[U,x]=V.useState(!1),[y,N]=V.useState({totalVisits:0,uniqueVisitors:0,onlineNow:0}),w=O=>({Egypt:"","United States":" ",Yemen:"","Saudi Arabia":"","United Arab Emirates":"",Kuwait:"",Jordan:"",Palestine:"",Lebanon:"",Syria:"",Iraq:"",Qatar:"",Bahrain:"",Oman:"",Morocco:"",Algeria:"",Tunisia:"",Libya:"",Sudan:"",Unknown:" ",Alexandria:"",Cairo:"",Giza:"","Ash-Shaykh Zayid":" ","Alexandria Governorate":" ","Cairo Governorate":" ",Ashburn:"",Boardman:"",Virginia:"",Oregon:"",Sanaa:"","Amanat Alasimah":" ",Desktop:"",Mobile:"",Tablet:"",Windows:"",macOS:"",Linux:"",Android:"",iOS:"",Chrome:"",Firefox:"",Safari:"",Edge:"",Opera:"","Africa/Cairo":"","Asia/Aden":"","America/New_York":"","America/Los_Angeles":" ","Europe/London":"","Asia/Dubai":"","Asia/Riyadh":"",EGP:" ",USD:" ",SAR:" ",AED:" ",YER:" ",EUR:"",GBP:" "})[O]||O,A=[{icon:"",name:" "},{icon:"",name:""},{icon:"",name:""},{icon:"",name:""},{icon:"",name:" "},{icon:"",name:" "},{icon:"",name:" "},{icon:"",name:""},{icon:"",name:""},{icon:"|",name:" "}];V.useEffect(()=>{if(t){J(),le(),R(),I();const O=setInterval(I,3e4);return()=>clearInterval(O)}e&&H()},[t,e]);const R=async()=>{try{const O=await Hw();O.topBarMessages&&O.topBarMessages.length>0?v(O.topBarMessages):O.topBarMessage?v([O.topBarMessage]):v(["   "]),O.separatorIcon&&F(O.separatorIcon)}catch(O){console.error("   :",O)}},I=async()=>{try{const O=await OP();N(O)}catch(O){console.warn("    :",O),N({totalVisits:0,uniqueVisitors:0,onlineNow:0})}},J=async()=>{r([]);try{const O=await kw();r(O)}catch(O){console.warn(" Firestore     :",O),r([])}},le=async()=>{i([]);try{const O=await Rw();i(O)}catch(O){console.warn("     :",O),i([])}},H=async()=>{if(e!=null&&e.uid){l([]);try{const O=await ou(e.uid);l(O)}catch(O){console.warn("    :",O),l([])}}},Me=async O=>{if(window.confirm("     "))try{await Dw(O),alert("    "),J(),le(),H()}catch{alert("   ")}},B=async O=>{const Y=prompt("   ():");if(Y!==null)try{await bw(O,Y),alert("   "),J(),le(),H()}catch{alert("   ")}},K=O=>{m(O),T({title:O.title,imageUrl:O.imageUrl||"",items:O.items}),S(!0)},te=async()=>{try{await Vp(f.id,P),alert("   "),S(!1),m(null),J(),le(),H()}catch{alert("   ")}},ge=async O=>{if(window.confirm("     "))try{await Op(O),alert("  "),J(),le(),H()}catch{alert("   ")}},_e=async()=>{try{console.log("   :",k),await GN(k,D),console.log("   "),alert("    "),x(!1),C(""),await R()}catch(O){console.error("    :",O),console.error(" :",O.message),alert(`    : ${O.message}`)}},Z=()=>{E.trim()&&(v([...k,E.trim()]),C(""))},oe=O=>{v(k.filter((Y,pt)=>pt!==O))};if(!t)return c.jsx("div",{className:"admin-panel",children:c.jsxs("div",{className:"access-denied",children:[c.jsx("h2",{children:"    "}),c.jsx("p",{children:"    "})]})});const we=u==="pending"?n:u==="all"?s:o;return c.jsxs("div",{className:"admin-panel",children:[c.jsxs("div",{className:"admin-header",children:[c.jsx("h1",{children:"   "}),c.jsxs("div",{className:"main-stats-grid",children:[c.jsxs("div",{className:"main-stat-card visits",children:[c.jsx("div",{className:"stat-icon",children:""}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-value",children:y.totalVisits||0}),c.jsx("div",{className:"stat-label",children:" "}),c.jsx("div",{className:"stat-hint",children:"    "})]})]}),c.jsxs("div",{className:"main-stat-card visitors",children:[c.jsx("div",{className:"stat-icon",children:""}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-value",children:y.uniqueVisitors||0}),c.jsx("div",{className:"stat-label",children:" "}),c.jsx("div",{className:"stat-hint",children:"  "})]})]}),c.jsxs("div",{className:"main-stat-card online",children:[c.jsx("div",{className:"stat-icon",children:""}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-value",children:y.onlineNow||0}),c.jsx("div",{className:"stat-label",children:" "}),c.jsx("div",{className:"stat-hint",children:" 10 "})]})]}),c.jsxs("div",{className:"main-stat-card listening",children:[c.jsx("div",{className:"stat-icon",children:""}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-value",children:y.activeListeners||0}),c.jsx("div",{className:"stat-label",children:" "}),c.jsx("div",{className:"stat-hint",children:" "})]})]}),c.jsxs("div",{className:"main-stat-card cassettes",children:[c.jsx("div",{className:"stat-icon",children:""}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-value",children:s.length||0}),c.jsx("div",{className:"stat-label",children:" "}),c.jsx("div",{className:"stat-hint",children:"  "})]})]}),c.jsxs("div",{className:"main-stat-card pending",children:[c.jsx("div",{className:"stat-icon",children:""}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-value",children:n.length||0}),c.jsx("div",{className:"stat-label",children:""}),c.jsx("div",{className:"stat-hint",children:" "})]})]})]}),c.jsxs("div",{className:"stats-grid",children:[y.topCountries&&y.topCountries.length>0&&c.jsxs("div",{className:"countries-stats",children:[c.jsx("h3",{children:"   "}),c.jsx("div",{className:"country-list",children:y.topCountries.map((O,Y)=>c.jsxs("div",{className:"country-item",children:[c.jsx("span",{className:"country-name",children:w(O.country)}),c.jsxs("span",{className:"country-count",children:[O.count," "]})]},Y))})]}),y.topCities&&y.topCities.length>0&&c.jsxs("div",{className:"cities-stats",children:[c.jsx("h3",{children:"   "}),c.jsx("div",{className:"city-list",children:y.topCities.map((O,Y)=>{const[pt,ne]=O.location.split(", "),me=`${w(pt)} ${w(ne)}`;return c.jsxs("div",{className:"city-item",children:[c.jsx("span",{className:"city-name",children:me}),c.jsxs("span",{className:"city-count",children:[O.count," "]})]},Y)})})]}),y.topRegions&&y.topRegions.length>0&&c.jsxs("div",{className:"regions-stats",children:[c.jsx("h3",{children:"   "}),c.jsx("div",{className:"region-list",children:y.topRegions.map((O,Y)=>c.jsxs("div",{className:"region-item",children:[c.jsx("span",{className:"region-name",children:w(O.region)}),c.jsxs("span",{className:"region-count",children:[O.count," "]})]},Y))})]}),y.topDevices&&y.topDevices.length>0&&c.jsxs("div",{className:"devices-stats",children:[c.jsx("h3",{children:"   "}),c.jsx("div",{className:"device-list",children:y.topDevices.map((O,Y)=>c.jsxs("div",{className:"device-item",children:[c.jsx("span",{className:"device-name",children:w(O.device)}),c.jsxs("span",{className:"device-count",children:[O.count," "]})]},Y))})]}),y.topOS&&y.topOS.length>0&&c.jsxs("div",{className:"os-stats",children:[c.jsx("h3",{children:"    "}),c.jsx("div",{className:"os-list",children:y.topOS.map((O,Y)=>c.jsxs("div",{className:"os-item",children:[c.jsx("span",{className:"os-name",children:w(O.os)}),c.jsxs("span",{className:"os-count",children:[O.count," "]})]},Y))})]}),y.topBrowsers&&y.topBrowsers.length>0&&c.jsxs("div",{className:"browsers-stats",children:[c.jsx("h3",{children:"   "}),c.jsx("div",{className:"browser-list",children:y.topBrowsers.map((O,Y)=>c.jsxs("div",{className:"browser-item",children:[c.jsx("span",{className:"browser-name",children:w(O.browser)}),c.jsxs("span",{className:"browser-count",children:[O.count," "]})]},Y))})]}),y.topTimezones&&y.topTimezones.length>0&&c.jsxs("div",{className:"timezones-stats",children:[c.jsx("h3",{children:"    "}),c.jsx("div",{className:"timezone-list",children:y.topTimezones.map((O,Y)=>c.jsxs("div",{className:"timezone-item",children:[c.jsx("span",{className:"timezone-name",children:w(O.timezone)}),c.jsxs("span",{className:"timezone-count",children:[O.count," "]})]},Y))})]}),y.topCurrencies&&y.topCurrencies.length>0&&c.jsxs("div",{className:"currencies-stats",children:[c.jsx("h3",{children:"   "}),c.jsx("div",{className:"currency-list",children:y.topCurrencies.map((O,Y)=>c.jsxs("div",{className:"currency-item",children:[c.jsx("span",{className:"currency-name",children:w(O.currency)}),c.jsxs("span",{className:"currency-count",children:[O.count," "]})]},Y))})]}),y.topPlaying&&y.topPlaying.length>0&&c.jsxs("div",{className:"playing-stats",children:[c.jsx("h3",{children:"   "}),c.jsx("div",{className:"playing-list",children:y.topPlaying.map((O,Y)=>c.jsxs("div",{className:"playing-item",children:[c.jsx("span",{className:"cassette-title",children:O.title}),c.jsxs("span",{className:"listener-count",children:[O.count," "]})]},Y))})]})]}),c.jsxs("div",{className:"view-mode-tabs",children:[c.jsxs("button",{className:`tab-btn ${u==="pending"?"active":""}`,onClick:()=>h("pending"),children:[" (",n.length,")"]}),c.jsxs("button",{className:`tab-btn ${u==="all"?"active":""}`,onClick:()=>h("all"),children:["  (",s.length,")"]}),c.jsxs("button",{className:`tab-btn ${u==="mine"?"active":""}`,onClick:()=>h("mine"),children:[" (",o.length,")"]}),c.jsxs("button",{className:`tab-btn ${u==="mine"?"active":""}`,onClick:()=>h("mine"),children:[" (",o.length,")"]}),c.jsxs("button",{className:`tab-btn ${u==="online"?"active":""}`,onClick:()=>h("online"),children:[c.jsx($N,{}),"  "]})]})]}),c.jsxs("div",{className:"message-editor-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h2",{children:[c.jsx(TN,{}),"   "]}),c.jsxs("button",{className:"edit-message-btn",onClick:()=>x(!U),children:[U?c.jsx(bt,{}):c.jsx(ea,{}),U?"":""]})]}),U?c.jsxs("div",{className:"message-editor",children:[c.jsx("div",{className:"messages-list",children:k.map((O,Y)=>c.jsxs("div",{className:"message-item",children:[c.jsx("span",{children:O}),c.jsx("button",{className:"remove-btn",onClick:()=>oe(Y),title:"",children:c.jsx(bt,{})})]},Y))}),c.jsxs("div",{className:"icon-selector",children:[c.jsx("label",{children:" :"}),c.jsx("div",{className:"icon-options",children:A.map(O=>c.jsx("button",{className:`icon-option ${D===O.icon?"selected":""}`,onClick:()=>F(O.icon),title:O.name,children:O.icon},O.icon))})]}),c.jsxs("div",{className:"add-message-form",children:[c.jsx("input",{type:"text",value:E,onChange:O=>C(O.target.value),onKeyPress:O=>O.key==="Enter"&&Z(),placeholder:"  ...",className:"message-input"}),c.jsxs("button",{className:"add-btn",onClick:Z,children:[c.jsx(mh,{})," "]})]}),c.jsxs("div",{className:"message-actions",children:[c.jsxs("button",{className:"save-btn",onClick:_e,children:[c.jsx(mh,{}),"   "]}),c.jsxs("button",{className:"cancel-btn",onClick:()=>{R(),x(!1),C("")},children:[c.jsx(bt,{})," "]})]})]}):c.jsx("div",{className:"current-message",children:k.map((O,Y)=>c.jsxs("span",{style:{fontWeight:700,fontSize:"16px"},children:[O,Y<k.length-1&&c.jsxs("span",{style:{margin:"0 12px",color:"var(--accent-color)",fontSize:"18px"},children:[" ",D," "]})]},Y))})]}),c.jsx("div",{className:"divider"}),u==="online"?c.jsx(MP,{}):we.length===0?c.jsx("div",{className:"no-cassettes",children:c.jsx("p",{children:"   "})}):c.jsx("div",{className:"cassettes-grid",children:we.map(O=>{var Y;return c.jsxs("div",{className:"cassette-card",children:[c.jsxs("div",{className:"cassette-header",children:[c.jsx("h3",{children:O.title}),c.jsx("span",{className:`status-badge ${O.status}`,children:O.status==="approved"?"":O.status==="pending"?"":""})]}),c.jsxs("div",{className:"cassette-info",children:[c.jsxs("p",{children:[c.jsx("strong",{children:":"})," ",O.sectionId]}),c.jsxs("p",{children:[c.jsx("strong",{children:" :"})," ",O.createdByName]}),c.jsxs("p",{children:[c.jsx("strong",{children:":"})," ",O.createdByEmail]}),c.jsxs("p",{children:[c.jsx("strong",{children:" :"})," ",((Y=O.items)==null?void 0:Y.length)||0]})]}),c.jsxs("div",{className:"cassette-actions",children:[O.status!=="approved"&&c.jsxs("button",{className:"approve-btn",onClick:()=>Me(O.id),title:"",children:[c.jsx(mh,{})," "]}),c.jsxs("button",{className:"edit-btn",onClick:()=>K(O),title:"",children:[c.jsx(ea,{})," "]}),O.status!=="rejected"&&c.jsxs("button",{className:"reject-btn",onClick:()=>B(O.id),title:"",children:[c.jsx(bt,{})," "]}),c.jsxs("button",{className:"delete-btn",onClick:()=>ge(O.id),title:"",children:[c.jsx(Mr,{})," "]})]})]},O.id)})}),g&&f&&P&&c.jsx("div",{className:"edit-modal",children:c.jsxs("div",{className:"modal-content",children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:[": ",f.title]}),c.jsx("button",{onClick:()=>S(!1),children:c.jsx(bt,{})})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" :"}),c.jsx("input",{type:"text",value:P.title||"",onChange:O=>T({...P,title:O.target.value})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"  ():"}),c.jsx("input",{type:"url",value:P.imageUrl||"",onChange:O=>T({...P,imageUrl:O.target.value}),placeholder:"https://example.com/image.jpg"}),P.imageUrl&&c.jsx("div",{className:"image-preview",children:c.jsx("img",{src:P.imageUrl,alt:"",onError:O=>O.target.style.display="none"})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" :"}),P.items.map((O,Y)=>c.jsxs("div",{className:"audio-item",children:[c.jsx("input",{type:"text",placeholder:"",value:O.title,onChange:pt=>{const ne=[...P.items];ne[Y].title=pt.target.value,T({...P,items:ne})}}),c.jsx("input",{type:"text",placeholder:"",value:O.audioUrl,onChange:pt=>{const ne=[...P.items];ne[Y].audioUrl=pt.target.value,T({...P,items:ne})}})]},Y))]})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{className:"save-btn",onClick:te,children:" "}),c.jsx("button",{className:"cancel-btn",onClick:()=>S(!1),children:""})]})]})})]})}function FP({isOpen:t,onClose:e,cassette:n,onCassetteUpdated:r}){const[s,i]=V.useState(""),[o,l]=V.useState([{name:"",url:""}]),[u,h]=V.useState("");V.useEffect(()=>{n&&(i(n.title||""),l(n.items&&n.items.length>0?n.items.map(T=>({name:T.title||"",url:T.audioUrl||""})):[{name:"",url:""}]))},[n]);const f=()=>{l([...o,{name:"",url:""}])},m=T=>{if(o.length>1){const k=o.filter((v,E)=>E!==T);l(k)}},g=(T,k,v)=>{const E=[...o];E[T][k]=v,l(E)},S=async T=>{if(T.preventDefault(),h(""),!s.trim()){h("    ");return}const k=o.filter(v=>v.name.trim()&&v.url.trim());if(k.length===0){h("       ");return}try{await Vp(n.id,{title:s.trim(),items:k.map((v,E)=>({id:`item-${Date.now()}-${E}`,title:v.name.trim(),audioUrl:v.url.trim(),ayah:null}))}),alert(`    !

 : ${s.trim()}
  : ${k.length}

       ""`),r&&r(),P()}catch(v){console.error("  :",v),h("    .    .")}},P=()=>{h(""),e()};return!t||!n?null:c.jsx("div",{className:"modal-overlay",onClick:P,children:c.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{className:"close-btn",onClick:P,children:c.jsx(bt,{})})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("form",{onSubmit:S,className:"cassette-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"title",children:" :"}),c.jsx("input",{type:"text",id:"title",value:s,onChange:T=>i(T.target.value),placeholder:":   -  ",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" :"}),c.jsx("div",{className:"audio-items",children:o.map((T,k)=>c.jsxs("div",{className:"audio-item",children:[c.jsx("input",{type:"text",value:T.name,onChange:v=>g(k,"name",v.target.value),placeholder:"  (:  1-10)",className:"audio-input"}),c.jsx("input",{type:"url",value:T.url,onChange:v=>g(k,"url",v.target.value),placeholder:"   (URL)",className:"audio-input"}),c.jsx("button",{type:"button",onClick:()=>m(k),className:"remove-btn",disabled:o.length===1,title:"",children:c.jsx(Mr,{})})]},k))}),c.jsxs("button",{type:"button",onClick:f,className:"add-item-btn",children:[c.jsx(ys,{}),"   "]})]}),u&&c.jsx("div",{className:"error-message",children:u}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"submit",className:"submit-btn",children:"  "}),c.jsx("button",{type:"button",onClick:P,className:"cancel-btn",children:""})]})]})})]})})}function UP({refreshTrigger:t}){const{currentUser:e}=ru(),[n,r]=V.useState([]),[s,i]=V.useState(!1),[o,l]=V.useState(null);V.useEffect(()=>{e&&u()},[e,t]);const u=async()=>{console.log(" MyCassettes:    :",e.uid),r([]);try{const T=await ou(e.uid);console.log(" MyCassettes:  ",T.length,""),console.log(" :",T),r(T)}catch(T){console.error(" MyCassettes:   :",T),console.warn(" Firestore     :",T),r([])}},h=T=>{l(T),i(!0)},f=()=>{i(!1),l(null)},m=()=>{u()},g=async T=>{if(window.confirm("          ."))try{await Op(T),alert("  "),u()}catch{alert("   ")}},S=async()=>{await wP(e.uid,e.displayName)},P=T=>{switch(T){case"approved":return c.jsxs("span",{className:"status-badge approved",children:[c.jsx(Mp,{})," "]});case"pending":return c.jsxs("span",{className:"status-badge pending",children:[c.jsx(mc,{}),"  "]});case"rejected":return c.jsxs("span",{className:"status-badge rejected",children:[c.jsx(UN,{})," "]});default:return null}};return e?c.jsxs("div",{className:"my-cassettes",children:[c.jsxs("div",{className:"my-cassettes-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsx("h1",{children:" "}),c.jsxs("p",{className:"subtitle",children:[" : ",n.length]})]}),n.length>0&&c.jsxs("button",{className:"share-my-cassettes-btn",onClick:S,title:" ",children:[c.jsx(Uw,{}),c.jsx("span",{children:" "})]})]}),n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("p",{children:"    "}),c.jsx("p",{className:"hint",children:' " "   '})]}):c.jsx("div",{className:"cassettes-grid",children:n.map(T=>{var k;return c.jsxs("div",{className:"my-cassette-card",children:[c.jsx("div",{className:"cassette-status-badge",children:P(T.status)}),c.jsxs("div",{className:"cassette-body",children:[c.jsx("div",{className:"screw screw-top-left"}),c.jsx("div",{className:"screw screw-top-right"}),c.jsx("div",{className:"screw screw-bottom-left"}),c.jsx("div",{className:"screw screw-bottom-right"}),c.jsx("div",{className:"screw screw-center"}),c.jsxs("div",{className:"cassette-window",children:[c.jsxs("div",{className:"reel reel-left",children:[c.jsx("div",{className:"reel-hub"}),c.jsx("div",{className:"reel-teeth"})]}),c.jsx("div",{className:"tape-line"}),c.jsxs("div",{className:"reel reel-right",children:[c.jsx("div",{className:"reel-hub"}),c.jsx("div",{className:"reel-teeth"})]})]}),c.jsxs("div",{className:"cassette-label",children:[c.jsx("h4",{className:"label-title",children:T.title}),c.jsxs("p",{className:"label-subtitle",children:[((k=T.items)==null?void 0:k.length)||0," "]})]}),c.jsx("div",{className:"cassette-bottom-slot"})]}),c.jsxs("div",{className:"cassette-metadata",children:[T.status==="approved"&&c.jsx("div",{className:"analytics-row",children:c.jsxs("span",{className:"stat",children:[c.jsx(xN,{})," ",T.views||0]})}),T.status==="rejected"&&T.rejectionReason&&c.jsxs("div",{className:"rejection-reason",children:[c.jsx("strong",{children:" :"})," ",T.rejectionReason]})]}),c.jsxs("div",{className:"cassette-actions",children:[c.jsx("button",{className:"edit-btn",onClick:()=>h(T),title:"",children:c.jsx(ea,{})}),c.jsx("button",{className:"delete-btn",onClick:()=>g(T.id),title:"",children:c.jsx(Mr,{})})]})]},T.id)})}),c.jsx(FP,{isOpen:s,onClose:f,cassette:o,onCassetteUpdated:m})]}):c.jsx("div",{className:"my-cassettes",children:c.jsxs("div",{className:"access-denied",children:[c.jsx("h2",{children:"   "}),c.jsx("p",{children:"   "})]})})}function zP({onClose:t,onPlayCassette:e}){const[n,r]=V.useState([]),[s,i]=V.useState([]),[o,l]=V.useState(0),[u,h]=V.useState(!0);V.useEffect(()=>{f();const v=setInterval(()=>{i(ta())},1e3);return()=>clearInterval(v)},[]);const f=()=>{try{const v=cu(),E=ta();r(v),i(E),l(tP()),h(!1)}catch(v){console.error("   :",v),h(!1)}},m=v=>{if(window.confirm("     "))try{D1(v),f(),alert("   ")}catch(E){alert("  : "+E.message)}},g=()=>{if(window.confirm(`     
   !`))try{n.forEach(v=>{D1(v.cassetteId)}),f(),alert("    ")}catch(v){alert("  : "+v.message)}},S=()=>{window.electronAPI&&window.electronAPI.openDownloadsFolder?window.electronAPI.openDownloadsFolder():alert("      Electron ")},P=window.electronAPI&&window.electronAPI.openDownloadsFolder,T=v=>{if(e){const E={id:v.cassetteId,title:v.title,items:v.items||[]};e(E),t&&t()}},k=v=>v?new Date(v).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):" ";return c.jsx("div",{className:"my-downloads-overlay",children:c.jsxs("div",{className:"my-downloads-container",children:[c.jsxs("div",{className:"my-downloads-header",children:[c.jsx("h2",{children:" "}),c.jsx("button",{className:"close-btn",onClick:t,children:""})]}),c.jsxs("div",{className:"downloads-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx(Zo,{className:"stat-icon"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-value",children:n.length}),c.jsx("span",{className:"stat-label",children:" "})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx(NN,{className:"stat-icon"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-value",children:b1(o)}),c.jsx("span",{className:"stat-label",children:" "})]})]})]}),c.jsxs("div",{className:"downloads-actions",children:[c.jsxs("button",{className:`action-btn open-folder-btn ${P?"":"disabled"}`,onClick:S,disabled:!P,title:P?"  ":"      Electron ",children:[c.jsx(AN,{}),"   ",!P&&c.jsx("span",{className:"electron-only-badge",children:"Electron"})]}),n.length>0&&c.jsxs("button",{className:"action-btn delete-all-btn",onClick:g,children:[c.jsx(Mr,{}),"  "]})]}),c.jsx("div",{className:"downloads-content",children:u?c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:" ..."})}):c.jsxs(c.Fragment,{children:[s.length>0&&c.jsxs("div",{className:"active-downloads-section",children:[c.jsx("h3",{className:"section-title",children:"  "}),c.jsx("div",{className:"downloads-list",children:s.map(v=>c.jsxs("div",{className:"download-item active-download",children:[c.jsxs("div",{className:"download-info",children:[c.jsx("h3",{className:"download-title",children:v.title}),c.jsxs("div",{className:"download-progress-info",children:[c.jsxs("span",{className:"progress-text",children:[v.current," / ",v.total," "]}),c.jsxs("span",{className:"progress-percentage",children:[v.progress,"%"]})]}),c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${v.progress}%`}})}),c.jsxs("div",{className:"download-status",children:[v.status==="downloading"&&c.jsxs("span",{className:"status-downloading",children:[c.jsx(bN,{className:"spinner"}),"  ..."]}),v.status==="paused"&&c.jsx("span",{className:"status-paused",children:"  "})]})]}),c.jsxs("div",{className:"download-actions",children:[v.status==="downloading"?c.jsx("button",{className:"download-action-btn pause-btn",onClick:()=>sP(v.id),title:" ",children:c.jsx(au,{})}):c.jsx("button",{className:"download-action-btn resume-btn",onClick:()=>iP(v.id),title:"",children:c.jsx(Or,{})}),c.jsx("button",{className:"download-action-btn cancel-btn",onClick:()=>{window.confirm("   ")&&(oP(v.id),f())},title:"",children:c.jsx(bt,{})})]})]},v.id))})]}),n.length===0&&s.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx(Zo,{className:"empty-icon"}),c.jsx("p",{children:"    "}),c.jsx("small",{children:"     "})]}):n.length>0&&c.jsxs("div",{className:"completed-downloads-section",children:[c.jsx("h3",{className:"section-title",children:" "}),c.jsx("div",{className:"downloads-list",children:n.map(v=>c.jsxs("div",{className:"download-item",children:[c.jsxs("div",{className:"download-info",children:[c.jsx("h3",{className:"download-title",children:v.title}),c.jsxs("div",{className:"download-meta",children:[c.jsxs("span",{className:"download-files",children:[v.fileCount||0," "]}),c.jsx("span",{className:"download-size",children:b1(v.totalSize||0)}),c.jsx("span",{className:"download-date",children:k(v.downloadedAt)})]})]}),c.jsxs("div",{className:"download-actions",children:[c.jsx("button",{className:"download-action-btn play-btn",onClick:()=>T(v),title:"",children:c.jsx(Or,{})}),c.jsx("button",{className:"download-action-btn delete-btn",onClick:()=>m(v.cassetteId),title:"",children:c.jsx(Mr,{})})]})]},v.cassetteId))})]})]})})]})})}function BP({onClose:t,onCreated:e}){const[n,r]=V.useState(""),[s,i]=V.useState(""),[o,l]=V.useState(""),u=h=>{if(h.preventDefault(),!n.trim()){l("   ");return}const f=Jw(n.trim(),s.trim());f?(e&&e(f),alert("    ")):l("  ")};return c.jsx("div",{className:"create-playlist-modal-overlay",onClick:t,children:c.jsxs("div",{className:"create-playlist-modal",onClick:h=>h.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"   "}),c.jsx("button",{className:"close-icon-btn",onClick:t,children:c.jsx(bt,{})})]}),c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"playlist-name",children:"  *"}),c.jsx("input",{id:"playlist-name",type:"text",value:n,onChange:h=>{r(h.target.value),l("")},placeholder:":  ",maxLength:50,autoFocus:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"playlist-description",children:" ()"}),c.jsx("textarea",{id:"playlist-description",value:s,onChange:h=>i(h.target.value),placeholder:"  ...",maxLength:200,rows:3})]}),o&&c.jsx("div",{className:"error-message",children:o}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",className:"cancel-btn",onClick:t,children:""}),c.jsx("button",{type:"submit",className:"submit-btn",children:""})]})]})]})})}function $P({playlist:t,onClose:e,onPlay:n}){const[r,s]=V.useState(!1),[i,o]=V.useState(t.name),[l,u]=V.useState(t.description||""),[h,f]=V.useState(t.items||[]),m=()=>{if(!i.trim()){alert("   ");return}const T=lP(t.id,{name:i.trim(),description:l.trim()});T&&(s(!1),alert("   "),t.name=T.name,t.description=T.description)},g=T=>{if(window.confirm("      ")&&uP(t.id,T)){const k=h.filter(v=>v.itemId!==T);f(k),alert("   ")}},S=()=>{if(h.length===0){alert("  ");return}n&&(n(t),e())},P=T=>{if(n){const k={...t,items:[T]};n(k),e()}};return c.jsx("div",{className:"playlist-details-overlay",onClick:e,children:c.jsxs("div",{className:"playlist-details-modal",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"playlist-details-header",children:[r?c.jsxs("div",{className:"edit-form",children:[c.jsx("input",{type:"text",value:i,onChange:T=>o(T.target.value),placeholder:" ",className:"edit-name-input"}),c.jsx("textarea",{value:l,onChange:T=>u(T.target.value),placeholder:"",className:"edit-description-input",rows:2}),c.jsxs("div",{className:"edit-actions",children:[c.jsxs("button",{className:"save-edit-btn",onClick:m,children:[c.jsx(jN,{})," "]}),c.jsx("button",{className:"cancel-edit-btn",onClick:()=>s(!1),children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"playlist-header-info",children:[c.jsx("h2",{children:t.name}),t.description&&c.jsx("p",{children:t.description}),c.jsxs("span",{className:"playlist-items-count",children:[h.length," "]})]}),c.jsxs("div",{className:"playlist-header-actions",children:[c.jsxs("button",{className:"header-action-btn edit-btn",onClick:()=>s(!0),children:[c.jsx(ea,{})," "]}),c.jsxs("button",{className:"header-action-btn play-all-btn",onClick:S,children:[c.jsx(Or,{}),"  "]})]})]}),c.jsx("button",{className:"close-icon-btn",onClick:e,children:c.jsx(bt,{})})]}),c.jsx("div",{className:"playlist-items-content",children:h.length===0?c.jsxs("div",{className:"empty-playlist",children:[c.jsx("p",{children:" "}),c.jsx("small",{children:"    "})]}):c.jsx("div",{className:"playlist-items-list",children:h.map((T,k)=>c.jsxs("div",{className:"playlist-item-row",children:[c.jsx("span",{className:"item-index",children:k+1}),c.jsxs("div",{className:"item-info",children:[c.jsx("h4",{className:"item-title",children:T.itemTitle}),c.jsx("span",{className:"item-cassette",children:T.cassetteTitle})]}),c.jsxs("div",{className:"item-actions",children:[c.jsx("button",{className:"item-action-btn play-item-btn",onClick:()=>P(T),title:"",children:c.jsx(Or,{})}),c.jsx("button",{className:"item-action-btn remove-item-btn",onClick:()=>g(T.itemId),title:"",children:c.jsx(Mr,{})})]})]},T.itemId))})})]})})}function HP({onClose:t,onPlayPlaylist:e}){const[n,r]=V.useState([]),[s,i]=V.useState(!1),[o,l]=V.useState(null),[u,h]=V.useState(!1);V.useEffect(()=>{f()},[]);const f=()=>{const C=Wn();r(C)},m=()=>{i(!0)},g=()=>{f(),i(!1)},S=(C,D)=>{D.stopPropagation(),window.confirm("    ")&&cP(C)&&(f(),alert("   "))},P=(C,D)=>{D.stopPropagation(),hP(C.id)&&alert("   ")},T=()=>{const C=document.createElement("input");C.type="file",C.accept=".json",C.onchange=async D=>{try{const F=D.target.files[0];F&&(await dP(F),f(),alert("   "))}catch(F){alert("  : "+F.message)}},C.click()},k=C=>{l(C),h(!0)},v=(C,D)=>{if(D.stopPropagation(),C.items.length===0){alert("  ");return}e&&(e(C),t&&t())},E=C=>C?new Date(C).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"";return c.jsxs("div",{className:"my-playlists-overlay",children:[c.jsxs("div",{className:"my-playlists-container",children:[c.jsxs("div",{className:"my-playlists-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{className:"close-btn",onClick:t,children:""})]}),c.jsxs("div",{className:"playlists-actions",children:[c.jsxs("button",{className:"action-btn create-btn",onClick:m,children:[c.jsx(ys,{}),"   "]}),c.jsxs("button",{className:"action-btn import-btn",onClick:T,children:[c.jsx(zN,{}),"  "]})]}),c.jsx("div",{className:"playlists-content",children:n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx(R1,{className:"empty-icon"}),c.jsx("p",{children:"     "}),c.jsx("small",{children:"      "}),c.jsxs("button",{className:"create-first-btn",onClick:m,children:[c.jsx(ys,{}),"  "]})]}):c.jsx("div",{className:"playlists-grid",children:n.map(C=>c.jsxs("div",{className:"playlist-card",onClick:()=>k(C),children:[c.jsx("div",{className:"playlist-icon",children:c.jsx(R1,{})}),c.jsxs("div",{className:"playlist-info",children:[c.jsx("h3",{className:"playlist-name",children:C.name}),C.description&&c.jsx("p",{className:"playlist-description",children:C.description}),c.jsxs("div",{className:"playlist-meta",children:[c.jsxs("span",{className:"playlist-count",children:[C.items.length," "]}),c.jsx("span",{className:"playlist-date",children:E(C.createdAt)})]})]}),c.jsxs("div",{className:"playlist-actions",children:[c.jsx("button",{className:"playlist-action-btn play-btn",onClick:D=>v(C,D),title:"",children:c.jsx(Or,{})}),c.jsx("button",{className:"playlist-action-btn export-btn",onClick:D=>P(C,D),title:"",children:c.jsx(Zo,{})}),c.jsx("button",{className:"playlist-action-btn delete-btn",onClick:D=>S(C.id,D),title:"",children:c.jsx(Mr,{})})]})]},C.id))})})]}),s&&c.jsx(BP,{onClose:()=>i(!1),onCreated:g}),u&&o&&c.jsx($P,{playlist:o,onClose:()=>{h(!1),l(null),f()},onPlay:e})]})}const qP=async t=>{try{const e=Et(Ne,"userProfiles",t),n=await Is(e);return n.exists()?n.data():null}catch(e){throw console.error("Error getting user profile:",e),e}},WP=async(t,e)=>{try{const n=Et(Ne,"userProfiles",t);(await Is(n)).exists()?await wa(n,{...e,updatedAt:new Date}):await lr(n,{...e,userId:t,createdAt:new Date,updatedAt:new Date})}catch(n){throw console.error("Error updating user profile:",n),n}};function GP({userId:t,userName:e,currentUser:n,onClose:r,onCassetteClick:s}){const[i,o]=V.useState([]),[l,u]=V.useState(null),[h,f]=V.useState(!1),[m,g]=V.useState({bio:"",youtube:"",instagram:"",twitter:"",facebook:""}),S=(n==null?void 0:n.uid)===t;V.useEffect(()=>{P()},[t]);const P=async()=>{try{const k=await ou(t);o(k.filter(E=>E.status==="approved"));const v=await qP(t);v&&(u(v),g({bio:v.bio||"",youtube:v.youtube||"",instagram:v.instagram||"",twitter:v.twitter||"",facebook:v.facebook||""}))}catch(k){console.error("Error loading user data:",k)}},T=async()=>{try{await WP(t,m),u({...l,...m}),f(!1),alert("    ")}catch(k){console.error("Error saving profile:",k),alert("     ")}};return c.jsx("div",{className:"user-profile-overlay",onClick:r,children:c.jsxs("div",{className:"user-profile-container",onClick:k=>k.stopPropagation(),children:[c.jsx("button",{className:"close-profile-btn",onClick:r,children:c.jsx(bt,{})}),c.jsxs("div",{className:"profile-header",children:[c.jsx("div",{className:"profile-avatar",children:e==null?void 0:e.charAt(0).toUpperCase()}),c.jsx("h2",{className:"profile-name",children:e}),h?c.jsxs("div",{className:"profile-edit-form",children:[c.jsx("textarea",{value:m.bio,onChange:k=>g({...m,bio:k.target.value}),placeholder:" ...",className:"bio-input",rows:"3"}),c.jsxs("div",{className:"social-inputs",children:[c.jsxs("div",{className:"social-input-group",children:[c.jsx(N1,{className:"social-icon youtube"}),c.jsx("input",{type:"text",value:m.youtube,onChange:k=>g({...m,youtube:k.target.value}),placeholder:"  "})]}),c.jsxs("div",{className:"social-input-group",children:[c.jsx(A1,{className:"social-icon instagram"}),c.jsx("input",{type:"text",value:m.instagram,onChange:k=>g({...m,instagram:k.target.value}),placeholder:" "})]}),c.jsxs("div",{className:"social-input-group",children:[c.jsx(C1,{className:"social-icon twitter"}),c.jsx("input",{type:"text",value:m.twitter,onChange:k=>g({...m,twitter:k.target.value}),placeholder:" "})]}),c.jsxs("div",{className:"social-input-group",children:[c.jsx(x1,{className:"social-icon facebook"}),c.jsx("input",{type:"text",value:m.facebook,onChange:k=>g({...m,facebook:k.target.value}),placeholder:" "})]})]}),c.jsxs("div",{className:"profile-edit-actions",children:[c.jsx("button",{onClick:T,className:"save-profile-btn",children:" "}),c.jsx("button",{onClick:()=>f(!1),className:"cancel-profile-btn",children:""})]})]}):c.jsxs(c.Fragment,{children:[(l==null?void 0:l.bio)&&c.jsx("p",{className:"profile-bio",children:l.bio}),c.jsxs("div",{className:"social-links",children:[(l==null?void 0:l.youtube)&&c.jsxs("a",{href:l.youtube,target:"_blank",rel:"noopener noreferrer",className:"social-link youtube",children:[c.jsx(N1,{})," "]}),(l==null?void 0:l.instagram)&&c.jsxs("a",{href:l.instagram,target:"_blank",rel:"noopener noreferrer",className:"social-link instagram",children:[c.jsx(A1,{})," "]}),(l==null?void 0:l.twitter)&&c.jsxs("a",{href:l.twitter,target:"_blank",rel:"noopener noreferrer",className:"social-link twitter",children:[c.jsx(C1,{})," "]}),(l==null?void 0:l.facebook)&&c.jsxs("a",{href:l.facebook,target:"_blank",rel:"noopener noreferrer",className:"social-link facebook",children:[c.jsx(x1,{})," "]})]}),S&&c.jsxs("button",{onClick:()=>f(!0),className:"edit-profile-btn",children:[c.jsx(ea,{}),"  "]})]})]}),c.jsxs("div",{className:"profile-cassettes-section",children:[c.jsxs("h3",{className:"section-title",children:["  ",S?" ":e," (",i.length,")"]}),i.length>0?c.jsx("div",{className:"cassettes-grid",children:i.map(k=>c.jsx(Yw,{cassette:k,onClick:()=>s(k)},k.id))}):c.jsx("div",{className:"no-cassettes",children:c.jsx("p",{children:"   "})})]})]})})}function KP(){var _e;const{currentUser:t}=ru(),[e,n]=V.useState(!1),[r,s]=V.useState(!1),[i,o]=V.useState(!1),[l,u]=V.useState(!1),[h,f]=V.useState(!1),[m,g]=V.useState(null),S=(t==null?void 0:t.email)===Aw,[P,T]=V.useState(null),[k,v]=V.useState(null),[E,C]=V.useState(null),[D,F]=V.useState(!1),[U,x]=V.useState(!1),[y,N]=V.useState(!1),[w,A]=V.useState(!1),[R,I]=V.useState(0),[J,le]=V.useState(!1),H=V.useRef(null);V.useEffect(()=>{try{VP(t||null)}catch(Z){console.warn("Presence tracking init failed:",Z)}},[t]),V.useEffect(()=>{if(!P&&xo.length>0){const Z=xo.find(oe=>oe.id==="quran")||xo[1];T(Z),console.log("    :",Z.name)}},[P]),V.useEffect(()=>{(async()=>{const oe=T1();if(oe&&oe.cassetteId)try{console.log("   :",oe);const we=await jw(oe.cassetteId);if(we){v(we);const O=we.items.find(Y=>Y.id===oe.itemId);O&&(C(O),oe.position?console.log("   :",we.title,"-",O.title,"",oe.position,""):console.log("   :",we.title,"-",O.title))}}catch(we){console.error("    :",we)}})()},[]),V.useEffect(()=>{k&&E&&(E1(k.id,E.id,0),console.log("    :",k.title,"-",E.title),D&&vh(k.title,E.title))},[k,E]);const Me=Z=>{k&&E&&Z>0&&E1(k.id,E.id,Z)};V.useEffect(()=>{D?k&&E&&vh(k.title,E.title):vh(null,null)},[D]),V.useEffect(()=>{if(k&&k.items&&k.items.length>0){const Z=k.items[0];C(Z)}},[k]);const B=()=>{if(k&&E){const Z=k.items.findIndex(oe=>oe.id===E.id);Z<k.items.length-1&&(C(k.items[Z+1]),F(!0))}},K=()=>{if(k&&E){const Z=k.items.findIndex(oe=>oe.id===E.id);Z>0&&(C(k.items[Z-1]),F(!0))}};fN({onPlayPause:()=>{E&&F(!D)},onStop:()=>{E&&(F(!1),H.current&&(H.current.currentTime=0))},onNext:B,onPrevious:K,onToggleFullscreen:()=>le(!J),onSeekForward:()=>{H.current&&(H.current.currentTime=Math.min(H.current.currentTime+10,H.current.duration))},onSeekBackward:()=>{H.current&&(H.current.currentTime=Math.max(H.current.currentTime-10,0))},onSeekToPercent:Z=>{H.current&&H.current.duration&&(H.current.currentTime=Z/100*H.current.duration)}});const te=()=>{A(!0),F(!1)},ge=Z=>{console.log(" App.jsx:    :",Z),console.log(" :",Z.sectionId),console.log(" :",Z.title);const oe=Date.now();console.log("  refreshTrigger :",oe),I(oe)};return c.jsxs("div",{className:"app",children:[c.jsx(KN,{onAddCassetteClick:te}),c.jsxs("div",{className:"main-container",children:[c.jsx(PP,{showAdminPanel:e,setShowAdminPanel:n,showMyCassettes:r,setShowMyCassettes:s,showMyDownloads:i,setShowMyDownloads:o,showMyPlaylists:l,setShowMyPlaylists:u,isAdmin:S}),e?c.jsx(LP,{isAdmin:S,currentUser:t}):r?c.jsx(UP,{refreshTrigger:R}):i?c.jsx(zP,{onClose:()=>o(!1),onPlayCassette:Z=>{v(Z),o(!1)}}):l?c.jsx(HP,{onClose:()=>u(!1),onPlayPlaylist:Z=>{const oe={id:Z.id,title:Z.name,items:Z.items.map(we=>({id:we.itemId,title:we.itemTitle,audioUrl:we.audioUrl}))};v(oe),u(!1)}}):c.jsxs("div",{className:"content-area",children:[c.jsx(Kw,{selectedAyah:E,selectedSection:P,selectedCassette:k,isPlaying:D,setIsPlaying:F,onNext:B,onPrevious:K,autoPlay:U,sequentialPlay:y,onPositionUpdate:Me,savedPosition:((_e=T1())==null?void 0:_e.position)||0,isExpanded:J,onToggleExpand:()=>le(!J),audioRefCallback:Z=>{H.current=Z}}),c.jsx(JN,{selectedSection:P,setSelectedSection:T,refreshTrigger:R}),c.jsx(mP,{selectedCassette:k,selectedItem:E,setSelectedItem:C,isPlaying:D,setIsPlaying:F,onOpenUserProfile:Z=>{g(Z),f(!0)},onNext:B,onPrevious:K,autoPlay:U,sequentialPlay:y}),c.jsx(NP,{selectedSection:P,selectedCassette:k,setSelectedCassette:v,refreshTrigger:R,isPlaying:D})]})]}),c.jsx(kP,{selectedAyah:E,selectedCassette:k,isPlaying:D,setIsPlaying:F,autoPlay:U,setAutoPlay:x,sequentialPlay:y,setSequentialPlay:N,setShowMyDownloads:o}),c.jsx(RP,{isOpen:w,onClose:()=>A(!1),onCassetteAdded:ge}),h&&m&&c.jsx(GP,{userId:m.userId,userName:m.userName,currentUser:t,onClose:()=>{f(!1),g(null)},onCassetteClick:Z=>{v(Z),f(!1)}})]})}function QP(){return c.jsx(pN,{children:c.jsx(oN,{children:c.jsx(KP,{})})})}console.log(" Starting application...");const Bd=document.getElementById("root");console.log(" Root element:",Bd);Bd?(_h.createRoot(Bd).render(c.jsx(_t.StrictMode,{children:c.jsx(WN,{children:c.jsx(QP,{})})})),console.log(" App rendered successfully")):console.error(" Root element not found!");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/haqebetalmouslim/sw.js").then(t=>{console.log(" Service Worker registered successfully:",t.scope),t.addEventListener("updatefound",()=>{const e=t.installing;console.log(" Service Worker update found"),e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&console.log(" New Service Worker available - refresh to update")})})}).catch(t=>{console.error(" Service Worker registration failed:",t)})});
